"use strict";(self.webpackChunklab4=self.webpackChunklab4||[]).push([[179],{2011:(it,Ce,x)=>{x.d(Ce,{Dh:()=>le,GT:()=>ie,cc:()=>Se,hO:()=>ze,on:()=>j,pX:()=>ee,xv:()=>ye});var p=x(4650),Q=x(9260),P=x(7184);it=x.hmd(it);const re=["ngOnDestroy"],ee=(ve,de,be,_e={})=>new Proxy(ve,{get:(pe,Ie)=>be.runOutsideAngular(()=>{var Pe;if(ve[Ie])return!(null===(Pe=_e?.spy)||void 0===Pe)&&Pe.get&&_e.spy.get(Ie,ve[Ie]),ve[Ie];if(re.indexOf(Ie)>-1)return()=>{};const Te=de.toPromise().then(U=>{const ue=U&&U[Ie];return"function"==typeof ue?ue.bind(U):ue&&ue.then?ue.then(Re=>be.run(()=>Re)):be.run(()=>ue)});return new Proxy(()=>{},{get:(U,ue)=>Te[ue],apply:(U,ue,Re)=>Te.then(Ve=>{var Ye;const He=Ve&&Ve(...Re);return!(null===(Ye=_e?.spy)||void 0===Ye)&&Ye.apply&&_e.spy.apply(Ie,Re,He),He})})})}),ie=(ve,de)=>{de.forEach(be=>{Object.getOwnPropertyNames(be.prototype||be).forEach(_e=>{Object.defineProperty(ve.prototype,_e,Object.getOwnPropertyDescriptor(be.prototype||be,_e))})})};class me{constructor(de){return de}}const le=new p.OlP("angularfire2.app.options"),ye=new p.OlP("angularfire2.app.name");function j(ve,de,be){const pe="object"==typeof be&&be||{};pe.name=pe.name||"string"==typeof be&&be||"[DEFAULT]";const Pe=Q.Z.apps.filter(Te=>Te&&Te.name===pe.name)[0]||de.runOutsideAngular(()=>Q.Z.initializeApp(ve,pe));try{JSON.stringify(ve)!==JSON.stringify(Pe.options)&&H("error",`${Pe.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Pe)}const H=(ve,...de)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ve](...de)},K={provide:me,useFactory:j,deps:[le,p.R0b,[new p.FiY,ye]]};let ze=(()=>{class ve{constructor(be){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",p.q4F.full,be.toString())}static initializeApp(be,_e){return{ngModule:ve,providers:[{provide:le,useValue:be},{provide:ye,useValue:_e}]}}}return ve.\u0275fac=function(be){return new(be||ve)(p.LFG(p.Lbi))},ve.\u0275mod=p.oAB({type:ve}),ve.\u0275inj=p.cJS({providers:[K]}),ve})();function Se(ve,de,be,_e,pe){const[,Ie,Pe]=globalThis.\u0275AngularfireInstanceCache.find(Te=>Te[0]===ve)||[];if(Ie)return function st(ve,de){try{return ve.toString()===de.toString()}catch{return ve===de}}(pe,Pe)||(te("error",`${de} was already initialized on the ${be} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),te("warn",{is:pe,was:Pe})),Ie;{const Te=_e();return globalThis.\u0275AngularfireInstanceCache.push([ve,Te,pe]),Te}}const Oe=!!it.hot,te=(ve,...de)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ve](...de)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7184:(it,Ce,x)=>{x.d(Ce,{q4:()=>Ku,iC:()=>Pn,fc:()=>ko,HU:()=>ds,vb:()=>Yu,JM:()=>Xc});var p=x(4650),Q=x(259),P=x(5861),re=x(9681),ee=x(2090),ie=x(4859),me=x(1877),le=x(8766);const ye="@firebase/installations",j="0.6.4",H=1e4,K=`w:${j}`,ze="FIS_v2",Se="https://firebaseinstallations.googleapis.com/v1",st=36e5,de=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(I){return I instanceof ee.ZR&&I.code.includes("request-failed")}function _e({projectId:I}){return`${Se}/projects/${I}/installations`}function pe(I){return{token:I.token,requestStatus:2,expiresIn:Ve(I.expiresIn),creationTime:Date.now()}}function Ie(I,C){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,P.Z)(function*(I,C){const k=(yield C.json()).error;return de.create("request-failed",{requestName:I,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function Te({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ue(I){return Re.apply(this,arguments)}function Re(){return(Re=(0,P.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function Ve(I){return Number(I.replace("s","000"))}function J(){return(J=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:S}){const k=_e(I),z=Te(I),Z=C.getImmediate({optional:!0});if(Z){const qe=yield Z.getHeartbeatsHeader();qe&&z.append("x-firebase-client",qe)}const Fe={method:"POST",headers:z,body:JSON.stringify({fid:S,authVersion:ze,appId:I.appId,sdkVersion:K})},Ge=yield ue(()=>fetch(k,Fe));if(Ge.ok){const qe=yield Ge.json();return{fid:qe.fid||S,registrationStatus:2,refreshToken:qe.refreshToken,authToken:pe(qe.authToken)}}throw yield Ie("Create Installation",Ge)})).apply(this,arguments)}function se(I){return new Promise(C=>{setTimeout(C,I)})}const De=/^[cdef][\w-]{21}$/,Me="";function xe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const S=function je(I){return function he(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return De.test(S)?S:Me}catch{return Me}}function Be(I){return`${I.appName}!${I.appId}`}const Ut=new Map;function ot(I,C){const S=Be(I);mt(S,C),function gn(I,C){const S=function nn(){return!$t&&"BroadcastChannel"in self&&($t=new BroadcastChannel("[Firebase] FID Change"),$t.onmessage=I=>{mt(I.data.key,I.data.fid)}),$t}();S&&S.postMessage({key:I,fid:C}),function rn(){0===Ut.size&&$t&&($t.close(),$t=null)}()}(S,C)}function mt(I,C){const S=Ut.get(I);if(S)for(const k of S)k(C)}let $t=null;const ur="firebase-installations-database",Ti=1,Dr="firebase-installations-store";let er=null;function Si(){return er||(er=(0,le.X3)(ur,Ti,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Dr)}})),er}function qt(I,C){return cr.apply(this,arguments)}function cr(){return(cr=(0,P.Z)(function*(I,C){const S=Be(I),z=(yield Si()).transaction(Dr,"readwrite"),Z=z.objectStore(Dr),oe=yield Z.get(S);return yield Z.put(C,S),yield z.done,(!oe||oe.fid!==C.fid)&&ot(I,C.fid),C})).apply(this,arguments)}function Xe(I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,P.Z)(function*(I){const C=Be(I),k=(yield Si()).transaction(Dr,"readwrite");yield k.objectStore(Dr).delete(C),yield k.done})).apply(this,arguments)}function Or(I,C){return sn.apply(this,arguments)}function sn(){return(sn=(0,P.Z)(function*(I,C){const S=Be(I),z=(yield Si()).transaction(Dr,"readwrite"),Z=z.objectStore(Dr),oe=yield Z.get(S),Fe=C(oe);return void 0===Fe?yield Z.delete(S):yield Z.put(Fe,S),yield z.done,Fe&&(!oe||oe.fid!==Fe.fid)&&ot(I,Fe.fid),Fe})).apply(this,arguments)}function Hn(I){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,P.Z)(function*(I){let C;const S=yield Or(I.appConfig,k=>{const z=function Et(I){return $n(I||{fid:xe(),registrationStatus:0})}(k),Z=function tt(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(de.create("app-offline"))};const S={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},k=function ft(I,C){return Zi.apply(this,arguments)}(I,S);return{installationEntry:S,registrationPromise:k}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Kt(I)}:{installationEntry:C}}(I,z);return C=Z.registrationPromise,Z.installationEntry});return S.fid===Me?{installationEntry:yield C}:{installationEntry:S,registrationPromise:C}}),Mi.apply(this,arguments)}function Zi(){return Zi=(0,P.Z)(function*(I,C){try{const S=yield function He(I,C){return J.apply(this,arguments)}(I,C);return qt(I.appConfig,S)}catch(S){throw be(S)&&409===S.customData.serverCode?yield Xe(I.appConfig):yield qt(I.appConfig,{fid:C.fid,registrationStatus:0}),S}}),Zi.apply(this,arguments)}function Kt(I){return mn.apply(this,arguments)}function mn(){return(mn=(0,P.Z)(function*(I){let C=yield jn(I.appConfig);for(;1===C.registrationStatus;)yield se(100),C=yield jn(I.appConfig);if(0===C.registrationStatus){const{installationEntry:S,registrationPromise:k}=yield Hn(I);return k||S}return C})).apply(this,arguments)}function jn(I){return Or(I,C=>{if(!C)throw de.create("installation-not-found");return $n(C)})}function $n(I){return function ws(I){return 1===I.registrationStatus&&I.registrationTime+H<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Kr(){return(Kr=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:C},S){const k=function Pt(I,{fid:C}){return`${_e(I)}/${C}/authTokens:generate`}(I,S),z=function U(I,{refreshToken:C}){const S=Te(I);return S.append("Authorization",function Ye(I){return`${ze} ${I}`}(C)),S}(I,S),Z=C.getImmediate({optional:!0});if(Z){const qe=yield Z.getHeartbeatsHeader();qe&&z.append("x-firebase-client",qe)}const Fe={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:K,appId:I.appId}})},Ge=yield ue(()=>fetch(k,Fe));if(Ge.ok)return pe(yield Ge.json());throw yield Ie("Generate Auth Token",Ge)})).apply(this,arguments)}function tr(I){return Yr.apply(this,arguments)}function Yr(){return Yr=(0,P.Z)(function*(I,C=!1){let S;const k=yield Or(I.appConfig,Z=>{if(!Dt(Z))throw de.create("not-registered");const oe=Z.authToken;if(!C&&function Gn(I){return 2===I.requestStatus&&!function L(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+st}(I)}(oe))return Z;if(1===oe.requestStatus)return S=function ke(I,C){return Ee.apply(this,arguments)}(I,C),Z;{if(!navigator.onLine)throw de.create("app-offline");const Fe=function F(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}(Z);return S=function ht(I,C){return yt.apply(this,arguments)}(I,Fe),Fe}});return S?yield S:k.authToken}),Yr.apply(this,arguments)}function Ee(){return(Ee=(0,P.Z)(function*(I,C){let S=yield Ze(I.appConfig);for(;1===S.authToken.requestStatus;)yield se(100),S=yield Ze(I.appConfig);const k=S.authToken;return 0===k.requestStatus?tr(I,C):k})).apply(this,arguments)}function Ze(I){return Or(I,C=>{if(!Dt(C))throw de.create("not-registered");return function G(I){return 1===I.requestStatus&&I.requestTime+H<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function yt(){return yt=(0,P.Z)(function*(I,C){try{const S=yield function Bt(I,C){return Kr.apply(this,arguments)}(I,C),k=Object.assign(Object.assign({},C),{authToken:S});return yield qt(I.appConfig,k),S}catch(S){if(!be(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const k=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield qt(I.appConfig,k)}else yield Xe(I.appConfig);throw S}}),yt.apply(this,arguments)}function Dt(I){return void 0!==I&&2===I.registrationStatus}function X(){return(X=(0,P.Z)(function*(I){const C=I,{installationEntry:S,registrationPromise:k}=yield Hn(C);return k?k.catch(console.error):tr(C).catch(console.error),S.fid})).apply(this,arguments)}function at(){return at=(0,P.Z)(function*(I,C=!1){const S=I;return yield function Lt(I){return ut.apply(this,arguments)}(S),(yield tr(S,C)).token}),at.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(I){const{registrationPromise:C}=yield Hn(I);C&&(yield C)})).apply(this,arguments)}function na(I){return de.create("missing-app-config-values",{valueName:I})}const sl="installations",an=I=>{const C=I.getProvider("app").getImmediate(),S=function oo(I){if(!I||!I.options)throw na("App Configuration");if(!I.name)throw na("App Name");const C=["projectId","apiKey","appId"];for(const S of C)if(!I.options[S])throw na(S);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:S,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Tu=I=>{const C=I.getProvider("app").getImmediate(),S=(0,re._getProvider)(C,sl).getImmediate();return{getId:()=>function ce(I){return X.apply(this,arguments)}(S),getToken:z=>function Qe(I){return at.apply(this,arguments)}(S,z)}};(function ol(){(0,re._registerComponent)(new ie.wA(sl,an,"PUBLIC")),(0,re._registerComponent)(new ie.wA("installations-internal",Tu,"PRIVATE"))})(),(0,re.registerVersion)(ye,j),(0,re.registerVersion)(ye,j,"esm2017");const ao="@firebase/remote-config",Sn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yi{constructor(C,S,k,z){this.client=C,this.storage=S,this.storageCache=k,this.logger=z}isCachedDataFresh(C,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-S,z=k<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${z}.`),z}fetch(C){var S=this;return(0,P.Z)(function*(){const[k,z]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(z&&S.isCachedDataFresh(C.cacheMaxAgeMillis,k))return z;C.eTag=z&&z.eTag;const Z=yield S.client.fetch(C),oe=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&oe.push(S.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(oe),Z})()}}function Lr(I=navigator){return I.languages&&I.languages[0]||I.language}class Ni{constructor(C,S,k,z,Z,oe){this.firebaseInstallations=C,this.sdkVersion=S,this.namespace=k,this.projectId=z,this.apiKey=Z,this.appId=oe}fetch(C){var S=this;return(0,P.Z)(function*(){const[k,z]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ge={sdk_version:S.sdkVersion,app_instance_id:k,app_instance_id_token:z,app_id:S.appId,language_code:Lr()},qe={method:"POST",headers:Fe,body:JSON.stringify(Ge)},vt=fetch(oe,qe),et=new Promise((_r,ri)=>{C.signal.addEventListener(()=>{const Ll=new Error("The operation was aborted.");Ll.name="AbortError",ri(Ll)})});let tn;try{yield Promise.race([vt,et]),tn=yield vt}catch(_r){let ri="fetch-client-network";throw"AbortError"===_r?.name&&(ri="fetch-timeout"),Sn.create(ri,{originalErrorMessage:_r?.message})}let N=tn.status;const Vi=tn.headers.get("ETag")||void 0;let yi,hs;if(200===tn.status){let _r;try{_r=yield tn.json()}catch(ri){throw Sn.create("fetch-client-parse",{originalErrorMessage:ri?.message})}yi=_r.entries,hs=_r.state}if("INSTANCE_STATE_UNSPECIFIED"===hs?N=500:"NO_CHANGE"===hs?N=304:("NO_TEMPLATE"===hs||"EMPTY_CONFIG"===hs)&&(yi={}),304!==N&&200!==N)throw Sn.create("fetch-status",{httpStatus:N});return{status:N,eTag:Vi,config:yi}})()}}class Qr{constructor(C,S){this.client=C,this.storage=S}fetch(C){var S=this;return(0,P.Z)(function*(){const k=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(C,k)})()}attemptFetch(C,{throttleEndTimeMillis:S,backoffCount:k}){var z=this;return(0,P.Z)(function*(){yield function ci(I,C){return new Promise((S,k)=>{const z=Math.max(C-Date.now(),0),Z=setTimeout(S,z);I.addEventListener(()=>{clearTimeout(Z),k(Sn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,S);try{const Z=yield z.client.fetch(C);return yield z.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function Gt(I){if(!(I instanceof ee.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Z))throw Z;const oe={throttleEndTimeMillis:Date.now()+(0,ee.$s)(k),backoffCount:k+1};return yield z.storage.setThrottleMetadata(oe),z.attemptFetch(C,oe)}})()}}class Ss{constructor(C,S,k,z,Z){this.app=C,this._client=S,this._storageCache=k,this._storage=z,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qi(I,C){const S=I.target.error||void 0;return Sn.create(C,{originalErrorMessage:S&&S?.message})}const rr="app_namespace_store";class Vr{constructor(C,S,k,z=function dr(){return new Promise((I,C)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=k=>{C(Qi(k,"storage-open"))},S.onsuccess=k=>{I(k.target.result)},S.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(rr,{keyPath:"compositeKey"})}}catch(S){C(Sn.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=C,this.appName=S,this.namespace=k,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var S=this;return(0,P.Z)(function*(){const k=yield S.openDbPromise;return new Promise((z,Z)=>{const Fe=k.transaction([rr],"readonly").objectStore(rr),Ge=S.createCompositeKey(C);try{const qe=Fe.get(Ge);qe.onerror=vt=>{Z(Qi(vt,"storage-get"))},qe.onsuccess=vt=>{const et=vt.target.result;z(et?et.value:void 0)}}catch(qe){Z(Sn.create("storage-get",{originalErrorMessage:qe?.message}))}})})()}set(C,S){var k=this;return(0,P.Z)(function*(){const z=yield k.openDbPromise;return new Promise((Z,oe)=>{const Ge=z.transaction([rr],"readwrite").objectStore(rr),qe=k.createCompositeKey(C);try{const vt=Ge.put({compositeKey:qe,value:S});vt.onerror=et=>{oe(Qi(et,"storage-set"))},vt.onsuccess=()=>{Z()}}catch(vt){oe(Sn.create("storage-set",{originalErrorMessage:vt?.message}))}})})()}delete(C){var S=this;return(0,P.Z)(function*(){const k=yield S.openDbPromise;return new Promise((z,Z)=>{const Fe=k.transaction([rr],"readwrite").objectStore(rr),Ge=S.createCompositeKey(C);try{const qe=Fe.delete(Ge);qe.onerror=vt=>{Z(Qi(vt,"storage-delete"))},qe.onsuccess=()=>{z()}}catch(qe){Z(Sn.create("storage-delete",{originalErrorMessage:qe?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class uo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const S=C.storage.getLastFetchStatus(),k=C.storage.getLastSuccessfulFetchTimestampMillis(),z=C.storage.getActiveConfig(),Z=yield S;Z&&(C.lastFetchStatus=Z);const oe=yield k;oe&&(C.lastSuccessfulFetchTimestampMillis=oe);const Fe=yield z;Fe&&(C.activeConfig=Fe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function co(){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,P.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function Ur(){(0,re._registerComponent)(new ie.wA("remote-config",function I(C,{instanceIdentifier:S}){const k=C.getProvider("app").getImmediate(),z=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sn.create("registration-window");if(!(0,ee.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:Z,apiKey:oe,appId:Fe}=k.options;if(!Z)throw Sn.create("registration-project-id");if(!oe)throw Sn.create("registration-api-key");if(!Fe)throw Sn.create("registration-app-id");const Ge=new Vr(Fe,k.name,S=S||"firebase"),qe=new uo(Ge),vt=new me.Yd(ao);vt.logLevel=me.in.ERROR;const et=new Ni(z,re.SDK_VERSION,S,Z,oe,Fe),tn=new Qr(et,Ge),N=new Yi(tn,Ge,qe,vt),Vi=new Ss(k,N,qe,Ge,vt);return function ln(I){const C=(0,ee.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Vi),Vi},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(ao,"0.4.4"),(0,re.registerVersion)(ao,"0.4.4","esm2017")}();const cl="/firebase-messaging-sw.js",di="/firebase-cloud-messaging-push-scope",As="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ho="https://fcmregistrations.googleapis.com/v1",dl="google.c.a.c_id",Hc="google.c.a.c_l",jc="google.c.a.ts",hh="google.c.a.e";var Ji=(()=>{return(I=Ji||(Ji={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ji;var I})();function Jr(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fh(I){const S=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(S),z=new Uint8Array(k.length);for(let Z=0;Z<k.length;++Z)z[Z]=k.charCodeAt(Z);return z}const hl="fcm_token_details_db",fl=5,ir="fcm_token_object_Store";function Mu(){return Mu=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(hl))return null;let C=null;return(yield(0,le.X3)(hl,fl,{upgrade:(k=(0,P.Z)(function*(z,Z,oe,Fe){var Ge;if(Z<2||!z.objectStoreNames.contains(ir))return;const qe=Fe.objectStore(ir),vt=yield qe.index("fcmSenderId").get(I);if(yield qe.clear(),vt)if(2===Z){const et=vt;if(!et.auth||!et.p256dh||!et.endpoint)return;C={token:et.fcmToken,createTime:null!==(Ge=et.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:et.auth,p256dh:et.p256dh,endpoint:et.endpoint,swScope:et.swScope,vapidKey:"string"==typeof et.vapidKey?et.vapidKey:Jr(et.vapidKey)}}}else if(3===Z){const et=vt;C={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:Jr(et.auth),p256dh:Jr(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:Jr(et.vapidKey)}}}else if(4===Z){const et=vt;C={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:Jr(et.auth),p256dh:Jr(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:Jr(et.vapidKey)}}}}),function(Z,oe,Fe,Ge){return k.apply(this,arguments)})})).close(),yield(0,le.Lj)(hl),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),function $c(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var k}),Mu.apply(this,arguments)}const gl="firebase-messaging-database",Xi=1,es="firebase-messaging-store";let ra=null;function fo(){return ra||(ra=(0,le.X3)(gl,Xi,{upgrade:(I,C)=>{0===C&&I.createObjectStore(es)}})),ra}function ml(I){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,P.Z)(function*(I){const C=Ps(I),k=yield(yield fo()).transaction(es).objectStore(es).get(C);if(k)return k;{const z=yield function pl(I){return Mu.apply(this,arguments)}(I.appConfig.senderId);if(z)return yield ts(I,z),z}}),Rs.apply(this,arguments)}function ts(I,C){return po.apply(this,arguments)}function po(){return(po=(0,P.Z)(function*(I,C){const S=Ps(I),z=(yield fo()).transaction(es,"readwrite");return yield z.objectStore(es).put(C,S),yield z.done,C})).apply(this,arguments)}function Ns(){return(Ns=(0,P.Z)(function*(I){const C=Ps(I),k=(yield fo()).transaction(es,"readwrite");yield k.objectStore(es).delete(C),yield k.done})).apply(this,arguments)}function Ps({appConfig:I}){return I.appId}const fn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ia(I,C){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(I,C){const S=yield rs(I),k=go(C),z={method:"POST",headers:S,body:JSON.stringify(k)};let Z;try{Z=yield(yield fetch(xs(I.appConfig),z)).json()}catch(oe){throw fn.create("token-subscribe-failed",{errorInfo:oe?.toString()})}if(Z.error)throw fn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw fn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function ns(){return(ns=(0,P.Z)(function*(I,C){const S=yield rs(I),k=go(C.subscriptionOptions),z={method:"PATCH",headers:S,body:JSON.stringify(k)};let Z;try{Z=yield(yield fetch(`${xs(I.appConfig)}/${C.token}`,z)).json()}catch(oe){throw fn.create("token-update-failed",{errorInfo:oe?.toString()})}if(Z.error)throw fn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw fn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function In(I,C){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.Z)(function*(I,C){const k={method:"DELETE",headers:yield rs(I)};try{const Z=yield(yield fetch(`${xs(I.appConfig)}/${C}`,k)).json();if(Z.error)throw fn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(z){throw fn.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function xs({projectId:I}){return`${ho}/projects/${I}/registrations`}function rs(I){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.Z)(function*({appConfig:I,installations:C}){const S=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function go({p256dh:I,auth:C,endpoint:S,vapidKey:k}){const z={web:{endpoint:S,auth:C,p256dh:I}};return k!==As&&(z.web.applicationPubKey=k),z}const ks=6048e5;function hi(){return hi=(0,P.Z)(function*(I){const C=yield function yl(I,C){return vl.apply(this,arguments)}(I.swRegistration,I.vapidKey),S={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:Jr(C.getKey("auth")),p256dh:Jr(C.getKey("p256dh"))},k=yield ml(I.firebaseDependencies);if(k){if(function la(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}(k.subscriptionOptions,S))return Date.now()>=k.createTime+ks?function _t(I,C){return oa.apply(this,arguments)}(I,{token:k.token,createTime:Date.now(),subscriptionOptions:S}):k.token;try{yield In(I.firebaseDependencies,k.token)}catch(z){console.warn(z)}return Nu(I.firebaseDependencies,S)}return Nu(I.firebaseDependencies,S)}),hi.apply(this,arguments)}function _o(){return _o=(0,P.Z)(function*(I){const C=yield ml(I.firebaseDependencies);C&&(yield In(I.firebaseDependencies,C.token),yield function Ru(I){return Ns.apply(this,arguments)}(I.firebaseDependencies));const S=yield I.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()}),_o.apply(this,arguments)}function oa(){return oa=(0,P.Z)(function*(I,C){try{const S=yield function Os(I,C){return ns.apply(this,arguments)}(I.firebaseDependencies,C),k=Object.assign(Object.assign({},C),{token:S,createTime:Date.now()});return yield ts(I.firebaseDependencies,k),S}catch(S){throw yield function mo(I){return _o.apply(this,arguments)}(I),S}}),oa.apply(this,arguments)}function Nu(I,C){return aa.apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(I,C){const k={token:yield ia(I,C),createTime:Date.now(),subscriptionOptions:C};return yield ts(I,k),k.token})).apply(this,arguments)}function vl(){return(vl=(0,P.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fh(C)})})).apply(this,arguments)}function Gc(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function El(I,C){if(!C.notification)return;I.notification={};const S=C.notification.title;S&&(I.notification.title=S);const k=C.notification.body;k&&(I.notification.body=k);const z=C.notification.image;z&&(I.notification.image=z);const Z=C.notification.icon;Z&&(I.notification.icon=Z)}(C,I),function ae(I,C){C.data&&(I.data=C.data)}(C,I),function xt(I,C){var S,k,z,Z,oe;if(!(C.fcmOptions||null!==(S=C.notification)&&void 0!==S&&S.click_action))return;I.fcmOptions={};const Fe=null!==(z=null===(k=C.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==z?z:null===(Z=C.notification)||void 0===Z?void 0:Z.click_action;Fe&&(I.fcmOptions.link=Fe);const Ge=null===(oe=C.fcmOptions)||void 0===oe?void 0:oe.analytics_label;Ge&&(I.fcmOptions.analyticsLabel=Ge)}(C,I),C}function Pu(I,C){const S=[];for(let k=0;k<I.length;k++)S.push(I.charAt(k)),k<C.length&&S.push(C.charAt(k));return S.join("")}function yo(I){return fn.create("missing-app-config-values",{valueName:I})}Pu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Pu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ua{constructor(C,S,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function kn(I){if(!I||!I.options)throw yo("App Configuration Object");if(!I.name)throw yo("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:S}=I;for(const k of C)if(!S[k])throw yo(k);return{appName:I.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:z,installations:S,analyticsProvider:k}}_delete(){return Promise.resolve()}}function pr(I){return ca.apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(cl,{scope:di}),I.swRegistration.update().catch(()=>{})}catch(C){throw fn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Ou(){return(Ou=(0,P.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield pr(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function ha(){return(ha=(0,P.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=As)})).apply(this,arguments)}function gr(){return gr=(0,P.Z)(function*(I,C){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield function Dl(I,C){return ha.apply(this,arguments)}(I,C?.vapidKey),yield function da(I,C){return Ou.apply(this,arguments)}(I,C?.serviceWorkerRegistration),function sa(I){return hi.apply(this,arguments)}(I)}),gr.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(I,C,S){const k=function Xr(I){switch(I){case Ji.NOTIFICATION_CLICKED:return"notification_open";case Ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:S[dl],message_name:S[Hc],message_time:S[jc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vo(){return vo=(0,P.Z)(function*(I,C){const S=C.data;if(!S.isFirebaseMessaging)return;I.onMessageHandler&&S.messageType===Ji.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Gc(S)):I.onMessageHandler.next(Gc(S)));const k=S.data;(function Il(I){return"object"==typeof I&&!!I&&dl in I})(k)&&"1"===k[hh]&&(yield function Pi(I,C,S){return is.apply(this,arguments)}(I,S.messageType,k))}),vo.apply(this,arguments)}const ku="@firebase/messaging",wl=I=>{const C=new ua(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function xu(I,C){return vo.apply(this,arguments)}(C,S)),C},fi=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:k=>function An(I,C){return gr.apply(this,arguments)}(C,k)}};function bl(){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,P.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fu(){(0,re._registerComponent)(new ie.wA("messaging",wl,"PUBLIC")),(0,re._registerComponent)(new ie.wA("messaging-internal",fi,"PRIVATE")),(0,re.registerVersion)(ku,"0.12.4"),(0,re.registerVersion)(ku,"0.12.4","esm2017")}();const Vu="analytics",sr="firebase_id",Fs="origin",Qt=6e4,Ls="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sl="https://www.googletagmanager.com/gtag/js",Fn=new me.Yd("@firebase/analytics");function Zc(I){return Promise.all(I.map(C=>C.catch(S=>S)))}function ss(){return(ss=(0,P.Z)(function*(I,C,S,k,z,Z){const oe=k[z];try{if(oe)yield C[oe];else{const Ge=(yield Zc(S)).find(qe=>qe.measurementId===z);Ge&&(yield C[Ge.appId])}}catch(Fe){Fn.error(Fe)}I("config",z,Z)})).apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(I,C,S,k,z){try{let Z=[];if(z&&z.send_to){let oe=z.send_to;Array.isArray(oe)||(oe=[oe]);const Fe=yield Zc(S);for(const Ge of oe){const qe=Fe.find(et=>et.measurementId===Ge),vt=qe&&C[qe.appId];if(!vt){Z=[];break}Z.push(vt)}}0===Z.length&&(Z=Object.values(C)),yield Promise.all(Z),I("event",k,z||{})}catch(Z){Fn.error(Z)}})).apply(this,arguments)}const br=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pa=30,Bu=new class os{constructor(C={},S=1e3){this.throttleMetadata=C,this.intervalMillis=S}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,S){this.throttleMetadata[C]=S}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function qc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Co(){return(Co=(0,P.Z)(function*(I){var C;const{appId:S,apiKey:k}=I,z={method:"GET",headers:qc(k)},Z=Ls.replace("{app-id}",S),oe=yield fetch(Z,z);if(200!==oe.status&&304!==oe.status){let Fe="";try{const Ge=yield oe.json();null!==(C=Ge.error)&&void 0!==C&&C.message&&(Fe=Ge.error.message)}catch{}throw br.create("config-fetch-failed",{httpStatus:oe.status,responseMessage:Fe})}return oe.json()})).apply(this,arguments)}function wo(){return(wo=(0,P.Z)(function*(I,C=Bu,S){const{appId:k,apiKey:z,measurementId:Z}=I.options;if(!k)throw br.create("no-app-id");if(!z){if(Z)return{measurementId:Z,appId:k};throw br.create("no-api-key")}const oe=C.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new bo;return setTimeout((0,P.Z)(function*(){Fe.abort()}),void 0!==S?S:Qt),pi({appId:k,apiKey:z,measurementId:Z},oe,Fe,C)})).apply(this,arguments)}function pi(I,C,S){return gi.apply(this,arguments)}function gi(){return gi=(0,P.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:S},k,z=Bu){var Z;const{appId:oe,measurementId:Fe}=I;try{yield function Us(I,C){return new Promise((S,k)=>{const z=Math.max(C-Date.now(),0),Z=setTimeout(S,z);I.addEventListener(()=>{clearTimeout(Z),k(br.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(k,C)}catch(Ge){if(Fe)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:oe,measurementId:Fe};throw Ge}try{const Ge=yield function as(I){return Co.apply(this,arguments)}(I);return z.deleteThrottleMetadata(oe),Ge}catch(Ge){const qe=Ge;if(!function Ml(I){if(!(I instanceof ee.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(qe)){if(z.deleteThrottleMetadata(oe),Fe)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${qe?.message}]`),{appId:oe,measurementId:Fe};throw Ge}const vt=503===Number(null===(Z=qe?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,ee.$s)(S,z.intervalMillis,pa):(0,ee.$s)(S,z.intervalMillis),et={throttleEndTimeMillis:Date.now()+vt,backoffCount:S+1};return z.setThrottleMetadata(oe,et),Fn.debug(`Calling attemptFetch again in ${vt} millis`),pi(I,et,k,z)}}),gi.apply(this,arguments)}class bo{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let ga,Fi;function ki(){return(ki=(0,P.Z)(function*(I,C,S,k,z){if(z&&z.global)I("event",S,k);else{const Z=yield C;I("event",S,Object.assign(Object.assign({},k),{send_to:Z}))}})).apply(this,arguments)}function Rl(){return(Rl=(0,P.Z)(function*(){if(!(0,ee.hl)())return Fn.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(I){return Fn.warn(br.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function No(){return No=(0,P.Z)(function*(I,C,S,k,z,Z,oe){var Fe;const Ge=function un(I){return wo.apply(this,arguments)}(I);Ge.then(N=>{S[N.measurementId]=N.appId,I.options.measurementId&&N.measurementId!==I.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Fn.error(N)),C.push(Ge);const qe=function Ro(){return Rl.apply(this,arguments)}().then(N=>{if(N)return k.getId()}),[vt,et]=yield Promise.all([Ge,qe]);(function Vs(I){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(Sl)&&S.src.includes(I))return S;return null})(Z)||function mh(I,C){const S=document.createElement("script");S.src=`${Sl}?l=${I}&id=${C}`,S.async=!0,document.head.appendChild(S)}(Z,vt.measurementId),Fi&&(z("consent","default",Fi),function Mo(I){Fi=I}(void 0)),z("js",new Date);const tn=null!==(Fe=oe?.config)&&void 0!==Fe?Fe:{};return tn[Fs]="firebase",tn.update=!0,null!=et&&(tn[sr]=et),z("config",vt.measurementId,tn),ga&&(z("set",ga),function ya(I){ga=I}(void 0)),vt.measurementId}),No.apply(this,arguments)}class Hu{constructor(C){this.app=C}_delete(){return delete ei[this.app.options.appId],Promise.resolve()}}let ei={},va=[];const us={};let Ea,mi,ti="dataLayer",ju="gtag",Br=!1;function Ia(I,C,S){!function $u(){const I=[];if((0,ee.ru)()&&I.push("This is a browser extension environment."),(0,ee.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((k,z)=>`(${z+1}) ${k}`).join(" "),S=br.create("invalid-analytics-context",{errorInfo:C});Fn.warn(S.message)}}();const k=I.options.appId;if(!k)throw br.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw br.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ei[k])throw br.create("already-exists",{id:k});if(!Br){!function _h(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(ti);const{wrappedGtag:Z,gtagCore:oe}=function Do(I,C,S,k,z){let Z=function(...oe){window[k].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Z=window[z]),window[z]=function Io(I,C,S,k){function Z(){return Z=(0,P.Z)(function*(oe,Fe,Ge){try{"event"===oe?yield function Al(I,C,S,k,z){return Oi.apply(this,arguments)}(I,C,S,Fe,Ge):"config"===oe?yield function Eo(I,C,S,k,z,Z){return ss.apply(this,arguments)}(I,C,S,k,Fe,Ge):"consent"===oe?I("consent","update",Ge):I("set",Fe)}catch(qe){Fn.error(qe)}}),Z.apply(this,arguments)}return function z(oe,Fe,Ge){return Z.apply(this,arguments)}}(Z,I,C,S),{gtagCore:Z,wrappedGtag:window[z]}}(ei,va,us,ti,ju);mi=Z,Ea=oe,Br=!0}return ei[k]=function ls(I,C,S,k,z,Z,oe){return No.apply(this,arguments)}(I,va,us,C,Ea,ti,S),new Hu(I)}function Da(){return _i.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const Ht="@firebase/analytics";!function _p(){(0,re._registerComponent)(new ie.wA(Vu,(C,{options:S})=>Ia(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,re._registerComponent)(new ie.wA("analytics-internal",function I(C){try{const S=C.getProvider(Vu).getImmediate();return{logEvent:(k,z,Z)=>function vh(I,C,S,k){I=(0,ee.m9)(I),function ma(I,C,S,k,z){return ki.apply(this,arguments)}(mi,ei[I.app.options.appId],C,S,k).catch(z=>Fn.error(z))}(S,k,z,Z)}}catch(S){throw br.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,re.registerVersion)(Ht,"0.9.4"),(0,re.registerVersion)(Ht,"0.9.4","esm2017")}();var Pl=x(4408),qu=x(7565);const ba=new class Ol extends qu.v{}(class cs extends Pl.o{constructor(C,S){super(C,S),this.scheduler=C,this.work=S}schedule(C,S=0){return S>0?super.schedule(C,S):(this.delay=S,this.state=C,this.scheduler.flush(this),this)}execute(C,S){return S>0||this.closed?super.execute(C,S):this._execute(C,S)}requestAsyncId(C,S,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(C,S,k):(C.flush(this),0)}});var Yc=x(4986),xl=x(576),Jt=x(4482),xo=x(5403),Ta=x(4671),Tr=x(5363),Li=x(9468);const Ku=new p.GfV("7.5.0"),$s="__angularfire_symbol__analyticsIsSupportedValue",Gs="__angularfire_symbol__analyticsIsSupported",Sa="__angularfire_symbol__remoteConfigIsSupportedValue",Qc="__angularfire_symbol__remoteConfigIsSupported",Aa="__angularfire_symbol__messagingIsSupportedValue",Jc="__angularfire_symbol__messagingIsSupported";function Xc(I,C,S){if(C){if(1===C.length)return C[0];const Z=C.filter(oe=>oe.app===S);if(1===Z.length)return Z[0]}return S.container.getProvider(I).getImmediate({optional:!0})}globalThis[Gs]||(globalThis[Gs]=Da().then(I=>globalThis[$s]=I).catch(()=>globalThis[$s]=!1)),globalThis[Jc]||(globalThis[Jc]=bl().then(I=>globalThis[Aa]=I).catch(()=>globalThis[Aa]=!1)),globalThis[Qc]||(globalThis[Qc]=co().then(I=>globalThis[Sa]=I).catch(()=>globalThis[Sa]=!1));const Yu=(I,C)=>{const S=C?[C]:(0,Q.C6)(),k=[];return S.forEach(z=>{z.container.getProvider(I).instances.forEach(oe=>{k.includes(oe)||k.push(oe)})}),k};function Sr(){}class Ws{constructor(C,S=ba){this.zone=C,this.delegate=S}now(){return this.delegate.now()}schedule(C,S,k){const z=this.zone;return this.delegate.schedule(function(oe){z.runGuarded(()=>{C.apply(this,[oe])})},S,k)}}class ni{constructor(C){this.zone=C,this.task=null}call(C,S){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sr,{},Sr,Sr)),S.pipe(function Eh(I,C,S){const k=(0,xl.m)(I)||C||S?{next:I,error:C,complete:S}:I;return k?(0,Jt.e)((z,Z)=>{var oe;null===(oe=k.subscribe)||void 0===oe||oe.call(k);let Fe=!0;z.subscribe((0,xo.x)(Z,Ge=>{var qe;null===(qe=k.next)||void 0===qe||qe.call(k,Ge),Z.next(Ge)},()=>{var Ge;Fe=!1,null===(Ge=k.complete)||void 0===Ge||Ge.call(k),Z.complete()},Ge=>{var qe;Fe=!1,null===(qe=k.error)||void 0===qe||qe.call(k,Ge),Z.error(Ge)},()=>{var Ge,qe;Fe&&(null===(Ge=k.unsubscribe)||void 0===Ge||Ge.call(k)),null===(qe=k.finalize)||void 0===qe||qe.call(k)}))}):Ta.y}({next:k,complete:k,error:k})).subscribe(C).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ds=(()=>{class I{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new Ws(Zone.current)),this.insideAngular=S.run(()=>new Ws(Zone.current,Yc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(S){return new(S||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Hr(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function ko(I){return I.pipe((0,Tr.Q)(Hr().outsideAngular))}function Pn(I){return Hr(),function or(I){return function(S){return(S=S.lift(new ni(I.ngZone))).pipe((0,Li.R)(I.outsideAngular),(0,Tr.Q)(I.insideAngular))}}(Hr())(I)}},2090:(it,Ce,x)=>{x.d(Ce,{$s:()=>ht,BH:()=>Ie,DV:()=>er,Dv:()=>mn,GJ:()=>Ti,L:()=>ye,LL:()=>ot,Pz:()=>pe,Sg:()=>Pe,UG:()=>ue,UI:()=>qt,US:()=>ie,Wj:()=>ws,Wl:()=>gn,Yr:()=>he,ZB:()=>K,ZR:()=>Ut,aH:()=>_e,b$:()=>Ye,cI:()=>mt,dS:()=>Kr,eu:()=>xe,g5:()=>P,gK:()=>jn,gQ:()=>Mi,h$:()=>le,hl:()=>Me,hu:()=>Q,jU:()=>Re,lb:()=>Bt,m9:()=>Gn,ne:()=>Et,p$:()=>H,pd:()=>Hn,r3:()=>Dr,ru:()=>Ve,tV:()=>j,uI:()=>U,ug:()=>Pt,vZ:()=>cr,w1:()=>J,w9:()=>ur,xO:()=>Or,xb:()=>Si,z$:()=>Te,zI:()=>je,zd:()=>sn});const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Q=function(L,F){if(!L)throw P(F)},P=function(L){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+L)},re=function(L){const F=[];let G=0;for(let ce=0;ce<L.length;ce++){let X=L.charCodeAt(ce);X<128?F[G++]=X:X<2048?(F[G++]=X>>6|192,F[G++]=63&X|128):55296==(64512&X)&&ce+1<L.length&&56320==(64512&L.charCodeAt(ce+1))?(X=65536+((1023&X)<<10)+(1023&L.charCodeAt(++ce)),F[G++]=X>>18|240,F[G++]=X>>12&63|128,F[G++]=X>>6&63|128,F[G++]=63&X|128):(F[G++]=X>>12|224,F[G++]=X>>6&63|128,F[G++]=63&X|128)}return F},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,F){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let X=0;X<L.length;X+=3){const Qe=L[X],at=X+1<L.length,Lt=at?L[X+1]:0,ut=X+2<L.length,on=ut?L[X+2]:0;let xr=(15&Lt)<<2|on>>6,bn=63&on;ut||(bn=64,at||(xr=64)),ce.push(G[Qe>>2],G[(3&Qe)<<4|Lt>>4],G[xr],G[bn])}return ce.join("")},encodeString(L,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(L):this.encodeByteArray(re(L),F)},decodeString(L,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(L):function(L){const F=[];let G=0,ce=0;for(;G<L.length;){const X=L[G++];if(X<128)F[ce++]=String.fromCharCode(X);else if(X>191&&X<224){const Qe=L[G++];F[ce++]=String.fromCharCode((31&X)<<6|63&Qe)}else if(X>239&&X<365){const ut=((7&X)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;F[ce++]=String.fromCharCode(55296+(ut>>10)),F[ce++]=String.fromCharCode(56320+(1023&ut))}else{const Qe=L[G++],at=L[G++];F[ce++]=String.fromCharCode((15&X)<<12|(63&Qe)<<6|63&at)}}return F.join("")}(this.decodeStringToByteArray(L,F))},decodeStringToByteArray(L,F){this.init_();const G=F?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let X=0;X<L.length;){const Qe=G[L.charAt(X++)],Lt=X<L.length?G[L.charAt(X)]:0;++X;const on=X<L.length?G[L.charAt(X)]:64;++X;const Mt=X<L.length?G[L.charAt(X)]:64;if(++X,null==Qe||null==Lt||null==on||null==Mt)throw new me;ce.push(Qe<<2|Lt>>4),64!==on&&(ce.push(Lt<<4&240|on>>2),64!==Mt&&ce.push(on<<6&192|Mt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function(L){const F=re(L);return ie.encodeByteArray(F,!0)},ye=function(L){return le(L).replace(/\./g,"")},j=function(L){try{return ie.decodeString(L,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function H(L){return K(void 0,L)}function K(L,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return F}for(const G in F)!F.hasOwnProperty(G)||!ze(G)||(L[G]=K(L[G],F[G]));return L}function ze(L){return"__proto__"!==L}const ve=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const L=process.env.__FIREBASE_DEFAULTS__;return L?JSON.parse(L):void 0})()||(()=>{if(typeof document>"u")return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=L&&j(L[1]);return F&&JSON.parse(F)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},_e=()=>{var L;return null===(L=ve())||void 0===L?void 0:L.config},pe=L=>{var F;return null===(F=ve())||void 0===F?void 0:F[`_${L}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,G)=>{this.resolve=F,this.reject=G})}wrapCallback(F){return(G,ce)=>{G?this.reject(G):this.resolve(ce),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(G):F(G,ce))}}}function Pe(L,F){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=F||"demo-project",X=L.iat||0,Qe=L.sub||L.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const at=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:X,exp:X+3600,auth_time:X,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(at)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function ue(){var L;const F=null===(L=ve())||void 0===L?void 0:L.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Re(){return"object"==typeof self&&self.self===self}function Ve(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function J(){const L=Te();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function he(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function Me(){try{return"object"==typeof indexedDB}catch{return!1}}function xe(){return new Promise((L,F)=>{try{let G=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(ce);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(ce),L(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var Qe;F((null===(Qe=X.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(G){F(G)}})}function je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ut extends Error{constructor(F,G,ce){super(G),this.code=F,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}}class ot{constructor(F,G,ce){this.service=F,this.serviceName=G,this.errors=ce}create(F,...G){const ce=G[0]||{},X=`${this.service}/${F}`,Qe=this.errors[F],at=Qe?function Ft(L,F){return L.replace(We,(G,ce)=>{const X=F[ce];return null!=X?String(X):`<${ce}?>`})}(Qe,ce):"Error";return new Ut(X,`${this.serviceName}: ${at} (${X}).`,ce)}}const We=/\{\$([^}]+)}/g;function mt(L){return JSON.parse(L)}function gn(L){return JSON.stringify(L)}const $t=function(L){let F={},G={},ce={},X="";try{const Qe=L.split(".");F=mt(j(Qe[0])||""),G=mt(j(Qe[1])||""),X=Qe[2],ce=G.d||{},delete G.d}catch{}return{header:F,claims:G,data:ce,signature:X}},ur=function(L){const G=$t(L).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},Ti=function(L){const F=$t(L).claims;return"object"==typeof F&&!0===F.admin};function Dr(L,F){return Object.prototype.hasOwnProperty.call(L,F)}function er(L,F){if(Object.prototype.hasOwnProperty.call(L,F))return L[F]}function Si(L){for(const F in L)if(Object.prototype.hasOwnProperty.call(L,F))return!1;return!0}function qt(L,F,G){const ce={};for(const X in L)Object.prototype.hasOwnProperty.call(L,X)&&(ce[X]=F.call(G,L[X],X,L));return ce}function cr(L,F){if(L===F)return!0;const G=Object.keys(L),ce=Object.keys(F);for(const X of G){if(!ce.includes(X))return!1;const Qe=L[X],at=F[X];if(Xe(Qe)&&Xe(at)){if(!cr(Qe,at))return!1}else if(Qe!==at)return!1}for(const X of ce)if(!G.includes(X))return!1;return!0}function Xe(L){return null!==L&&"object"==typeof L}function Or(L){const F=[];for(const[G,ce]of Object.entries(L))Array.isArray(ce)?ce.forEach(X=>{F.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):F.push(encodeURIComponent(G)+"="+encodeURIComponent(ce));return F.length?"&"+F.join("&"):""}function sn(L){const F={};return L.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[X,Qe]=ce.split("=");F[decodeURIComponent(X)]=decodeURIComponent(Qe)}}),F}function Hn(L){const F=L.indexOf("?");if(!F)return"";const G=L.indexOf("#",F);return L.substring(F,G>0?G:void 0)}class Mi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let F=1;F<this.blockSize;++F)this.pad_[F]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(F,G){G||(G=0);const ce=this.W_;if("string"==typeof F)for(let Mt=0;Mt<16;Mt++)ce[Mt]=F.charCodeAt(G)<<24|F.charCodeAt(G+1)<<16|F.charCodeAt(G+2)<<8|F.charCodeAt(G+3),G+=4;else for(let Mt=0;Mt<16;Mt++)ce[Mt]=F[G]<<24|F[G+1]<<16|F[G+2]<<8|F[G+3],G+=4;for(let Mt=16;Mt<80;Mt++){const xr=ce[Mt-3]^ce[Mt-8]^ce[Mt-14]^ce[Mt-16];ce[Mt]=4294967295&(xr<<1|xr>>>31)}let on,vn,X=this.chain_[0],Qe=this.chain_[1],at=this.chain_[2],Lt=this.chain_[3],ut=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(on=Lt^Qe&(at^Lt),vn=1518500249):(on=Qe^at^Lt,vn=1859775393):Mt<60?(on=Qe&at|Lt&(Qe|at),vn=2400959708):(on=Qe^at^Lt,vn=3395469782);const xr=(X<<5|X>>>27)+on+ut+vn+ce[Mt]&4294967295;ut=Lt,Lt=at,at=4294967295&(Qe<<30|Qe>>>2),Qe=X,X=xr}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+Qe&4294967295,this.chain_[2]=this.chain_[2]+at&4294967295,this.chain_[3]=this.chain_[3]+Lt&4294967295,this.chain_[4]=this.chain_[4]+ut&4294967295}update(F,G){if(null==F)return;void 0===G&&(G=F.length);const ce=G-this.blockSize;let X=0;const Qe=this.buf_;let at=this.inbuf_;for(;X<G;){if(0===at)for(;X<=ce;)this.compress_(F,X),X+=this.blockSize;if("string"==typeof F){for(;X<G;)if(Qe[at]=F.charCodeAt(X),++at,++X,at===this.blockSize){this.compress_(Qe),at=0;break}}else for(;X<G;)if(Qe[at]=F[X],++at,++X,at===this.blockSize){this.compress_(Qe),at=0;break}}this.inbuf_=at,this.total_+=G}digest(){const F=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&G,G/=256;this.compress_(this.buf_);let ce=0;for(let X=0;X<5;X++)for(let Qe=24;Qe>=0;Qe-=8)F[ce]=this.chain_[X]>>Qe&255,++ce;return F}}function Et(L,F){const G=new tt(L,F);return G.subscribe.bind(G)}class tt{constructor(F,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{F(this)}).catch(ce=>{this.error(ce)})}next(F){this.forEachObserver(G=>{G.next(F)})}error(F){this.forEachObserver(G=>{G.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,G,ce){let X;if(void 0===F&&void 0===G&&void 0===ce)throw new Error("Missing Observer.");X=function Zi(L,F){if("object"!=typeof L||null===L)return!1;for(const G of F)if(G in L&&"function"==typeof L[G])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:G,complete:ce},void 0===X.next&&(X.next=Kt),void 0===X.error&&(X.error=Kt),void 0===X.complete&&(X.complete=Kt);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Qe}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,F)}sendOne(F,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{G(this.observers[F])}catch(ce){typeof console<"u"&&console.error&&console.error(ce)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kt(){}const mn=function(L,F,G,ce){let X;if(ce<F?X="at least "+F:ce>G&&(X=0===G?"none":"no more than "+G),X)throw new Error(L+" failed: Was called with "+ce+(1===ce?" argument.":" arguments.")+" Expects "+X+".")};function jn(L,F){return`${L} failed: ${F} argument `}function ws(L,F,G,ce){if((!ce||G)&&"function"!=typeof G)throw new Error(jn(L,F)+"must be a valid function.")}function Bt(L,F,G,ce){if((!ce||G)&&("object"!=typeof G||null===G))throw new Error(jn(L,F)+"must be a valid context object.")}const Kr=function(L){const F=[];let G=0;for(let ce=0;ce<L.length;ce++){let X=L.charCodeAt(ce);if(X>=55296&&X<=56319){const Qe=X-55296;ce++,Q(ce<L.length,"Surrogate pair missing trail surrogate."),X=65536+(Qe<<10)+(L.charCodeAt(ce)-56320)}X<128?F[G++]=X:X<2048?(F[G++]=X>>6|192,F[G++]=63&X|128):X<65536?(F[G++]=X>>12|224,F[G++]=X>>6&63|128,F[G++]=63&X|128):(F[G++]=X>>18|240,F[G++]=X>>12&63|128,F[G++]=X>>6&63|128,F[G++]=63&X|128)}return F},Pt=function(L){let F=0;for(let G=0;G<L.length;G++){const ce=L.charCodeAt(G);ce<128?F++:ce<2048?F+=2:ce>=55296&&ce<=56319?(F+=4,G++):F+=3}return F},Yr=1e3,ke=2,Ee=144e5,Ze=.5;function ht(L,F=Yr,G=ke){const ce=F*Math.pow(G,L),X=Math.round(Ze*ce*(Math.random()-.5)*2);return Math.min(Ee,ce+X)}function Gn(L){return L&&L._delegate?L._delegate:L}},9061:(it,Ce,x)=>{var p=x(4650);let Q=null;function P(){return Q}class ee{}const ie=new p.OlP("DocumentToken");class En{constructor(e,t,o,l){this.$implicit=e,this.ngForOf=t,this.index=o,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,o,l){this._viewContainer=t,this._template=o,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const o=this._viewContainer;t.forEachOperation((l,f,_)=>{if(null==l.previousIndex)o.createEmbeddedView(this._template,new En(l.item,this._ngForOf,-1,-1),null===_?void 0:_);else if(null==_)o.remove(null===f?void 0:f);else if(null!==f){const D=o.get(f);o.move(D,_),ln(D,l)}});for(let l=0,f=o.length;l<f;l++){const D=o.get(l).context;D.index=l,D.count=f,D.ngForOf=this._ngForOf}t.forEachIdentityChange(l=>{ln(o.get(l.currentIndex),l)})}static ngTemplateContextGuard(t,o){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ln(n,e){n.context.$implicit=e.item}let Ki=(()=>{class n{constructor(t,o){this._viewContainer=t,this._context=new Ct,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){al("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){al("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,o){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ct{constructor(){this.$implicit=null,this.ngIf=null}}function al(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();class Oi extends ee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Io extends Oi{static makeCurrent(){!function re(n){Q||(Q=n)}(new Io)}onAndCancel(e,t,o){return e.addEventListener(t,o,!1),()=>{e.removeEventListener(t,o,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vs(){return Do=Do||document.querySelector("base"),Do?Do.getAttribute("href"):null}();return null==t?null:function br(n){xi=xi||document.createElement("a"),xi.setAttribute("href",n);const e=xi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Do=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Wn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const o=t.indexOf("="),[l,f]=-1==o?[t,""]:[t.slice(0,o),t.slice(o+1)];if(l.trim()===e)return decodeURIComponent(f)}return null}(document.cookie,e)}}let xi,Do=null;const pa=new p.OlP("TRANSITION_ID"),os=[{provide:p.ip1,useFactory:function Uu(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const o=P(),l=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let f=0;f<l.length;f++)o.remove(l[f])})}},deps:[pa,ie,p.zs3],multi:!0}];let qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const as=new p.OlP("EventManagerPlugins");let Co=(()=>{class n{constructor(t,o){this._zone=o,this._eventNameToPlugin=new Map,t.forEach(l=>l.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,o,l){return this._findPluginFor(o).addEventListener(t,o,l)}addGlobalEventListener(t,o,l){return this._findPluginFor(o).addGlobalEventListener(t,o,l)}getZone(){return this._zone}_findPluginFor(t){const o=this._eventNameToPlugin.get(t);if(o)return o;const l=this._plugins;for(let f=0;f<l.length;f++){const _=l[f];if(_.supports(t))return this._eventNameToPlugin.set(t,_),_}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(as),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class un{constructor(e){this._doc=e}addGlobalEventListener(e,t,o){const l=P().getGlobalEventTarget(this._doc,e);if(!l)throw new Error(`Unsupported event target ${l} for event ${t}`);return this.addEventListener(l,t,o)}}let wo=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const o of t)1===this.changeUsageCount(o,1)&&this.onStyleAdded(o)}removeStyles(t){for(const o of t)0===this.changeUsageCount(o,-1)&&this.onStyleRemoved(o)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,o){const l=this.usageCount;let f=l.get(t)??0;return f+=o,f>0?l.set(t,f):l.delete(t),f}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),pi=(()=>{class n extends wo{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const o of this.hostNodes)this.addStyleToHost(o,t)}onStyleRemoved(t){const o=this.styleRef;o.get(t)?.forEach(f=>f.remove()),o.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const o of this.getAllStyles())this.addStyleToHost(t,o)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,o){const l=this.doc.createElement("style");l.textContent=o,t.appendChild(l);const f=this.styleRef.get(o);f?f.push(l):this.styleRef.set(o,[l])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const gi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Us=/%COMP%/g,Bs=new p.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function So(n,e){return e.flat(100).map(t=>t.replace(Us,n))}function _a(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qn=(()=>{class n{constructor(t,o,l,f){this.eventManager=t,this.sharedStylesHost=o,this.appId=l,this.removeStylesOnCompDestory=f,this.rendererByCompId=new Map,this.defaultRenderer=new Ao(t)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;const l=this.getOrCreateRenderer(t,o);return l instanceof Rl?l.applyToHost(t):l instanceof Ro&&l.applyStyles(),l}getOrCreateRenderer(t,o){const l=this.rendererByCompId;let f=l.get(o.id);if(!f){const _=this.eventManager,D=this.sharedStylesHost,T=this.removeStylesOnCompDestory;switch(o.encapsulation){case p.ifc.Emulated:f=new Rl(_,D,o,this.appId,T);break;case p.ifc.ShadowDom:return new ya(_,D,t,o);default:f=new Ro(_,D,o,T)}f.onDestroy=()=>l.delete(o.id),l.set(o.id,f)}return f}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Co),p.LFG(pi),p.LFG(p.AFp),p.LFG(Bs))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Mo(e)?e.content:e).appendChild(t)}insertBefore(e,t,o){e&&(Mo(e)?e.content:e).insertBefore(t,o)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,l){if(l){t=l+":"+t;const f=gi[l];f?e.setAttributeNS(f,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){const l=gi[o];l?e.removeAttributeNS(l,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,l){l&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,o,l&p.JOm.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e[t]=o}setValue(e,t){e.nodeValue=t}listen(e,t,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_a(o)):this.eventManager.addEventListener(e,t,_a(o))}}function Mo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ya extends Ao{constructor(e,t,o,l){super(e),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=So(l.id,l.styles);for(const _ of f){const D=document.createElement("style");D.textContent=_,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ro extends Ao{constructor(e,t,o,l,f=o.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=l,this.rendererUsageCount=0,this.styles=So(f,o.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Rl extends Ro{constructor(e,t,o,l,f){const _=l+"-"+o.id;super(e,t,o,f,_),this.contentAttr=function Hs(n){return"_ngcontent-%COMP%".replace(Us,n)}(_),this.hostAttr=function To(n){return"_nghost-%COMP%".replace(Us,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}}let ls=(()=>{class n extends un{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,l){return t.addEventListener(o,l,!1),()=>this.removeEventListener(t,o,l)}removeEventListener(t,o,l){return t.removeEventListener(o,l)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const No=["alt","control","meta","shift"],Hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ei={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let va=(()=>{class n extends un{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,o,l){const f=n.parseEventName(o),_=n.eventCallback(f.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,f.domEventName,_))}static parseEventName(t){const o=t.toLowerCase().split("."),l=o.shift();if(0===o.length||"keydown"!==l&&"keyup"!==l)return null;const f=n._normalizeKey(o.pop());let _="",D=o.indexOf("code");if(D>-1&&(o.splice(D,1),_="code."),No.forEach(R=>{const V=o.indexOf(R);V>-1&&(o.splice(V,1),_+=R+".")}),_+=f,0!=o.length||0===f.length)return null;const T={};return T.domEventName=l,T.fullKey=_,T}static matchEventFullKeyCode(t,o){let l=Hu[t.key]||t.key,f="";return o.indexOf("code.")>-1&&(l=t.code,f="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),No.forEach(_=>{_!==l&&(0,ei[_])(t)&&(f+=_+".")}),f+=l,f===o)}static eventCallback(t,o,l){return f=>{n.matchEventFullKeyCode(f,t)&&l.runGuarded(()=>o(f))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Gu=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Br(){Io.makeCurrent()},multi:!0},{provide:ie,useFactory:function $u(){return(0,p.RDi)(document),document},deps:[]}]),Nl=new p.OlP(""),Da=[{provide:p.rWj,useClass:class Bu{addToWindow(e){p.dqk.getAngularTestability=(o,l=!0)=>{const f=e.findTestabilityInTree(o,l);if(null==f)throw new Error("Could not find testability for element.");return f},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(o=>{const l=p.dqk.getAllAngularTestabilities();let f=l.length,_=!1;const D=function(T){_=_||T,f--,0==f&&o(_)};l.forEach(function(T){T.whenStable(D)})})}findTestabilityInTree(e,t,o){return null==t?null:e.getTestability(t)??(o?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],_i=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function yh(){return new p.qLn},deps:[]},{provide:as,useClass:ls,multi:!0,deps:[ie,p.R0b,p.Lbi]},{provide:as,useClass:va,multi:!0,deps:[ie]},{provide:qn,useClass:qn,deps:[Co,pi,p.AFp,Bs]},{provide:p.FYo,useExisting:qn},{provide:wo,useExisting:pi},{provide:pi,useClass:pi,deps:[ie]},{provide:Co,useClass:Co,deps:[as,p.R0b]},{provide:class Ru{},useClass:qc,deps:[]},[]];let Po=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:pa,useExisting:p.AFp},os]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Nl,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[..._i,...Da],imports:[hl,p.hGG]}),n})();typeof window<"u"&&window;var Yu=x(4986),Sr=x(8306),Ws=x(7669),ni=x(8996);function ds(...n){const e=(0,Ws.yG)(n);return(0,ni.D)(n,e)}var Hr=x(831),Kn=x(4004),Ar=x(3099),ko=x(8421),mr=x(4482),Pn=x(5403);function or(n,e){return(0,mr.e)((t,o)=>{let l=null,f=0,_=!1;const D=()=>_&&!l&&o.complete();t.subscribe((0,Pn.x)(o,T=>{l?.unsubscribe();let R=0;const V=f++;(0,ko.Xf)(n(T,V)).subscribe(l=(0,Pn.x)(o,B=>o.next(e?e(T,B,V,R++):B),()=>{l=null,D()}))},()=>{_=!0,D()}))})}function Ra(n,e){return(0,mr.e)(function ed(n,e,t,o,l){return(f,_)=>{let D=t,T=e,R=0;f.subscribe((0,Pn.x)(_,V=>{const B=R++;T=D?n(T,V,B):(D=!0,V),o&&_.next(T)},l&&(()=>{D&&_.next(T),_.complete()})))}}(n,e,arguments.length>=2,!0))}var I=x(4671);function S(n,e){return n===e}var k=x(5032),oe=x(7184),Fe=x(2011),qe=(x(8971),x(3942)),vt=x(4859),et=x(5861),tn=x(9681),N=x(2090),Vi=x(1877);const yi="@firebase/database";let _r="";function ri(n){_r=n}class Ll{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ih{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const yp=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ll(e)}}catch{}return new Ih},zs=yp("localStorage"),td=yp("sessionStorage"),vi=new Vi.Yd("@firebase/database"),vp=function(){let n=1;return function(){return n++}}(),Ep=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const o=t.digest();return N.US.encodeByteArray(o)},Fo=function(...n){let e="";for(let t=0;t<n.length;t++){const o=n[t];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?e+=Fo.apply(null,o):e+="object"==typeof o?(0,N.Wl)(o):o,e+=" "}return e};let Na=null,Ip=!0;const Dp=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(vi.logLevel=Vi.in.VERBOSE,Na=vi.log.bind(vi),e&&td.set("logging_enabled",!0)):"function"==typeof n?Na=n:(Na=null,td.remove("logging_enabled"))},Yn=function(...n){if(!0===Ip&&(Ip=!1,null===Na&&!0===td.get("logging_enabled")&&Dp(!0)),Na){const e=Fo.apply(null,n);Na(e)}},Qu=function(n){return function(...e){Yn(n,...e)}},Vl=function(...n){const e="FIREBASE INTERNAL ERROR: "+Fo(...n);vi.error(e)},Ei=function(...n){const e=`FIREBASE FATAL ERROR: ${Fo(...n)}`;throw vi.error(e),new Error(e)},Vn=function(...n){const e="FIREBASE WARNING: "+Fo(...n);vi.warn(e)},Ul=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Un="[MIN_NAME]",fs="[MAX_NAME]",Lo=function(n,e){if(n===e)return 0;if(n===Un||e===fs)return-1;if(e===Un||n===fs)return 1;{const t=Xu(n),o=Xu(e);return null!==t?null!==o?t-o==0?n.length-e.length:t-o:-1:null!==o?1:n<e?-1:1}},Cp=function(n,e){return n===e?0:n<e?-1:1},Pa=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Wl)(e))},Vo=function(n){if("object"!=typeof n||null===n)return(0,N.Wl)(n);const e=[];for(const o in n)e.push(o);e.sort();let t="{";for(let o=0;o<e.length;o++)0!==o&&(t+=","),t+=(0,N.Wl)(e[o]),t+=":",t+=Vo(n[e[o]]);return t+="}",t},wh=function(n,e){const t=n.length;if(t<=e)return[n];const o=[];for(let l=0;l<t;l+=e)o.push(n.substring(l,l+e>t?t:l+e));return o};function Mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bh=function(n){(0,N.hu)(!Ul(n),"Invalid JSON number");const o=1023;let l,f,_,D,T;0===n?(f=0,_=0,l=1/n==-1/0?1:0):(l=n<0,(n=Math.abs(n))>=Math.pow(2,1-o)?(D=Math.min(Math.floor(Math.log(n)/Math.LN2),o),f=D+o,_=Math.round(n*Math.pow(2,52-D)-Math.pow(2,52))):(f=0,_=Math.round(n/Math.pow(2,-1074))));const R=[];for(T=52;T;T-=1)R.push(_%2?1:0),_=Math.floor(_/2);for(T=11;T;T-=1)R.push(f%2?1:0),f=Math.floor(f/2);R.push(l?1:0),R.reverse();const V=R.join("");let B="";for(T=0;T<64;T+=8){let Y=parseInt(V.substr(T,8),2).toString(16);1===Y.length&&(Y="0"+Y),B+=Y}return B.toLowerCase()},Mr=new RegExp("^-?(0*)\\d{1,10}$"),Xu=function(n){if(Mr.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Dn=function(n){try{n()}catch(e){setTimeout(()=>{throw Vn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Bl=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oa=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Th{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(o=>this.appCheck=o)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Sh{constructor(e,t,o){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}}let xa=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Mh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zs="websocket",Rh="long_polling";class ld{constructor(e,t,o,l,f=!1,_="",D=!1,T=!1){this.secure=t,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=f,this.persistenceKey=_,this.includeNamespaceInQueryParams=D,this.isUsingEmulator=T,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zs.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nc(n,e,t){let o;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===Zs)o=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Rh)throw new Error("Unknown connection type: "+e);o=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Hl(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const l=[];return Mn(t,(f,_)=>{l.push(f+"="+_)}),o+l.join("&")}class Nh{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const qs={},jl={};function rc(n){const e=n.toString();return qs[e]||(qs[e]=new Nh),qs[e]}class $l{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&Dn(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gs{constructor(e,t,o,l,f,_,D){this.connId=e,this.repoInfo=t,this.applicationId=o,this.appCheckToken=l,this.authToken=f,this.transportSessionId=_,this.lastSessionId=D,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qu(e),this.stats_=rc(t),this.urlFn=T=>(this.appCheckToken&&(T.ac=this.appCheckToken),nc(t,Rh,T))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $l(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Uh((...f)=>{const[_,D,T,R,V]=f;if(this.incrementIncomingBytes_(f),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===_)this.id=D,this.password=T;else{if("close"!==_)throw new Error("Unrecognized command received: "+_);D?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(D,()=>{this.onClosed_()})):this.onClosed_()}},(...f)=>{const[_,D]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(_,D)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Mh.test(location.hostname)&&(o.r="f");const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gs.forceAllow_=!0}static forceDisallow(){gs.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!gs.forceAllow_&&(gs.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const o=(0,N.h$)(t),l=wh(o,1840);for(let f=0;f<l.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[f]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=e,o.pw=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Uh{constructor(e,t,o,l){if(this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=vp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Uh.createIFrame_();let f="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(f='<script>document.domain="'+document.domain+'";<\/script>');const _="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(_),this.myIFrame.doc.close()}catch(D){Yn("frame writing exception"),D.stack&&Yn(D.stack),Yn(D)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Yn("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const _=this.pendingSegs.shift();o=o+"&seg"+l+"="+_.seg+"&ts"+l+"="+_.ts+"&d"+l+"="+_.d,l++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,o){this.pendingSegs.push({seg:e,ts:t,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const o=()=>{this.outstandingRequests.delete(t),this.newRequest_()},l=setTimeout(o,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(l),o()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||"loaded"===l||"complete"===l)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=()=>{Yn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let Gl=null;typeof MozWebSocket<"u"?Gl=MozWebSocket:typeof WebSocket<"u"&&(Gl=WebSocket);let Ks=(()=>{class n{constructor(t,o,l,f,_,D,T){this.connId=t,this.applicationId=l,this.appCheckToken=f,this.authToken=_,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qu(this.connId),this.stats_=rc(o),this.connURL=n.connectionURL_(o,D,T,f,l),this.nodeAdmin=o.nodeAdmin}static connectionURL_(t,o,l,f,_){const D={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&Mh.test(location.hostname)&&(D.r="f"),o&&(D.s=o),l&&(D.ls=l),f&&(D.ac=f),_&&(D.p=_),nc(t,Zs,D)}open(t,o){this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zs.set("previous_websocket_failure",!0);try{let l;if((0,N.Yr)()){l={headers:{"User-Agent":`Firebase/5/${_r}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const _=process.env,D=0===this.connURL.indexOf("wss://")?_.HTTPS_PROXY||_.https_proxy:_.HTTP_PROXY||_.http_proxy;D&&(l.proxy={origin:D})}this.mySock=new Gl(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const f=l.message||l.data;return f&&this.log_(f),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const f=l.message||l.data;f&&this.log_(f),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const l=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);l&&l.length>1&&parseFloat(l[1])<4.4&&(t=!0)}return!t&&null!==Gl&&!n.forceDisallow_}static previouslyFailed(){return zs.isInMemoryStorage||!0===zs.get("previous_websocket_failure")}markConnectionHealthy(){zs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const l=(0,N.cI)(o);this.onMessage(l)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const o=Number(t);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const o=t.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const l=this.extractFrameCount_(o);null!==l&&this.appendFrame_(l)}}send(t){this.resetKeepAlive();const o=(0,N.Wl)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const l=wh(o,16384);l.length>1&&this.sendString_(String(l.length));for(let f=0;f<l.length;f++)this.sendString_(l[f])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Wl=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[gs,Ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const o=Ks&&Ks.isAvailable();let l=o&&!Ks.previouslyFailed();if(t.webSocketOnly&&(o||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[Ks];else{const f=this.transports_=[];for(const _ of n.ALL_TRANSPORTS)_&&_.isAvailable()&&f.push(_);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Ui{constructor(e,t,o,l,f,_,D,T,R,V){this.id=e,this.repoInfo_=t,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=f,this.onMessage_=_,this.onReady_=D,this.onDisconnect_=T,this.onKill_=R,this.lastSessionId=V,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qu("c:"+this.id+":"),this.transportManager_=new Wl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,o)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Oa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Pa("t",e),o=Pa("d",e);if("c"===t)this.onSecondaryControl_(o);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Pa("t",e),o=Pa("d",e);"c"===t?this.onControl_(o):"d"===t&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Pa("t",e);if("d"in e){const o=e.d;if("h"===t){const l=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(o):"r"===t?this.onReset_(o):"e"===t?Vl("Server Error: "+o):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vl("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,o=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==o&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,o),Oa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lc{put(e,t,o,l){}merge(e,t,o,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,o){}onDisconnectMerge(e,t,o){}onDisconnectCancel(e,t){}reportStats(e){}}class Yl{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,t)}}on(e,t,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:o});const l=this.getInitialEvent(e);l&&t.apply(o,l)}off(e,t,o){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let f=0;f<l.length;f++)if(l[f].callback===t&&(!o||o===l[f].context))return void l.splice(f,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Ua extends Yl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ua}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Ho=32,_d=768;class wt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Vt(){return new wt("")}function Tt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bi(n){return n.pieces_.length-n.pieceNum_}function kt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wt(n.pieces_,e)}function Ys(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Qs(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function yd(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wt(e,0)}function Zt(n,e){const t=[];for(let o=n.pieceNum_;o<n.pieces_.length;o++)t.push(n.pieces_[o]);if(e instanceof wt)for(let o=e.pieceNum_;o<e.pieces_.length;o++)t.push(e.pieces_[o]);else{const o=e.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&t.push(o[l])}return new wt(t,0)}function At(n){return n.pieceNum_>=n.pieces_.length}function lr(n,e){const t=Tt(n),o=Tt(e);if(null===t)return e;if(t===o)return lr(kt(n),kt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Mp(n,e){const t=Qs(n,0),o=Qs(e,0);for(let l=0;l<t.length&&l<o.length;l++){const f=Lo(t[l],o[l]);if(0!==f)return f}return t.length===o.length?0:t.length<o.length?-1:1}function vd(n,e){if(Bi(n)!==Bi(e))return!1;for(let t=n.pieceNum_,o=e.pieceNum_;t<=n.pieces_.length;t++,o++)if(n.pieces_[t]!==e.pieces_[o])return!1;return!0}function g(n,e){let t=n.pieceNum_,o=e.pieceNum_;if(Bi(n)>Bi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[o])return!1;++t,++o}return!0}class c{constructor(e,t){this.errorPrefix_=t,this.parts_=Qs(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,N.ug)(this.parts_[o]);w(this)}}function w(n){if(n.byteLength_>_d)throw new Error(n.errorPrefix_+"has a key path longer than "+_d+" bytes ("+n.byteLength_+").");if(n.parts_.length>Ho)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ho+") or object contains a cycle "+M(n))}function M(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class W extends Yl{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new W}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ne=1e3;let jr,Hi=(()=>{class n extends lc{constructor(t,o,l,f,_,D,T,R){if(super(),this.repoInfo_=t,this.applicationId_=o,this.onDataUpdate_=l,this.onConnectStatus_=f,this.onServerInfoUpdate_=_,this.authTokenProvider_=D,this.appCheckTokenProvider_=T,this.authOverride_=R,this.id=n.nextPersistentConnectionId_++,this.log_=Qu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ne,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,R&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Ua.getInstance().on("online",this.onOnline_,this)}sendRequest(t,o,l){const f=++this.requestNumber_,_={r:f,a:t,b:o};this.log_((0,N.Wl)(_)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(_),l&&(this.requestCBHash_[f]=l)}get(t){this.initConnection_();const o=new N.BH,f={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:D=>{const T=D.d;"ok"===D.s?o.resolve(T):o.reject(T)}};return this.outstandingGets_.push(f),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(t,o,l,f){this.initConnection_();const _=t._queryIdentifier,D=t._path.toString();this.log_("Listen called for "+D+" "+_),this.listens.has(D)||this.listens.set(D,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(D).has(_),"listen() called twice for same path/queryId.");const T={onComplete:f,hashFn:o,query:t,tag:l};this.listens.get(D).set(_,T),this.connected_&&this.sendListen_(T)}sendGet_(t){const o=this.outstandingGets_[t];this.sendRequest("g",o.request,l=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(l)})}sendListen_(t){const o=t.query,l=o._path.toString(),f=o._queryIdentifier;this.log_("Listen on "+l+" for "+f);const _={p:l};t.tag&&(_.q=o._queryObject,_.t=t.tag),_.h=t.hashFn(),this.sendRequest("q",_,T=>{const R=T.d,V=T.s;n.warnOnListenWarnings_(R,o),(this.listens.get(l)&&this.listens.get(l).get(f))===t&&(this.log_("listen response",T),"ok"!==V&&this.removeListen_(l,f),t.onComplete&&t.onComplete(V,R))})}static warnOnListenWarnings_(t,o){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const l=(0,N.DV)(t,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const f='".indexOn": "'+o._queryParams.getIndex().toString()+'"',_=o._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${f} at ${_} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,o=(0,N.w9)(t)?"auth":"gauth",l={cred:t};null===this.authOverride_?l.noauth=!0:"object"==typeof this.authOverride_&&(l.authvar=this.authOverride_),this.sendRequest(o,l,f=>{const _=f.s,D=f.d||"error";this.authToken_===t&&("ok"===_?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(_,D))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const o=t.s,l=t.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,l)})}unlisten(t,o){const l=t._path.toString(),f=t._queryIdentifier;this.log_("Unlisten called for "+l+" "+f),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,f)&&this.connected_&&this.sendUnlisten_(l,f,t._queryObject,o)}sendUnlisten_(t,o,l,f){this.log_("Unlisten on "+t+" for "+o);const _={p:t};f&&(_.q=l,_.t=f),this.sendRequest("n",_)}onDisconnectPut(t,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,o,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:o,onComplete:l})}onDisconnectMerge(t,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,o,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:o,onComplete:l})}onDisconnectCancel(t,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(t,o,l,f){const _={p:o,d:l};this.log_("onDisconnect "+t,_),this.sendRequest(t,_,D=>{f&&setTimeout(()=>{f(D.s,D.d)},Math.floor(0))})}put(t,o,l,f){this.putInternal("p",t,o,l,f)}merge(t,o,l,f){this.putInternal("m",t,o,l,f)}putInternal(t,o,l,f,_){this.initConnection_();const D={p:o,d:l};void 0!==_&&(D.h=_),this.outstandingPuts_.push({action:t,request:D,onComplete:f}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(t){const o=this.outstandingPuts_[t].action,l=this.outstandingPuts_[t].request,f=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(o,l,_=>{this.log_(o+" response",_),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),f&&f(_.s,_.d)})}reportStats(t){if(this.connected_){const o={c:t};this.log_("reportStats",o),this.sendRequest("s",o,l=>{"ok"!==l.s&&this.log_("reportStats","Error sending stats: "+l.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Wl)(t));const o=t.r,l=this.requestCBHash_[o];l&&(delete this.requestCBHash_[o],l(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,o){this.log_("handleServerMessage",t,o),"d"===t?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===t?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===t?this.onListenRevoked_(o.p,o.q):"ac"===t?this.onAuthRevoked_(o.s,o.d):"apc"===t?this.onAppCheckRevoked_(o.s,o.d):"sd"===t?this.onSecurityDebugPacket_(o):Vl("Unrecognized action received from server: "+(0,N.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ne,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ne,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ne),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-t);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,et.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const o=t.onDataMessage_.bind(t),l=t.onReady_.bind(t),f=t.onRealtimeDisconnect_.bind(t),_=t.id+":"+n.nextConnectionId_++,D=t.lastSessionId;let T=!1,R=null;const V=function(){R?R.close():(T=!0,f())};t.realtime_={close:V,sendRequest:function(ge){(0,N.hu)(R,"sendRequest call when we're not connected not allowed."),R.sendRequest(ge)}};const Y=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ge,Ae]=yield Promise.all([t.authTokenProvider_.getToken(Y),t.appCheckTokenProvider_.getToken(Y)]);T?Yn("getToken() completed but was canceled"):(Yn("getToken() completed. Creating connection."),t.authToken_=ge&&ge.accessToken,t.appCheckToken_=Ae&&Ae.token,R=new Ui(_,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,o,l,f,rt=>{Vn(rt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},D))}catch(ge){t.log_("Failed to get token: "+ge),T||(t.repoInfo_.nodeAdmin&&Vn(ge),V())}}})()}interrupt(t){Yn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Yn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ne,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const o=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const o=this.outstandingPuts_[t];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,o){let l;l=o?o.map(_=>Vo(_)).join("$"):"default";const f=this.removeListen_(t,l);f&&f.onComplete&&f.onComplete("permission_denied")}removeListen_(t,o){const l=new wt(t).toString();let f;if(this.listens.has(l)){const _=this.listens.get(l);f=_.get(o),_.delete(o),0===_.size&&this.listens.delete(l)}else f=void 0;return f}onAuthRevoked_(t,o){Yn("Auth token revoked: "+t+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,o){Yn("App check token revoked: "+t+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const o of t.values())this.sendListen_(o);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let o="js";(0,N.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+o+"."+_r.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ua.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Rt(e,t)}}class Js{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const o=new Rt(Un,e),l=new Rt(Un,t);return 0!==this.compare(o,l)}minPost(){return Rt.MIN}}class jo extends Js{static get __EMPTY_NODE(){return jr}static set __EMPTY_NODE(e){jr=e}compare(e,t){return Lo(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Rt.MIN}maxPost(){return new Rt(fs,jr)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rt(e,jr)}toString(){return".key"}}const $r=new jo;class Ba{constructor(e,t,o,l,f=null){this.isReverse_=l,this.resultGenerator_=f,this.nodeStack_=[];let _=1;for(;!e.isEmpty();)if(_=t?o(e.key,t):1,l&&(_*=-1),_<0)e=this.isReverse_?e.left:e.right;else{if(0===_){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Jl,Gr=(()=>{class n{constructor(t,o,l,f,_){this.key=t,this.value=o,this.color=l??n.RED,this.left=f??Rr.EMPTY_NODE,this.right=_??Rr.EMPTY_NODE}copy(t,o,l,f,_){return new n(t??this.key,o??this.value,l??this.color,f??this.left,_??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,o,l){let f=this;const _=l(t,f.key);return f=_<0?f.copy(null,null,null,f.left.insert(t,o,l),null):0===_?f.copy(null,o,null,null,null):f.copy(null,null,null,null,f.right.insert(t,o,l)),f.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,o){let l,f;if(l=this,o(t,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(t,o),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),0===o(t,l.key)){if(l.right.isEmpty())return Rr.EMPTY_NODE;f=l.right.min_(),l=l.copy(f.key,f.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(t,o))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,o)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Rr{constructor(e,t=Rr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Rr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Rr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gr.BLACK,null,null))}get(e){let t,o=this.root_;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t)return o.value;t<0?o=o.left:t>0&&(o=o.right)}return null}getPredecessorKey(e){let t,o=this.root_,l=null;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}t<0?o=o.left:t>0&&(l=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ba(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ba(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ba(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ba(this.root_,null,this.comparator_,!0,e)}}function g_(n,e){return Lo(n.name,e.name)}function $o(n,e){return Lo(n,e)}Rr.EMPTY_NODE=new class Hh{copy(e,t,o,l,f){return this}insert(e,t,o){return new Gr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const VE=function(n){return"number"==typeof n?"number:"+bh(n):"string:"+n},Rp=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===Jl||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===Jl||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let m_,__,y_,uc=(()=>{class n{constructor(t,o=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=o,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rp(this.priorityNode_)}static set __childrenNodeConstructor(t){m_=t}static get __childrenNodeConstructor(){return m_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return At(t)?this:".priority"===Tt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,o){return null}updateImmediateChild(t,o){return".priority"===t?this.updatePriority(o):o.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,o).updatePriority(this.priorityNode_)}updateChild(t,o){const l=Tt(t);return null===l?o:o.isEmpty()&&".priority"!==l?this:((0,N.hu)(".priority"!==l||1===Bi(t),".priority must be the last token in a path"),this.updateImmediateChild(l,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kt(t),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,o){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+VE(this.priorityNode_.val())+":");const o=typeof this.value_;t+=o+":",t+="number"===o?bh(this.value_):this.value_,this.lazyHash_=Ep(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const o=typeof t.value_,l=typeof this.value_,f=n.VALUE_TYPE_ORDER.indexOf(o),_=n.VALUE_TYPE_ORDER.indexOf(l);return(0,N.hu)(f>=0,"Unknown leaf type: "+o),(0,N.hu)(_>=0,"Unknown leaf type: "+l),f===_?"object"===l?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:_-f}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xt=new class UE extends Js{compare(e,t){const o=e.node.getPriority(),l=t.node.getPriority(),f=o.compareTo(l);return 0===f?Lo(e.name,t.name):f}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Rt.MIN}maxPost(){return new Rt(fs,new uc("[PRIORITY-POST]",y_))}makePost(e,t){const o=__(e);return new Rt(t,new uc("[PRIORITY-POST]",o))}toString(){return".priority"}},BE=Math.log(2);class Bn{constructor(e){this.count=parseInt(Math.log(e+1)/BE,10),this.current_=this.count-1;const l=(f=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $h=function(n,e,t,o){n.sort(e);const l=function(T,R){const V=R-T;let B,Y;if(0===V)return null;if(1===V)return B=n[T],Y=t?t(B):B,new Gr(Y,B.node,Gr.BLACK,null,null);{const ge=parseInt(V/2,10)+T,Ae=l(T,ge),rt=l(ge+1,R);return B=n[ge],Y=t?t(B):B,new Gr(Y,B.node,Gr.BLACK,Ae,rt)}},D=function(T){let R=null,V=null,B=n.length;const Y=function(Ae,rt){const dt=B-Ae,jt=B;B-=Ae;const Wt=l(dt+1,jt),zt=n[dt],Nt=t?t(zt):zt;ge(new Gr(Nt,zt.node,rt,null,Wt))},ge=function(Ae){R?(R.left=Ae,R=Ae):(V=Ae,R=Ae)};for(let Ae=0;Ae<T.count;++Ae){const rt=T.nextBitIsOne(),dt=Math.pow(2,T.count-(Ae+1));rt?Y(dt,Gr.BLACK):(Y(dt,Gr.BLACK),Y(dt,Gr.RED))}return V}(new Bn(n.length));return new Rr(o||e,D)};let Np;const Xl={};class Xs{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(Xl&&Xt,"ChildrenNode.ts has not been loaded"),Np=Np||new Xs({".priority":Xl},{".priority":Xt}),Np}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rr?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==$r,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const f=t.getIterator(Rt.Wrap);let D,_=f.getNext();for(;_;)l=l||e.isDefinedOn(_.node),o.push(_),_=f.getNext();D=l?$h(o,e.getCompare()):Xl;const T=e.toString(),R=Object.assign({},this.indexSet_);R[T]=e;const V=Object.assign({},this.indexes_);return V[T]=D,new Xs(V,R)}addToIndexes(e,t){const o=(0,N.UI)(this.indexes_,(l,f)=>{const _=(0,N.DV)(this.indexSet_,f);if((0,N.hu)(_,"Missing index implementation for "+f),l===Xl){if(_.isDefinedOn(e.node)){const D=[],T=t.getIterator(Rt.Wrap);let R=T.getNext();for(;R;)R.name!==e.name&&D.push(R),R=T.getNext();return D.push(e),$h(D,_.getCompare())}return Xl}{const D=t.get(e.name);let T=l;return D&&(T=T.remove(new Rt(e.name,D))),T.insert(e,e.node)}});return new Xs(o,this.indexSet_)}removeFromIndexes(e,t){const o=(0,N.UI)(this.indexes_,l=>{if(l===Xl)return l;{const f=t.get(e.name);return f?l.remove(new Rt(e.name,f)):l}});return new Xs(o,this.indexSet_)}}let Ed,St=(()=>{class n{constructor(t,o,l){this.children_=t,this.priorityNode_=o,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&Rp(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ed||(Ed=new n(new Rr($o),null,Xs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ed}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const o=this.children_.get(t);return null===o?Ed:o}}getChild(t){const o=Tt(t);return null===o?this:this.getImmediateChild(o).getChild(kt(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,o){if((0,N.hu)(o,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(o);{const l=new Rt(t,o);let f,_;o.isEmpty()?(f=this.children_.remove(t),_=this.indexMap_.removeFromIndexes(l,this.children_)):(f=this.children_.insert(t,o),_=this.indexMap_.addToIndexes(l,this.children_));const D=f.isEmpty()?Ed:this.priorityNode_;return new n(f,D,_)}}updateChild(t,o){const l=Tt(t);if(null===l)return o;{(0,N.hu)(".priority"!==Tt(t)||1===Bi(t),".priority must be the last token in a path");const f=this.getImmediateChild(l).updateChild(kt(t),o);return this.updateImmediateChild(l,f)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const o={};let l=0,f=0,_=!0;if(this.forEachChild(Xt,(D,T)=>{o[D]=T.val(t),l++,_&&n.INTEGER_REGEXP_.test(D)?f=Math.max(f,Number(D)):_=!1}),!t&&_&&f<2*l){const D=[];for(const T in o)D[T]=o[T];return D}return t&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+VE(this.getPriority().val())+":"),this.forEachChild(Xt,(o,l)=>{const f=l.hash();""!==f&&(t+=":"+o+":"+f)}),this.lazyHash_=""===t?"":Ep(t)}return this.lazyHash_}getPredecessorChildName(t,o,l){const f=this.resolveIndex_(l);if(f){const _=f.getPredecessorKey(new Rt(t,o));return _?_.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const o=this.resolveIndex_(t);if(o){const l=o.minKey();return l&&l.name}return this.children_.minKey()}getFirstChild(t){const o=this.getFirstChildName(t);return o?new Rt(o,this.children_.get(o)):null}getLastChildName(t){const o=this.resolveIndex_(t);if(o){const l=o.maxKey();return l&&l.name}return this.children_.maxKey()}getLastChild(t){const o=this.getLastChildName(t);return o?new Rt(o,this.children_.get(o)):null}forEachChild(t,o){const l=this.resolveIndex_(t);return l?l.inorderTraversal(f=>o(f.name,f.node)):this.children_.inorderTraversal(o)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,o){const l=this.resolveIndex_(o);if(l)return l.getIteratorFrom(t,f=>f);{const f=this.children_.getIteratorFrom(t.name,Rt.Wrap);let _=f.peek();for(;null!=_&&o.compare(_,t)<0;)f.getNext(),_=f.peek();return f}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,o){const l=this.resolveIndex_(o);if(l)return l.getReverseIteratorFrom(t,f=>f);{const f=this.children_.getReverseIteratorFrom(t.name,Rt.Wrap);let _=f.peek();for(;null!=_&&o.compare(_,t)>0;)f.getNext(),_=f.peek();return f}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Id?-1:0}withIndex(t){if(t===$r||this.indexMap_.hasIndex(t))return this;{const o=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,o)}}isIndexed(t){return t===$r||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const o=t;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const l=this.getIterator(Xt),f=o.getIterator(Xt);let _=l.getNext(),D=f.getNext();for(;_&&D;){if(_.name!==D.name||!_.node.equals(D.node))return!1;_=l.getNext(),D=f.getNext()}return null===_&&null===D}return!1}return!1}}resolveIndex_(t){return t===$r?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Id=new class HE extends St{constructor(){super(new Rr($o),St.EMPTY_NODE,Xs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return St.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Rt,{MIN:{value:new Rt(Un,St.EMPTY_NODE)},MAX:{value:new Rt(fs,Id)}}),jo.__EMPTY_NODE=St.EMPTY_NODE,uc.__childrenNodeConstructor=St,function t0(n){Jl=n}(Id),function jh(n){y_=n}(Id);const jE=!0;function Rn(n,e=null){if(null===n)return St.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uc(n,Rn(e));if(n instanceof Array||!jE){let t=St.EMPTY_NODE;return Mn(n,(o,l)=>{if((0,N.r3)(n,o)&&"."!==o.substring(0,1)){const f=Rn(l);(f.isLeafNode()||!f.isEmpty())&&(t=t.updateImmediateChild(o,f))}}),t.updatePriority(Rn(e))}{const t=[];let o=!1;if(Mn(n,(_,D)=>{if("."!==_.substring(0,1)){const T=Rn(D);T.isEmpty()||(o=o||!T.getPriority().isEmpty(),t.push(new Rt(_,T)))}}),0===t.length)return St.EMPTY_NODE;const f=$h(t,g_,_=>_.name,$o);if(o){const _=$h(t,Xt.getCompare());return new St(f,Rn(e),new Xs({".priority":_},{".priority":Xt}))}return new St(f,Rn(e),Xs.Default)}}!function v_(n){__=n}(Rn);class E_ extends Js{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!At(e)&&".priority"!==Tt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const o=this.extractChild(e.node),l=this.extractChild(t.node),f=o.compareTo(l);return 0===f?Lo(e.name,t.name):f}makePost(e,t){const o=Rn(e),l=St.EMPTY_NODE.updateChild(this.indexPath_,o);return new Rt(t,l)}maxPost(){const e=St.EMPTY_NODE.updateChild(this.indexPath_,Id);return new Rt(fs,e)}toString(){return Qs(this.indexPath_,0).join("/")}}const Gh=new class Dd extends Js{compare(e,t){const o=e.node.compareTo(t.node);return 0===o?Lo(e.name,t.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Rt.MIN}maxPost(){return Rt.MAX}makePost(e,t){const o=Rn(e);return new Rt(t,o)}toString(){return".value"}};function Pp(n){return{type:"value",snapshotNode:n}}function eu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function cc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Wh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zh{constructor(e){this.index_=e}updateChild(e,t,o,l,f,_){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const D=e.getImmediateChild(t);return D.getChild(l).equals(o.getChild(l))&&D.isEmpty()===o.isEmpty()||(null!=_&&(o.isEmpty()?e.hasChild(t)?_.trackChildChange(cc(t,D)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):D.isEmpty()?_.trackChildChange(eu(t,o)):_.trackChildChange(Wh(t,o,D))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(t,o).withIndex(this.index_)}updateFullNode(e,t,o){return null!=o&&(e.isLeafNode()||e.forEachChild(Xt,(l,f)=>{t.hasChild(l)||o.trackChildChange(cc(l,f))}),t.isLeafNode()||t.forEachChild(Xt,(l,f)=>{if(e.hasChild(l)){const _=e.getImmediateChild(l);_.equals(f)||o.trackChildChange(Wh(l,f,_))}else o.trackChildChange(eu(l,f))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?St.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class dc{constructor(e){this.indexedFilter_=new zh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=dc.getStartPost_(e),this.endPost_=dc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&o}updateChild(e,t,o,l,f,_){return this.matches(new Rt(t,o))||(o=St.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,o,l,f,_)}updateFullNode(e,t,o){t.isLeafNode()&&(t=St.EMPTY_NODE);let l=t.withIndex(this.index_);l=l.updatePriority(St.EMPTY_NODE);const f=this;return t.forEachChild(Xt,(_,D)=>{f.matches(new Rt(_,D))||(l=l.updateImmediateChild(_,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Op{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=t=>{const o=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new dc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,o,l,f,_){return this.rangedFilter_.matches(new Rt(t,o))||(o=St.EMPTY_NODE),e.getImmediateChild(t).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,o,l,f,_):this.fullLimitUpdateChild_(e,t,o,f,_)}updateFullNode(e,t,o){let l;if(t.isLeafNode()||t.isEmpty())l=St.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let f;l=St.EMPTY_NODE.withIndex(this.index_),f=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let _=0;for(;f.hasNext()&&_<this.limit_;){const D=f.getNext();if(this.withinDirectionalStart(D)){if(!this.withinDirectionalEnd(D))break;l=l.updateImmediateChild(D.name,D.node),_++}}}else{let f;l=t.withIndex(this.index_),l=l.updatePriority(St.EMPTY_NODE),f=this.reverse_?l.getReverseIterator(this.index_):l.getIterator(this.index_);let _=0;for(;f.hasNext();){const D=f.getNext();_<this.limit_&&this.withinDirectionalStart(D)&&this.withinDirectionalEnd(D)?_++:l=l.updateImmediateChild(D.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,o,l,f){let _;if(this.reverse_){const B=this.index_.getCompare();_=(Y,ge)=>B(ge,Y)}else _=this.index_.getCompare();const D=e;(0,N.hu)(D.numChildren()===this.limit_,"");const T=new Rt(t,o),R=this.reverse_?D.getFirstChild(this.index_):D.getLastChild(this.index_),V=this.rangedFilter_.matches(T);if(D.hasChild(t)){const B=D.getImmediateChild(t);let Y=l.getChildAfterChild(this.index_,R,this.reverse_);for(;null!=Y&&(Y.name===t||D.hasChild(Y.name));)Y=l.getChildAfterChild(this.index_,Y,this.reverse_);const ge=null==Y?1:_(Y,T);if(V&&!o.isEmpty()&&ge>=0)return f?.trackChildChange(Wh(t,o,B)),D.updateImmediateChild(t,o);{f?.trackChildChange(cc(t,B));const rt=D.updateImmediateChild(t,St.EMPTY_NODE);return null!=Y&&this.rangedFilter_.matches(Y)?(f?.trackChildChange(eu(Y.name,Y.node)),rt.updateImmediateChild(Y.name,Y.node)):rt}}return o.isEmpty()?e:V&&_(R,T)>=0?(null!=f&&(f.trackChildChange(cc(R.name,R.node)),f.trackChildChange(eu(t,o))),D.updateImmediateChild(t,o).updateImmediateChild(R.name,St.EMPTY_NODE)):e}}class xp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Un}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xt}copy(){const e=new xp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zh(n,e,t){const o=n.copy();return o.startSet_=!0,void 0===e&&(e=null),o.indexStartValue_=e,null!=t?(o.startNameSet_=!0,o.indexStartName_=t):(o.startNameSet_=!1,o.indexStartName_=""),o}function Go(n,e,t){const o=n.copy();return o.endSet_=!0,void 0===e&&(e=null),o.indexEndValue_=e,void 0!==t?(o.endNameSet_=!0,o.indexEndName_=t):(o.endNameSet_=!1,o.indexEndName_=""),o}function hc(n,e){const t=n.copy();return t.index_=e,t}function Cd(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Xt?t="$priority":n.index_===Gh?t="$value":n.index_===$r?t="$key":((0,N.hu)(n.index_ instanceof E_,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Wl)(t),n.startSet_){const o=n.startAfterSet_?"startAfter":"startAt";e[o]=(0,N.Wl)(n.indexStartValue_),n.startNameSet_&&(e[o]+=","+(0,N.Wl)(n.indexStartName_))}if(n.endSet_){const o=n.endBeforeSet_?"endBefore":"endAt";e[o]=(0,N.Wl)(n.indexEndValue_),n.endNameSet_&&(e[o]+=","+(0,N.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function D_(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xt&&(e.i=n.index_.toString()),e}class fc extends lc{constructor(e,t,o,l){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Qu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,o,l){const f=e._path.toString();this.log_("Listen called for "+f+" "+e._queryIdentifier);const _=fc.getListenId_(e,o),D={};this.listens_[_]=D;const T=Cd(e._queryParams);this.restRequest_(f+".json",T,(R,V)=>{let B=V;if(404===R&&(B=null,R=null),null===R&&this.onDataUpdate_(f,B,!1,o),(0,N.DV)(this.listens_,_)===D){let Y;Y=R?401===R?"permission_denied":"rest_error:"+R:"ok",l(Y,null)}})}unlisten(e,t){const o=fc.getListenId_(e,t);delete this.listens_[o]}get(e){const t=Cd(e._queryParams),o=e._path.toString(),l=new N.BH;return this.restRequest_(o+".json",t,(f,_)=>{let D=_;404===f&&(D=null,f=null),null===f?(this.onDataUpdate_(o,D,!1,null),l.resolve(D)):l.reject(new Error(D))}),l.promise}refreshAuthToken(e){}restRequest_(e,t={},o){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,f])=>{l&&l.accessToken&&(t.auth=l.accessToken),f&&f.token&&(t.ac=f.token);const _=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+_);const D=new XMLHttpRequest;D.onreadystatechange=()=>{if(o&&4===D.readyState){this.log_("REST Response for "+_+" received. status:",D.status,"response:",D.responseText);let T=null;if(D.status>=200&&D.status<300){try{T=(0,N.cI)(D.responseText)}catch{Vn("Failed to parse JSON response for "+_+": "+D.responseText)}o(null,T)}else 401!==D.status&&404!==D.status&&Vn("Got unsuccessful REST response for "+_+" Status: "+D.status),o(D.status);o=null}},D.open("GET",_,!0),D.send()})}}class qh{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Wo(){return{value:null,children:new Map}}function tu(n,e,t){if(At(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const o=Tt(e);n.children.has(o)||n.children.set(o,Wo()),tu(n.children.get(o),e=kt(e),t)}}function wd(n,e){if(At(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xt,(o,l)=>{tu(n,new wt(o),l)}),wd(n,e)}}if(n.children.size>0){const t=Tt(e);return e=kt(e),n.children.has(t)&&wd(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Lp(n,e,t){null!==n.value?t(e,n.value):function zE(n,e){n.children.forEach((t,o)=>{e(o,t)})}(n,(o,l)=>{Lp(l,new wt(e.toString()+"/"+o),t)})}class C_{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mn(this.last_,(o,l)=>{t[o]=t[o]-l}),this.last_=e,t}}class KE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new C_(e);const o=1e4+2e4*Math.random();Oa(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),t={};let o=!1;Mn(e,(l,f)=>{f>0&&(0,N.r3)(this.statsToReport_,l)&&(t[l]=f,o=!0)}),o&&this.server_.reportStats(t),Oa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var si=(()=>{return(n=si||(si={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",si;var n})();function Up(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class bd{constructor(e,t,o){this.path=e,this.affectedTree=t,this.revert=o,this.type=si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(At(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wt(e));return new bd(Vt(),t,this.revert)}}return(0,N.hu)(Tt(this.path)===e,"operationForChild called for unrelated child."),new bd(kt(this.path),this.affectedTree,this.revert)}}class Yh{constructor(e,t){this.source=e,this.path=t,this.type=si.LISTEN_COMPLETE}operationForChild(e){return At(this.path)?new Yh(this.source,Vt()):new Yh(this.source,kt(this.path))}}class ru{constructor(e,t,o){this.source=e,this.path=t,this.snap=o,this.type=si.OVERWRITE}operationForChild(e){return At(this.path)?new ru(this.source,Vt(),this.snap.getImmediateChild(e)):new ru(this.source,kt(this.path),this.snap)}}class zo{constructor(e,t,o){this.source=e,this.path=t,this.children=o,this.type=si.MERGE}operationForChild(e){if(At(this.path)){const t=this.children.subtree(new wt(e));return t.isEmpty()?null:t.value?new ru(this.source,Vt(),t.value):new zo(this.source,Vt(),t)}return(0,N.hu)(Tt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zo(this.source,kt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ha{constructor(e,t,o){this.node_=e,this.fullyInitialized_=t,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(At(e))return this.isFullyInitialized()&&!this.filtered_;const t=Tt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pc{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Sd(n,e,t,o,l,f){const _=o.filter(D=>D.type===t);_.sort((D,T)=>function YE(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const o=new Rt(e.childName,e.snapshotNode),l=new Rt(t.childName,t.snapshotNode);return n.index_.compare(o,l)}(n,D,T)),_.forEach(D=>{const T=function w_(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,D,f);l.forEach(R=>{R.respondsTo(D.type)&&e.push(R.createEvent(T,n.query_))})})}function Qh(n,e){return{eventCache:n,serverCache:e}}function Ad(n,e,t,o){return Qh(new Ha(e,t,o),n.serverCache)}function Bp(n,e,t,o){return Qh(n.eventCache,new Ha(e,t,o))}function Md(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Rd;class en{constructor(e,t=(()=>(Rd||(Rd=new Rr(Cp)),Rd))()){this.value=e,this.children=t}static fromObject(e){let t=new en(null);return Mn(e,(o,l)=>{t=t.set(new wt(o),l)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Vt(),value:this.value};if(At(e))return null;{const o=Tt(e),l=this.children.get(o);if(null!==l){const f=l.findRootMostMatchingPathAndValue(kt(e),t);return null!=f?{path:Zt(new wt(o),f.path),value:f.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(At(e))return this;{const t=Tt(e),o=this.children.get(t);return null!==o?o.subtree(kt(e)):new en(null)}}set(e,t){if(At(e))return new en(t,this.children);{const o=Tt(e),f=(this.children.get(o)||new en(null)).set(kt(e),t),_=this.children.insert(o,f);return new en(this.value,_)}}remove(e){if(At(e))return this.children.isEmpty()?new en(null):new en(null,this.children);{const t=Tt(e),o=this.children.get(t);if(o){const l=o.remove(kt(e));let f;return f=l.isEmpty()?this.children.remove(t):this.children.insert(t,l),null===this.value&&f.isEmpty()?new en(null):new en(this.value,f)}return this}}get(e){if(At(e))return this.value;{const t=Tt(e),o=this.children.get(t);return o?o.get(kt(e)):null}}setTree(e,t){if(At(e))return t;{const o=Tt(e),f=(this.children.get(o)||new en(null)).setTree(kt(e),t);let _;return _=f.isEmpty()?this.children.remove(o):this.children.insert(o,f),new en(this.value,_)}}fold(e){return this.fold_(Vt(),e)}fold_(e,t){const o={};return this.children.inorderTraversal((l,f)=>{o[l]=f.fold_(Zt(e,l),t)}),t(e,this.value,o)}findOnPath(e,t){return this.findOnPath_(e,Vt(),t)}findOnPath_(e,t,o){const l=!!this.value&&o(t,this.value);if(l)return l;if(At(e))return null;{const f=Tt(e),_=this.children.get(f);return _?_.findOnPath_(kt(e),Zt(t,f),o):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Vt(),t)}foreachOnPath_(e,t,o){if(At(e))return this;{this.value&&o(t,this.value);const l=Tt(e),f=this.children.get(l);return f?f.foreachOnPath_(kt(e),Zt(t,l),o):new en(null)}}foreach(e){this.foreach_(Vt(),e)}foreach_(e,t){this.children.inorderTraversal((o,l)=>{l.foreach_(Zt(e,o),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,o)=>{o.value&&e(t,o.value)})}}class Wr{constructor(e){this.writeTree_=e}static empty(){return new Wr(new en(null))}}function Nd(n,e,t){if(At(e))return new Wr(new en(t));{const o=n.writeTree_.findRootMostValueAndPath(e);if(null!=o){const l=o.path;let f=o.value;const _=lr(l,e);return f=f.updateChild(_,t),new Wr(n.writeTree_.set(l,f))}{const l=new en(t),f=n.writeTree_.setTree(e,l);return new Wr(f)}}}function Hp(n,e,t){let o=n;return Mn(t,(l,f)=>{o=Nd(o,Zt(e,l),f)}),o}function b_(n,e){if(At(e))return Wr.empty();{const t=n.writeTree_.setTree(e,new en(null));return new Wr(t)}}function jp(n,e){return null!=iu(n,e)}function iu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(lr(t.path,e)):null}function T_(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xt,(o,l)=>{e.push(new Rt(o,l))}):n.writeTree_.children.inorderTraversal((o,l)=>{null!=l.value&&e.push(new Rt(o,l.value))}),e}function ja(n,e){if(At(e))return n;{const t=iu(n,e);return new Wr(null!=t?new en(t):n.writeTree_.subtree(e))}}function $a(n){return n.writeTree_.isEmpty()}function oi(n,e){return S_(Vt(),n.writeTree_,e)}function S_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let o=null;return e.children.inorderTraversal((l,f)=>{".priority"===l?((0,N.hu)(null!==f.value,"Priority writes must always be leaf nodes"),o=f.value):t=S_(Zt(n,l),f,t)}),!t.getChild(n).isEmpty()&&null!==o&&(t=t.updateChild(Zt(n,".priority"),o)),t}}function Jh(n,e){return Zp(e,n)}function M_(n,e){if(n.snap)return g(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&g(Zt(n.path,t),e))return!0;return!1}function JE(n){return n.visible}function $p(n,e,t){let o=Wr.empty();for(let l=0;l<n.length;++l){const f=n[l];if(e(f)){const _=f.path;let D;if(f.snap)g(t,_)?(D=lr(t,_),o=Nd(o,D,f.snap)):g(_,t)&&(D=lr(_,t),o=Nd(o,Vt(),f.snap.getChild(D)));else{if(!f.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(g(t,_))D=lr(t,_),o=Hp(o,D,f.children);else if(g(_,t))if(D=lr(_,t),At(D))o=Hp(o,Vt(),f.children);else{const T=(0,N.DV)(f.children,Tt(D));if(T){const R=T.getChild(kt(D));o=Nd(o,Vt(),R)}}}}}return o}function N_(n,e,t,o,l){if(o||l){const f=ja(n.visibleWrites,e);return!l&&$a(f)?t:l||null!=t||jp(f,Vt())?oi($p(n.allWrites,function(R){return(R.visible||l)&&(!o||!~o.indexOf(R.writeId))&&(g(R.path,e)||g(e,R.path))},e),t||St.EMPTY_NODE):null}{const f=iu(n.visibleWrites,e);if(null!=f)return f;{const _=ja(n.visibleWrites,e);return $a(_)?t:null!=t||jp(_,Vt())?oi(_,t||St.EMPTY_NODE):null}}}function Xh(n,e,t,o){return N_(n.writeTree,n.treePath,e,t,o)}function Gp(n,e){return function XE(n,e,t){let o=St.EMPTY_NODE;const l=iu(n.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Xt,(f,_)=>{o=o.updateImmediateChild(f,_)}),o;if(t){const f=ja(n.visibleWrites,e);return t.forEachChild(Xt,(_,D)=>{const T=oi(ja(f,new wt(_)),D);o=o.updateImmediateChild(_,T)}),T_(f).forEach(_=>{o=o.updateImmediateChild(_.name,_.node)}),o}return T_(ja(n.visibleWrites,e)).forEach(_=>{o=o.updateImmediateChild(_.name,_.node)}),o}(n.writeTree,n.treePath,e)}function Wp(n,e,t,o){return function ms(n,e,t,o,l){(0,N.hu)(o||l,"Either existingEventSnap or existingServerSnap must exist");const f=Zt(e,t);if(jp(n.visibleWrites,f))return null;{const _=ja(n.visibleWrites,f);return $a(_)?l.getChild(t):oi(_,l.getChild(t))}}(n.writeTree,n.treePath,e,t,o)}function ef(n,e){return function P_(n,e){return iu(n.visibleWrites,e)}(n.writeTree,Zt(n.treePath,e))}function zp(n,e,t){return function eI(n,e,t,o){const l=Zt(e,t),f=iu(n.visibleWrites,l);return null!=f?f:o.isCompleteForChild(t)?oi(ja(n.visibleWrites,l),o.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bt(n,e){return Zp(Zt(n.treePath,e),n.writeTree)}function Zp(n,e){return{treePath:n,writeTree:e}}class O_{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,o=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const f=l.type;if("child_added"===t&&"child_removed"===f)this.changeMap.set(o,Wh(o,e.snapshotNode,l.snapshotNode));else if("child_removed"===t&&"child_added"===f)this.changeMap.delete(o);else if("child_removed"===t&&"child_changed"===f)this.changeMap.set(o,cc(o,l.oldSnap));else if("child_changed"===t&&"child_added"===f)this.changeMap.set(o,eu(o,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==f)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+l);this.changeMap.set(o,Wh(o,e.snapshotNode,l.oldSnap))}}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}const k_=new class x_{getCompleteChild(e){return null}getChildAfterChild(e,t,o){return null}};class qp{constructor(e,t,o=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=o}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const o=null!=this.optCompleteServerCache_?new Ha(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zp(this.writes_,e,o)}}getChildAfterChild(e,t,o){const l=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zo(this.viewCache_),f=function rI(n,e,t,o,l,f){return function tI(n,e,t,o,l,f,_){let D;const T=ja(n.visibleWrites,e),R=iu(T,Vt());if(null!=R)D=R;else{if(null==t)return[];D=oi(T,t)}if(D=D.withIndex(_),D.isEmpty()||D.isLeafNode())return[];{const V=[],B=_.getCompare(),Y=f?D.getReverseIteratorFrom(o,_):D.getIteratorFrom(o,_);let ge=Y.getNext();for(;ge&&V.length<l;)0!==B(ge,o)&&V.push(ge),ge=Y.getNext();return V}}(n.writeTree,n.treePath,e,t,o,l,f)}(this.writes_,l,t,1,o,e);return 0===f.length?null:f[0]}}function V_(n,e,t,o,l,f){const _=e.eventCache;if(null!=ef(o,t))return e;{let D,T;if(At(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const R=Zo(e),B=Gp(o,R instanceof St?R:St.EMPTY_NODE);D=n.filter.updateFullNode(e.eventCache.getNode(),B,f)}else{const R=Xh(o,Zo(e));D=n.filter.updateFullNode(e.eventCache.getNode(),R,f)}else{const R=Tt(t);if(".priority"===R){(0,N.hu)(1===Bi(t),"Can't have a priority with additional path components");const V=_.getNode();T=e.serverCache.getNode();const B=Wp(o,t,V,T);D=null!=B?n.filter.updatePriority(V,B):_.getNode()}else{const V=kt(t);let B;if(_.isCompleteForChild(R)){T=e.serverCache.getNode();const Y=Wp(o,t,_.getNode(),T);B=null!=Y?_.getNode().getImmediateChild(R).updateChild(V,Y):_.getNode().getImmediateChild(R)}else B=zp(o,R,e.serverCache);D=null!=B?n.filter.updateChild(_.getNode(),R,B,V,l,f):_.getNode()}}return Ad(e,D,_.isFullyInitialized()||At(t),n.filter.filtersNodes())}}function Kp(n,e,t,o,l,f,_,D){const T=e.serverCache;let R;const V=_?n.filter:n.filter.getIndexedFilter();if(At(t))R=V.updateFullNode(T.getNode(),o,null);else if(V.filtersNodes()&&!T.isFiltered()){const ge=T.getNode().updateChild(t,o);R=V.updateFullNode(T.getNode(),ge,null)}else{const ge=Tt(t);if(!T.isCompleteForPath(t)&&Bi(t)>1)return e;const Ae=kt(t),dt=T.getNode().getImmediateChild(ge).updateChild(Ae,o);R=".priority"===ge?V.updatePriority(T.getNode(),dt):V.updateChild(T.getNode(),ge,dt,Ae,k_,null)}const B=Bp(e,R,T.isFullyInitialized()||At(t),V.filtersNodes());return V_(n,B,t,l,new qp(l,B,f),D)}function tf(n,e,t,o,l,f,_){const D=e.eventCache;let T,R;const V=new qp(l,e,f);if(At(t))R=n.filter.updateFullNode(e.eventCache.getNode(),o,_),T=Ad(e,R,!0,n.filter.filtersNodes());else{const B=Tt(t);if(".priority"===B)R=n.filter.updatePriority(e.eventCache.getNode(),o),T=Ad(e,R,D.isFullyInitialized(),D.isFiltered());else{const Y=kt(t),ge=D.getNode().getImmediateChild(B);let Ae;if(At(Y))Ae=o;else{const rt=V.getCompleteChild(B);Ae=null!=rt?".priority"===Ys(Y)&&rt.getChild(yd(Y)).isEmpty()?rt:rt.updateChild(Y,o):St.EMPTY_NODE}T=ge.equals(Ae)?e:Ad(e,n.filter.updateChild(D.getNode(),B,Ae,Y,V,_),D.isFullyInitialized(),n.filter.filtersNodes())}}return T}function Yp(n,e){return n.eventCache.isCompleteForChild(e)}function U_(n,e,t){return t.foreach((o,l)=>{e=e.updateChild(o,l)}),e}function Pd(n,e,t,o,l,f,_,D){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let R,T=e;R=At(t)?o:new en(null).setTree(t,o);const V=e.serverCache.getNode();return R.children.inorderTraversal((B,Y)=>{if(V.hasChild(B)){const Ae=U_(0,e.serverCache.getNode().getImmediateChild(B),Y);T=Kp(n,T,new wt(B),Ae,l,f,_,D)}}),R.children.inorderTraversal((B,Y)=>{const ge=!e.serverCache.isCompleteForChild(B)&&null===Y.value;if(!V.hasChild(B)&&!ge){const rt=U_(0,e.serverCache.getNode().getImmediateChild(B),Y);T=Kp(n,T,new wt(B),rt,l,f,_,D)}}),T}class a0{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new zh(o.getIndex()),f=function kp(n){return n.loadsAllData()?new zh(n.getIndex()):n.hasLimit()?new Op(n):new dc(n)}(o);this.processor_=function F_(n){return{filter:n}}(f);const _=t.serverCache,D=t.eventCache,T=l.updateFullNode(St.EMPTY_NODE,_.getNode(),null),R=f.updateFullNode(St.EMPTY_NODE,D.getNode(),null),V=new Ha(T,_.isFullyInitialized(),l.filtersNodes()),B=new Ha(R,D.isFullyInitialized(),f.filtersNodes());this.viewCache_=Qh(B,V),this.eventGenerator_=new pc(this.query_)}get query(){return this.query_}}function B_(n,e){const t=Zo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!At(e)&&!t.getImmediateChild(Tt(e)).isEmpty())?t.getChild(e):null}function lI(n){return 0===n.eventRegistrations_.length}function ou(n,e,t){const o=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const l=n.query._path;n.eventRegistrations_.forEach(f=>{const _=f.createCancelEvent(t,l);_&&o.push(_)})}if(e){let l=[];for(let f=0;f<n.eventRegistrations_.length;++f){const _=n.eventRegistrations_[f];if(_.matches(e)){if(e.hasAnyCallback()){l=l.concat(n.eventRegistrations_.slice(f+1));break}}else l.push(_)}n.eventRegistrations_=l}else n.eventRegistrations_=[];return o}function H_(n,e,t,o){e.type===si.MERGE&&null!==e.source.queryId&&((0,N.hu)(Zo(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(Md(n.viewCache_),"Missing event cache, even though we have a server cache"));const l=n.viewCache_,f=function L_(n,e,t,o,l){const f=new O_;let _,D;if(t.type===si.OVERWRITE){const R=t;R.source.fromUser?_=tf(n,e,R.path,R.snap,o,l,f):((0,N.hu)(R.source.fromServer,"Unknown source."),D=R.source.tagged||e.serverCache.isFiltered()&&!At(R.path),_=Kp(n,e,R.path,R.snap,o,l,D,f))}else if(t.type===si.MERGE){const R=t;R.source.fromUser?_=function su(n,e,t,o,l,f,_){let D=e;return o.foreach((T,R)=>{const V=Zt(t,T);Yp(e,Tt(V))&&(D=tf(n,D,V,R,l,f,_))}),o.foreach((T,R)=>{const V=Zt(t,T);Yp(e,Tt(V))||(D=tf(n,D,V,R,l,f,_))}),D}(n,e,R.path,R.children,o,l,f):((0,N.hu)(R.source.fromServer,"Unknown source."),D=R.source.tagged||e.serverCache.isFiltered(),_=Pd(n,e,R.path,R.children,o,l,D,f))}else if(t.type===si.ACK_USER_WRITE){const R=t;_=R.revert?function o0(n,e,t,o,l,f){let _;if(null!=ef(o,t))return e;{const D=new qp(o,e,l),T=e.eventCache.getNode();let R;if(At(t)||".priority"===Tt(t)){let V;if(e.serverCache.isFullyInitialized())V=Xh(o,Zo(e));else{const B=e.serverCache.getNode();(0,N.hu)(B instanceof St,"serverChildren would be complete if leaf node"),V=Gp(o,B)}R=n.filter.updateFullNode(T,V,f)}else{const V=Tt(t);let B=zp(o,V,e.serverCache);null==B&&e.serverCache.isCompleteForChild(V)&&(B=T.getImmediateChild(V)),R=null!=B?n.filter.updateChild(T,V,B,kt(t),D,f):e.eventCache.getNode().hasChild(V)?n.filter.updateChild(T,V,St.EMPTY_NODE,kt(t),D,f):T,R.isEmpty()&&e.serverCache.isFullyInitialized()&&(_=Xh(o,Zo(e)),_.isLeafNode()&&(R=n.filter.updateFullNode(R,_,f)))}return _=e.serverCache.isFullyInitialized()||null!=ef(o,Vt()),Ad(e,R,_,n.filter.filtersNodes())}}(n,e,R.path,o,l,f):function Qp(n,e,t,o,l,f,_){if(null!=ef(l,t))return e;const D=e.serverCache.isFiltered(),T=e.serverCache;if(null!=o.value){if(At(t)&&T.isFullyInitialized()||T.isCompleteForPath(t))return Kp(n,e,t,T.getNode().getChild(t),l,f,D,_);if(At(t)){let R=new en(null);return T.getNode().forEachChild($r,(V,B)=>{R=R.set(new wt(V),B)}),Pd(n,e,t,R,l,f,D,_)}return e}{let R=new en(null);return o.foreach((V,B)=>{const Y=Zt(t,V);T.isCompleteForPath(Y)&&(R=R.set(V,T.getNode().getChild(Y)))}),Pd(n,e,t,R,l,f,D,_)}}(n,e,R.path,R.affectedTree,o,l,f)}else{if(t.type!==si.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);_=function oI(n,e,t,o,l){const f=e.serverCache;return V_(n,Bp(e,f.getNode(),f.isFullyInitialized()||At(t),f.isFiltered()),t,o,k_,l)}(n,e,t.path,o,f)}const T=f.getChanges();return function sI(n,e,t){const o=e.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),f=Md(n);(t.length>0||!n.eventCache.isFullyInitialized()||l&&!o.getNode().equals(f)||!o.getNode().getPriority().equals(f.getPriority()))&&t.push(Pp(Md(e)))}}(e,_,T),{viewCache:_,changes:T}}(n.processor_,l,e,t,o);return function iI(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,f.viewCache),(0,N.hu)(f.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=f.viewCache,Od(n,f.changes,f.viewCache.eventCache.getNode(),null)}function Od(n,e,t,o){return function Td(n,e,t,o){const l=[],f=[];return e.forEach(_=>{"child_changed"===_.type&&n.index_.indexedValueChanged(_.oldSnap,_.snapshotNode)&&f.push(function $E(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(_.childName,_.snapshotNode))}),Sd(n,l,"child_removed",e,o,t),Sd(n,l,"child_added",e,o,t),Sd(n,l,"child_moved",f,o,t),Sd(n,l,"child_changed",e,o,t),Sd(n,l,"value",e,o,t),l}(n.eventGenerator_,e,t,o?[o]:n.eventRegistrations_)}let nf,tg;class Jp{constructor(){this.views=new Map}}function Xp(n,e,t,o){const l=e.source.queryId;if(null!==l){const f=n.views.get(l);return(0,N.hu)(null!=f,"SyncTree gave us an op for an invalid query."),H_(f,e,t,o)}{let f=[];for(const _ of n.views.values())f=f.concat(H_(_,e,t,o));return f}}function $_(n,e,t,o,l){const _=n.views.get(e._queryIdentifier);if(!_){let D=Xh(t,l?o:null),T=!1;D?T=!0:o instanceof St?(D=Gp(t,o),T=!1):(D=St.EMPTY_NODE,T=!1);const R=Qh(new Ha(D,T,!1),new Ha(o,l,!1));return new a0(e,R)}return _}function eg(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function qo(n,e){let t=null;for(const o of n.views.values())t=t||B_(o,e);return t}function rf(n,e){return e._queryParams.loadsAllData()?sf(n):n.views.get(e._queryIdentifier)}function pI(n,e){return null!=rf(n,e)}function eo(n){return null!=sf(n)}function sf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let mI=1;class ng{constructor(e){this.listenProvider_=e,this.syncPointTree_=new en(null),this.pendingWriteTree_=function nI(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rg(n,e,t,o,l){return function n0(n,e,t,o,l){(0,N.hu)(o>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===l&&(l=!0),n.allWrites.push({path:e,snap:t,writeId:o,visible:l}),l&&(n.visibleWrites=Nd(n.visibleWrites,e,t)),n.lastWriteId=o}(n.pendingWriteTree_,e,t,o,l),l?Ga(n,new ru({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _s(n,e,t=!1){const o=function A_(n,e){for(let t=0;t<n.allWrites.length;t++){const o=n.allWrites[t];if(o.writeId===e)return o}return null}(n.pendingWriteTree_,e);if(function s0(n,e){const t=n.allWrites.findIndex(D=>D.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const o=n.allWrites[t];n.allWrites.splice(t,1);let l=o.visible,f=!1,_=n.allWrites.length-1;for(;l&&_>=0;){const D=n.allWrites[_];D.visible&&(_>=t&&M_(D,o.path)?l=!1:g(o.path,D.path)&&(f=!0)),_--}return!!l&&(f?(function R_(n){n.visibleWrites=$p(n.allWrites,JE,Vt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(o.snap?n.visibleWrites=b_(n.visibleWrites,o.path):Mn(o.children,T=>{n.visibleWrites=b_(n.visibleWrites,Zt(o.path,T))}),!0))}(n.pendingWriteTree_,e)){let f=new en(null);return null!=o.snap?f=f.set(Vt(),!0):Mn(o.children,_=>{f=f.set(new wt(_),!0)}),Ga(n,new bd(o.path,f,t))}return[]}function to(n,e,t){return Ga(n,new ru({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function au(n,e,t,o,l=!1){const f=e._path,_=n.syncPointTree_.get(f);let D=[];if(_&&("default"===e._queryIdentifier||pI(_,e))){const T=function fI(n,e,t,o){const l=e._queryIdentifier,f=[];let _=[];const D=eo(n);if("default"===l)for(const[T,R]of n.views.entries())_=_.concat(ou(R,t,o)),lI(R)&&(n.views.delete(T),R.query._queryParams.loadsAllData()||f.push(R.query));else{const T=n.views.get(l);T&&(_=_.concat(ou(T,t,o)),lI(T)&&(n.views.delete(l),T.query._queryParams.loadsAllData()||f.push(T.query)))}return D&&!eo(n)&&f.push(new(function dI(){return(0,N.hu)(nf,"Reference.ts has not been loaded"),nf}())(e._repo,e._path)),{removed:f,events:_}}(_,e,t,o);(function hI(n){return 0===n.views.size})(_)&&(n.syncPointTree_=n.syncPointTree_.remove(f));const R=T.removed;if(D=T.events,!l){const V=-1!==R.findIndex(Y=>Y._queryParams.loadsAllData()),B=n.syncPointTree_.findOnPath(f,(Y,ge)=>eo(ge));if(V&&!B){const Y=n.syncPointTree_.subtree(f);if(!Y.isEmpty()){const ge=function Ii(n){return n.fold((e,t,o)=>{if(t&&eo(t))return[sf(t)];{let l=[];return t&&(l=eg(t)),Mn(o,(f,_)=>{l=l.concat(_)}),l}})}(Y);for(let Ae=0;Ae<ge.length;++Ae){const rt=ge[Ae],dt=rt.query,jt=lg(n,rt);n.listenProvider_.startListening(_c(dt),Fd(n,dt),jt.hashFn,jt.onComplete)}}}!B&&R.length>0&&!o&&(V?n.listenProvider_.stopListening(_c(e),null):R.forEach(Y=>{const ge=n.queryToTagMap.get(Ld(Y));n.listenProvider_.stopListening(_c(Y),ge)}))}!function yI(n,e){for(let t=0;t<e.length;++t){const o=e[t];if(!o._queryParams.loadsAllData()){const l=Ld(o),f=n.queryToTagMap.get(l);n.queryToTagMap.delete(l),n.tagToQueryMap.delete(f)}}}(n,R)}return D}function og(n,e,t,o){const l=af(n,o);if(null!=l){const f=ug(l),_=f.path,D=f.queryId,T=lr(_,e);return cg(n,_,new ru(Up(D),T,t))}return[]}function kd(n,e,t,o=!1){const l=e._path;let f=null,_=!1;n.syncPointTree_.foreachOnPath(l,(Y,ge)=>{const Ae=lr(Y,l);f=f||qo(ge,Ae),_=_||eo(ge)});let T,D=n.syncPointTree_.get(l);D?(_=_||eo(D),f=f||qo(D,Vt())):(D=new Jp,n.syncPointTree_=n.syncPointTree_.set(l,D)),null!=f?T=!0:(T=!1,f=St.EMPTY_NODE,n.syncPointTree_.subtree(l).foreachChild((ge,Ae)=>{const rt=qo(Ae,Vt());rt&&(f=f.updateImmediateChild(ge,rt))}));const R=pI(D,e);if(!R&&!e._queryParams.loadsAllData()){const Y=Ld(e);(0,N.hu)(!n.queryToTagMap.has(Y),"View does not exist, but we have a tag");const ge=function u0(){return mI++}();n.queryToTagMap.set(Y,ge),n.tagToQueryMap.set(ge,Y)}let B=function G_(n,e,t,o,l,f){const _=$_(n,e,o,l,f);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,_),function uI(n,e){n.eventRegistrations_.push(e)}(_,t),function j_(n,e){const t=n.viewCache_.eventCache,o=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xt,(f,_)=>{o.push(eu(f,_))}),t.isFullyInitialized()&&o.push(Pp(t.getNode())),Od(n,o,t.getNode(),e)}(_,t)}(D,e,t,Jh(n.pendingWriteTree_,l),f,T);if(!R&&!_&&!o){const Y=rf(D,e);B=B.concat(function dg(n,e,t){const o=e._path,l=Fd(n,e),f=lg(n,t),_=n.listenProvider_.startListening(_c(e),l,f.hashFn,f.onComplete),D=n.syncPointTree_.subtree(o);if(l)(0,N.hu)(!eo(D.value),"If we're adding a query, it shouldn't be shadowed");else{const T=D.fold((R,V,B)=>{if(!At(R)&&V&&eo(V))return[sf(V).query];{let Y=[];return V&&(Y=Y.concat(eg(V).map(ge=>ge.query))),Mn(B,(ge,Ae)=>{Y=Y.concat(Ae)}),Y}});for(let R=0;R<T.length;++R){const V=T[R];n.listenProvider_.stopListening(_c(V),Fd(n,V))}}return _}(n,e,Y))}return B}function mc(n,e,t){const l=n.pendingWriteTree_,f=n.syncPointTree_.findOnPath(e,(_,D)=>{const R=qo(D,lr(_,e));if(R)return R});return N_(l,e,f,t,!0)}function Ga(n,e){return z_(e,n.syncPointTree_,null,Jh(n.pendingWriteTree_,Vt()))}function z_(n,e,t,o){if(At(n.path))return Z_(n,e,t,o);{const l=e.get(Vt());null==t&&null!=l&&(t=qo(l,Vt()));let f=[];const _=Tt(n.path),D=n.operationForChild(_),T=e.children.get(_);if(T&&D){const R=t?t.getImmediateChild(_):null,V=bt(o,_);f=f.concat(z_(D,T,R,V))}return l&&(f=f.concat(Xp(l,n,o,t))),f}}function Z_(n,e,t,o){const l=e.get(Vt());null==t&&null!=l&&(t=qo(l,Vt()));let f=[];return e.children.inorderTraversal((_,D)=>{const T=t?t.getImmediateChild(_):null,R=bt(o,_),V=n.operationForChild(_);V&&(f=f.concat(Z_(V,D,T,R)))}),l&&(f=f.concat(Xp(l,n,o,t))),f}function lg(n,e){const t=e.query,o=Fd(n,t);return{hashFn:()=>(function l0(n){return n.viewCache_.serverCache.getNode()}(e)||St.EMPTY_NODE).hash(),onComplete:l=>{if("ok"===l)return o?function sg(n,e,t){const o=af(n,t);if(o){const l=ug(o),f=l.path,_=l.queryId,D=lr(f,e);return cg(n,f,new Yh(Up(_),D))}return[]}(n,t._path,o):function xd(n,e){return Ga(n,new Yh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const f=function rd(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const o=new Error(n+" at "+e._path.toString()+": "+t);return o.code=n.toUpperCase(),o}(l,t);return au(n,t,null,f)}}}}function Fd(n,e){const t=Ld(e);return n.queryToTagMap.get(t)}function Ld(n){return n._path.toString()+"$"+n._queryIdentifier}function af(n,e){return n.tagToQueryMap.get(e)}function ug(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wt(n.substr(0,e))}}function cg(n,e,t){const o=n.syncPointTree_.get(e);return(0,N.hu)(o,"Missing sync point for query tag that we're tracking"),Xp(o,t,Jh(n.pendingWriteTree_,e),null)}function _c(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gI(){return(0,N.hu)(tg,"Reference.ts has not been loaded"),tg}())(n._repo,n._path):n}class lf{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lf(t)}node(){return this.node_}}class hg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zt(this.path_,e);return new hg(this.syncTree_,t)}node(){return mc(this.syncTree_,this.path_)}}const vI=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},q_=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?K_(n[".sv"],e,t):"object"==typeof n[".sv"]?EI(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},K_=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},EI=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const o=n.increment;"number"!=typeof o&&(0,N.hu)(!1,"Unexpected increment value: "+o);const l=e.node();if((0,N.hu)(null!==l&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const _=l.getValue();return"number"!=typeof _?o:_+o},Y_=function(n,e,t,o){return fg(e,new hg(t,n),o)},Vd=function(n,e,t){return fg(n,new lf(e),t)};function fg(n,e,t){const o=n.getPriority().val(),l=q_(o,e.getImmediateChild(".priority"),t);let f;if(n.isLeafNode()){const _=n,D=q_(_.getValue(),e,t);return D!==_.getValue()||l!==_.getPriority().val()?new uc(D,Rn(l)):n}{const _=n;return f=_,l!==_.getPriority().val()&&(f=f.updatePriority(new uc(l))),_.forEachChild(Xt,(D,T)=>{const R=fg(T,e.getImmediateChild(D),t);R!==T&&(f=f.updateImmediateChild(D,R))}),f}}class pg{constructor(e="",t=null,o={children:{},childCount:0}){this.name=e,this.parent=t,this.node=o}}function uf(n,e){let t=e instanceof wt?e:new wt(e),o=n,l=Tt(t);for(;null!==l;){const f=(0,N.DV)(o.node.children,l)||{children:{},childCount:0};o=new pg(l,o,f),t=kt(t),l=Tt(t)}return o}function lu(n){return n.node.value}function gg(n,e){n.node.value=e,_g(n)}function ys(n){return n.node.childCount>0}function cf(n,e){Mn(n.node.children,(t,o)=>{e(new pg(t,n,o))})}function Q_(n,e,t,o){t&&!o&&e(n),cf(n,l=>{Q_(l,e,!0,o)}),t&&o&&e(n)}function Ud(n){return new wt(null===n.parent?n.name:Ud(n.parent)+"/"+n.name)}function _g(n){null!==n.parent&&function II(n,e,t){const o=function mg(n){return void 0===lu(n)&&!ys(n)}(t),l=(0,N.r3)(n.node.children,e);o&&l?(delete n.node.children[e],n.node.childCount--,_g(n)):!o&&!l&&(n.node.children[e]=t.node,n.node.childCount++,_g(n))}(n.parent,n.name,n)}const yg=/[\[\].#$\/\u0000-\u001F\u007F]/,DI=/[\[\].#$\u0000-\u001F\u007F]/,vg=10485760,uu=function(n){return"string"==typeof n&&0!==n.length&&!yg.test(n)},df=function(n){return"string"==typeof n&&0!==n.length&&!DI.test(n)},ff=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ul(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},ji=function(n,e,t,o){o&&void 0===e||pf((0,N.gK)(n,"value"),e,t)},pf=function(n,e,t){const o=t instanceof wt?new c(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+M(o));if("function"==typeof e)throw new Error(n+"contains a function "+M(o)+" with contents = "+e.toString());if(Ul(e))throw new Error(n+"contains "+e.toString()+" "+M(o));if("string"==typeof e&&e.length>vg/3&&(0,N.ug)(e)>vg)throw new Error(n+"contains a string greater than "+vg+" utf8 bytes "+M(o)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let l=!1,f=!1;if(Mn(e,(_,D)=>{if(".value"===_)l=!0;else if(".priority"!==_&&".sv"!==_&&(f=!0,!uu(_)))throw new Error(n+" contains an invalid key ("+_+") "+M(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function h(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),w(n)})(o,_),pf(n,D,o),function y(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(o)}),l&&f)throw new Error(n+' contains ".value" child '+M(o)+" in addition to actual children.")}},Eg=function(n,e,t,o){if(o&&void 0===e)return;const l=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const f=[];Mn(e,(_,D)=>{const T=new wt(_);if(pf(l,D,Zt(t,T)),".priority"===Ys(T)&&!ff(D))throw new Error(l+"contains an invalid value for '"+T.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(T)}),function(n,e){let t,o;for(t=0;t<e.length;t++){o=e[t];const f=Qs(o);for(let _=0;_<f.length;_++)if((".priority"!==f[_]||_!==f.length-1)&&!uu(f[_]))throw new Error(n+"contains an invalid key ("+f[_]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Mp);let l=null;for(t=0;t<e.length;t++){if(o=e[t],null!==l&&g(l,o))throw new Error(n+"contains a path "+l.toString()+" that is ancestor of another path "+o.toString());l=o}}(l,f)},gf=function(n,e,t){if(!t||void 0!==e){if(Ul(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ff(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yc=function(n,e,t,o){if(!(o&&void 0===t||uu(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cu=function(n,e,t,o){if(!(o&&void 0===t||df(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ko=function(n,e,t,o){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cu(n,e,t,o)},zr=function(n,e){if(".info"===Tt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Bd=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!uu(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),df(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Hd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mf(n,e){let t=null;for(let o=0;o<e.length;o++){const l=e[o],f=l.getPath();null!==t&&!vd(f,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:f}),t.events.push(l)}t&&n.eventLists_.push(t)}function Ig(n,e,t){mf(n,t),ey(n,o=>vd(o,e))}function ai(n,e,t){mf(n,t),ey(n,o=>g(o,e)||g(e,o))}function ey(n,e){n.recursionDepth_++;let t=!0;for(let o=0;o<n.eventLists_.length;o++){const l=n.eventLists_[o];l&&(e(l.path)?(CI(n.eventLists_[o]),n.eventLists_[o]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function CI(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const o=t.getEventRunner();Na&&Yn("event: "+t.toString()),Dn(o)}}}const vc="repo_interrupt",wI=25;class c0{constructor(e,t,o,l){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wo(),this.transactionQueueTree_=new pg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ty(n){const t=n.infoData_.getNode(new wt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function jd(n){return vI({timestamp:ty(n)})}function ny(n,e,t,o,l){n.dataUpdateCount++;const f=new wt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let _=[];if(l)if(o){const T=(0,N.UI)(t,R=>Rn(R));_=function ag(n,e,t,o){const l=af(n,o);if(l){const f=ug(l),_=f.path,D=f.queryId,T=lr(_,e),R=en.fromObject(t);return cg(n,_,new zo(Up(D),T,R))}return[]}(n.serverSyncTree_,f,T,l)}else{const T=Rn(t);_=og(n.serverSyncTree_,f,T,l)}else if(o){const T=(0,N.UI)(t,R=>Rn(R));_=function ig(n,e,t){const o=en.fromObject(t);return Ga(n,new zo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,f,T)}else{const T=Rn(t);_=to(n.serverSyncTree_,f,T)}let D=f;_.length>0&&(D=Ic(n,f)),ai(n.eventQueue_,D,_)}function ry(n,e){Dg(n,"connected",e),!1===e&&function SI(n){Ec(n,"onDisconnectEvents");const e=jd(n),t=Wo();Lp(n.onDisconnect_,Vt(),(l,f)=>{const _=Y_(l,f,n.serverSyncTree_,e);tu(t,l,_)});let o=[];Lp(t,Vt(),(l,f)=>{o=o.concat(to(n.serverSyncTree_,l,f));const _=Yo(n,l);Ic(n,_)}),n.onDisconnect_=Wo(),ai(n.eventQueue_,Vt(),o)}(n)}function Dg(n,e,t){const o=new wt("/.info/"+e),l=Rn(t);n.infoData_.updateSnapshot(o,l);const f=to(n.infoSyncTree_,o,l);ai(n.eventQueue_,o,f)}function $d(n){return n.nextWriteId_++}function wg(n,e,t,o,l){Ec(n,"set",{path:e.toString(),value:t,priority:o});const f=jd(n),_=Rn(t,o),D=mc(n.serverSyncTree_,e),T=Vd(_,D,f),R=$d(n),V=rg(n.serverSyncTree_,e,T,R,!0);mf(n.eventQueue_,V),n.server_.put(e.toString(),_.val(!0),(Y,ge)=>{const Ae="ok"===Y;Ae||Vn("set at "+e+" failed: "+Y);const rt=_s(n.serverSyncTree_,R,!Ae);ai(n.eventQueue_,e,rt),du(0,l,Y,ge)});const B=Yo(n,e);Ic(n,B),ai(n.eventQueue_,B,[])}function AI(n,e,t){n.server_.onDisconnectCancel(e.toString(),(o,l)=>{"ok"===o&&wd(n.onDisconnect_,e),du(0,t,o,l)})}function iy(n,e,t,o){const l=Rn(t);n.server_.onDisconnectPut(e.toString(),l.val(!0),(f,_)=>{"ok"===f&&tu(n.onDisconnect_,e,l),du(0,o,f,_)})}function Tg(n,e,t){let o;o=".info"===Tt(e._path)?au(n.infoSyncTree_,e,t):au(n.serverSyncTree_,e,t),Ig(n.eventQueue_,e._path,o)}function Sg(n){n.persistentConnection_&&n.persistentConnection_.interrupt(vc)}function Ec(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Yn(t,...e)}function du(n,e,t,o){e&&Dn(()=>{if("ok"===t)e(null);else{const l=(t||"error").toUpperCase();let f=l;o&&(f+=": "+o);const _=new Error(f);_.code=l,e(_)}})}function ay(n,e,t){return mc(n.serverSyncTree_,e,t)||St.EMPTY_NODE}function hu(n,e=n.transactionQueueTree_){if(e||Qn(n,e),lu(e)){const t=vs(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(l=>0===l.status)&&function PI(n,e,t){const o=t.map(R=>R.currentWriteId),l=ay(n,e,o);let f=l;const _=l.hash();for(let R=0;R<t.length;R++){const V=t[R];(0,N.hu)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;const B=lr(e,V.path);f=f.updateChild(B,V.currentOutputSnapshotRaw)}const D=f.val(!0),T=e;n.server_.put(T.toString(),D,R=>{Ec(n,"transaction put response",{path:T.toString(),status:R});let V=[];if("ok"===R){const B=[];for(let Y=0;Y<t.length;Y++)t[Y].status=2,V=V.concat(_s(n.serverSyncTree_,t[Y].currentWriteId)),t[Y].onComplete&&B.push(()=>t[Y].onComplete(null,!0,t[Y].currentOutputSnapshotResolved)),t[Y].unwatcher();Qn(n,uf(n.transactionQueueTree_,e)),hu(n,n.transactionQueueTree_),ai(n.eventQueue_,e,V);for(let Y=0;Y<B.length;Y++)Dn(B[Y])}else{if("datastale"===R)for(let B=0;B<t.length;B++)t[B].status=3===t[B].status?4:0;else{Vn("transaction at "+T.toString()+" failed: "+R);for(let B=0;B<t.length;B++)t[B].status=4,t[B].abortReason=R}Ic(n,e)}},_)}(n,Ud(e),t)}else ys(e)&&cf(e,t=>{hu(n,t)})}function Ic(n,e){const t=ly(n,e),o=Ud(t);return function Ag(n,e,t){if(0===e.length)return;const o=[];let l=[];const _=e.filter(D=>0===D.status).map(D=>D.currentWriteId);for(let D=0;D<e.length;D++){const T=e[D],R=lr(t,T.path);let B,V=!1;if((0,N.hu)(null!==R,"rerunTransactionsUnderNode_: relativePath should not be null."),4===T.status)V=!0,B=T.abortReason,l=l.concat(_s(n.serverSyncTree_,T.currentWriteId,!0));else if(0===T.status)if(T.retryCount>=wI)V=!0,B="maxretry",l=l.concat(_s(n.serverSyncTree_,T.currentWriteId,!0));else{const Y=ay(n,T.path,_);T.currentInputSnapshot=Y;const ge=e[D].update(Y.val());if(void 0!==ge){pf("transaction failed: Data returned ",ge,T.path);let Ae=Rn(ge);"object"==typeof ge&&null!=ge&&(0,N.r3)(ge,".priority")||(Ae=Ae.updatePriority(Y.getPriority()));const dt=T.currentWriteId,jt=jd(n),Wt=Vd(Ae,Y,jt);T.currentOutputSnapshotRaw=Ae,T.currentOutputSnapshotResolved=Wt,T.currentWriteId=$d(n),_.splice(_.indexOf(dt),1),l=l.concat(rg(n.serverSyncTree_,T.path,Wt,T.currentWriteId,T.applyLocally)),l=l.concat(_s(n.serverSyncTree_,dt,!0))}else V=!0,B="nodata",l=l.concat(_s(n.serverSyncTree_,T.currentWriteId,!0))}ai(n.eventQueue_,t,l),l=[],V&&(e[D].status=2,setTimeout(e[D].unwatcher,Math.floor(0)),e[D].onComplete&&o.push("nodata"===B?()=>e[D].onComplete(null,!1,e[D].currentInputSnapshot):()=>e[D].onComplete(new Error(B),!1,null)))}Qn(n,n.transactionQueueTree_);for(let D=0;D<o.length;D++)Dn(o[D]);hu(n,n.transactionQueueTree_)}(n,vs(n,t),o),o}function ly(n,e){let t,o=n.transactionQueueTree_;for(t=Tt(e);null!==t&&void 0===lu(o);)o=uf(o,t),t=Tt(e=kt(e));return o}function vs(n,e){const t=[];return Dc(n,e,t),t.sort((o,l)=>o.order-l.order),t}function Dc(n,e,t){const o=lu(e);if(o)for(let l=0;l<o.length;l++)t.push(o[l]);cf(e,l=>{Dc(n,l,t)})}function Qn(n,e){const t=lu(e);if(t){let o=0;for(let l=0;l<t.length;l++)2!==t[l].status&&(t[o]=t[l],o++);t.length=o,gg(e,t.length>0?t:void 0)}cf(e,o=>{Qn(n,o)})}function Yo(n,e){const t=Ud(ly(n,e)),o=uf(n.transactionQueueTree_,e);return function J_(n,e,t){let o=t?n:n.parent;for(;null!==o;){if(e(o))return!0;o=o.parent}}(o,l=>{Cc(n,l)}),Cc(n,o),Q_(o,l=>{Cc(n,l)}),t}function Cc(n,e){const t=lu(e);if(t){const o=[];let l=[],f=-1;for(let _=0;_<t.length;_++)3===t[_].status||(1===t[_].status?((0,N.hu)(f===_-1,"All SENT items should be at beginning of queue."),f=_,t[_].status=3,t[_].abortReason="set"):((0,N.hu)(0===t[_].status,"Unexpected transaction status in abort"),t[_].unwatcher(),l=l.concat(_s(n.serverSyncTree_,t[_].currentWriteId,!0)),t[_].onComplete&&o.push(t[_].onComplete.bind(null,new Error("set"),!1,null))));-1===f?gg(e,void 0):t.length=f+1,ai(n.eventQueue_,Ud(e),l);for(let _=0;_<o.length;_++)Dn(o[_])}}const Wa=function(n,e){const t=wc(n),o=t.namespace;return"firebase.com"===t.domain&&Ei(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==t.domain&&Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ld(t.host,t.secure,o,"ws"===t.scheme||"wss"===t.scheme,e,"",o!==t.subdomain),path:new wt(t.pathString)}},wc=function(n){let e="",t="",o="",l="",f="",_=!0,D="https",T=443;if("string"==typeof n){let R=n.indexOf("//");R>=0&&(D=n.substring(0,R-1),n=n.substring(R+2));let V=n.indexOf("/");-1===V&&(V=n.length);let B=n.indexOf("?");-1===B&&(B=n.length),e=n.substring(0,Math.min(V,B)),V<B&&(l=function $i(n){let e="";const t=n.split("/");for(let o=0;o<t.length;o++)if(t[o].length>0){let l=t[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}(n.substring(V,B)));const Y=function Mg(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const o=t.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Vn(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,B)));R=e.indexOf(":"),R>=0?(_="https"===D||"wss"===D,T=parseInt(e.substring(R+1),10)):R=e.length;const ge=e.slice(0,R);if("localhost"===ge.toLowerCase())t="localhost";else if(ge.split(".").length<=2)t=ge;else{const Ae=e.indexOf(".");o=e.substring(0,Ae).toLowerCase(),t=e.substring(Ae+1),f=o}"ns"in Y&&(f=Y.ns)}return{host:e,port:T,domain:t,subdomain:o,secure:_,scheme:D,pathString:l,namespace:f}},fu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bc=function(){let n=0;const e=[];return function(t){const o=t===n;let l;n=t;const f=new Array(8);for(l=7;l>=0;l--)f[l]=fu.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let _=f.join("");if(o){for(l=11;l>=0&&63===e[l];l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)_+=fu.charAt(e[l]);return(0,N.hu)(20===_.length,"nextPushId: Length should be 20."),_}}();class pu{constructor(e,t,o,l){this.eventType=e,this.eventRegistration=t,this.snapshot=o,this.prevName=l}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}class gu{constructor(e,t,o){this.eventRegistration=e,this.error=t,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class za{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class mu{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return AI(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){zr("OnDisconnect.remove",this._path);const e=new N.BH;return iy(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){zr("OnDisconnect.set",this._path),ji("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return iy(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){zr("OnDisconnect.setWithPriority",this._path),ji("OnDisconnect.setWithPriority",e,this._path,!1),gf("OnDisconnect.setWithPriority",t,!1);const o=new N.BH;return function MI(n,e,t,o,l){const f=Rn(t,o);n.server_.onDisconnectPut(e.toString(),f.val(!0),(_,D)=>{"ok"===_&&tu(n.onDisconnect_,e,f),du(0,l,_,D)})}(this._repo,this._path,e,t,o.wrapCallback(()=>{})),o.promise}update(e){zr("OnDisconnect.update",this._path),Eg("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function RI(n,e,t,o){if((0,N.xb)(t))return Yn("onDisconnect().update() called with empty data.  Don't do anything."),void du(0,o,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(l,f)=>{"ok"===l&&Mn(t,(_,D)=>{const T=Rn(D);tu(n.onDisconnect_,Zt(e,_),T)}),du(0,o,l,f)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Jn{constructor(e,t,o,l){this._repo=e,this._path=t,this._queryParams=o,this._orderByCalled=l}get key(){return At(this._path)?null:Ys(this._path)}get ref(){return new Di(this._repo,this._path)}get _queryIdentifier(){const e=D_(this._queryParams),t=Vo(e);return"{}"===t?"default":t}get _queryObject(){return D_(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Jn))return!1;const t=this._repo===e._repo,o=vd(this._path,e._path);return t&&o&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ql(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Gd(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Qo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===$r){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Un)throw new Error(o);if("string"!=typeof e)throw new Error(l)}if(n.hasEnd()){if(n.getIndexEndName()!==fs)throw new Error(o);if("string"!=typeof t)throw new Error(l)}}else if(n.getIndex()===Xt){if(null!=e&&!ff(e)||null!=t&&!ff(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof E_||n.getIndex()===Gh,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Wd(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Di extends Jn{constructor(e,t){super(e,t,new xp,!1)}get parent(){const e=yd(this._path);return null===e?null:new Di(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Za{constructor(e,t,o){this._node=e,this.ref=t,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wt(e),o=qa(this.ref,e);return new Za(this._node.getChild(t),o,Xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,l)=>e(new Za(l,qa(this.ref,o),Xt)))}hasChild(e){const t=new wt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rg(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?qa(n._root,e):n._root}function Ng(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=Wa(e,n._repo.repoInfo_.nodeAdmin);Bd("refFromURL",t);const o=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&o.host!==n._repo.repoInfo_.host&&Ei("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+n._repo.repoInfo_.host+")"),Rg(n,t.path.toString())}function qa(n,e){return null===Tt((n=(0,N.m9)(n))._path)?Ko("child","path",e,!1):cu("child","path",e,!1),new Di(n._repo,Zt(n._path,e))}function _f(n,e){n=(0,N.m9)(n),zr("set",n._path),ji("set",e,n._path,!1);const t=new N.BH;return wg(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Pg(n,e){Eg("update",e,n._path,!1);const t=new N.BH;return function bg(n,e,t,o){Ec(n,"update",{path:e.toString(),value:t});let l=!0;const f=jd(n),_={};if(Mn(t,(D,T)=>{l=!1,_[D]=Y_(Zt(e,D),Rn(T),n.serverSyncTree_,f)}),l)Yn("update() called with empty data.  Don't do anything."),du(0,o,"ok",void 0);else{const D=$d(n),T=function _I(n,e,t,o){!function r0(n,e,t,o){(0,N.hu)(o>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:o,visible:!0}),n.visibleWrites=Hp(n.visibleWrites,e,t),n.lastWriteId=o}(n.pendingWriteTree_,e,t,o);const l=en.fromObject(t);return Ga(n,new zo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,l))}(n.serverSyncTree_,e,_,D);mf(n.eventQueue_,T),n.server_.merge(e.toString(),t,(R,V)=>{const B="ok"===R;B||Vn("update at "+e+" failed: "+R);const Y=_s(n.serverSyncTree_,D,!B),ge=Y.length>0?Ic(n,e):e;ai(n.eventQueue_,ge,Y),du(0,o,R,V)}),Mn(t,R=>{const V=Yo(n,Zt(e,R));Ic(n,V)}),ai(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Og(n){n=(0,N.m9)(n);const e=new za(()=>{}),t=new zd(e);return function Cg(n,e,t){const o=function W_(n,e){const t=e._path;let o=null;n.syncPointTree_.foreachOnPath(t,(R,V)=>{const B=lr(R,t);o=o||qo(V,B)});let l=n.syncPointTree_.get(t);l?o=o||qo(l,Vt()):(l=new Jp,n.syncPointTree_=n.syncPointTree_.set(t,l));const f=null!=o,_=f?new Ha(o,!0,!1):null;return function aI(n){return Md(n.viewCache_)}($_(l,e,Jh(n.pendingWriteTree_,e._path),f?_.getNode():St.EMPTY_NODE,f))}(n.serverSyncTree_,e);return null!=o?Promise.resolve(o):n.server_.get(e).then(l=>{const f=Rn(l).withIndex(e._queryParams.getIndex());let _;if(kd(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())_=to(n.serverSyncTree_,e._path,f);else{const D=Fd(n.serverSyncTree_,e);_=og(n.serverSyncTree_,e._path,f,D)}return ai(n.eventQueue_,e._path,_),au(n.serverSyncTree_,e,t,null,!0),f},l=>(Ec(n,"get for query "+(0,N.Wl)(e)+" failed: "+l),Promise.reject(new Error(l))))}(n._repo,n,t).then(o=>new Za(o,new Di(n._repo,n._path),n._queryParams.getIndex()))}class zd{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const o=t._queryParams.getIndex();return new pu("value",this,new Za(e.snapshotNode,new Di(t._repo,t._path),o))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gu(this,e,t):null}matches(e){return e instanceof zd&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class _u{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gu(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const o=qa(new Di(t._repo,t._path),e.childName),l=t._queryParams.getIndex();return new pu(e.type,this,new Za(e.snapshotNode,o,l),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _u&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ka(n,e,t,o,l){let f;if("object"==typeof o&&(f=void 0,l=o),"function"==typeof o&&(f=o),l&&l.onlyOnce){const T=t,R=(V,B)=>{Tg(n._repo,n,D),T(V,B)};R.userCallback=t.userCallback,R.context=t.context,t=R}const _=new za(t,f||void 0),D="value"===e?new zd(_):new _u(e,_);return function NI(n,e,t){let o;o=".info"===Tt(e._path)?kd(n.infoSyncTree_,e,t):kd(n.serverSyncTree_,e,t),Ig(n.eventQueue_,e._path,o)}(n._repo,n,D),()=>Tg(n._repo,n,D)}function Zd(n,e,t,o){return Ka(n,"value",e,t,o)}function cy(n,e,t,o){return Ka(n,"child_added",e,t,o)}function yf(n,e,t,o){return Ka(n,"child_changed",e,t,o)}function vf(n,e,t,o){return Ka(n,"child_moved",e,t,o)}function xg(n,e,t,o){return Ka(n,"child_removed",e,t,o)}function kg(n,e,t){let o=null;const l=t?new za(t):null;"value"===e?o=new zd(l):e&&(o=new _u(e,l)),Tg(n._repo,n,o)}class Ci{}class Fg extends Ci{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ji("endAt",this._value,e._path,!0);const t=Go(e._queryParams,this._value,this._key);if(Wd(t),Qo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jn(e._repo,e._path,t,e._orderByCalled)}}class Lg extends Ci{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ji("endBefore",this._value,e._path,!1);const t=function WE(n,e,t){let o;return o=Go(n,e,n.index_===$r||t?t:Un),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(Wd(t),Qo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jn(e._repo,e._path,t,e._orderByCalled)}}class fy extends Ci{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ji("startAt",this._value,e._path,!0);const t=Zh(e._queryParams,this._value,this._key);if(Wd(t),Qo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Jn(e._repo,e._path,t,e._orderByCalled)}}class gy extends Ci{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ji("startAfter",this._value,e._path,!1);const t=function I_(n,e,t){let o;return o=Zh(n,e,n.index_===$r||t?t:fs),o.startAfterSet_=!0,o}(e._queryParams,this._value,this._key);if(Wd(t),Qo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Jn(e._repo,e._path,t,e._orderByCalled)}}class _y extends Ci{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jn(e._repo,e._path,function GE(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class VI extends Ci{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jn(e._repo,e._path,function Fp(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class yy extends Ci{constructor(e){super(),this._path=e}_apply(e){Gd(e,"orderByChild");const t=new wt(this._path);if(At(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new E_(t),l=hc(e._queryParams,o);return Qo(l),new Jn(e._repo,e._path,l,!0)}}class vy extends Ci{_apply(e){Gd(e,"orderByKey");const t=hc(e._queryParams,$r);return Qo(t),new Jn(e._repo,e._path,t,!0)}}class Iy extends Ci{_apply(e){Gd(e,"orderByPriority");const t=hc(e._queryParams,Xt);return Qo(t),new Jn(e._repo,e._path,t,!0)}}class Cy extends Ci{_apply(e){Gd(e,"orderByValue");const t=hc(e._queryParams,Gh);return Qo(t),new Jn(e._repo,e._path,t,!0)}}class by extends Ci{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ji("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Fg(this._value,this._key)._apply(new fy(this._value,this._key)._apply(e))}}function li(n,...e){let t=(0,N.m9)(n);for(const o of e)t=o._apply(t);return t}(function cI(n){(0,N.hu)(!nf,"__referenceConstructor has already been defined"),nf=n})(Di),function gc(n){(0,N.hu)(!tg,"__referenceConstructor has already been defined"),tg=n}(Di);const Ya="FIREBASE_DATABASE_EMULATOR_HOST",Ug={};let Sy=!1;function Qa(n,e,t,o,l){let f=o||n.options.databaseURL;void 0===f&&(n.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yn("Using default host for project ",n.options.projectId),f=`${n.options.projectId}-default-rtdb.firebaseio.com`);let T,R,_=Wa(f,l),D=_.repoInfo;typeof process<"u"&&process.env&&(R=process.env[Ya]),R?(T=!0,f=`http://${R}?ns=${D.namespace}`,_=Wa(f,l),D=_.repoInfo):T=!_.repoInfo.secure;const V=l&&T?new xa(xa.OWNER):new Sh(n.name,n.options,e);Bd("Invalid Firebase Database URL",_),At(_.path)||Ei("Database URL must point to the root of a Firebase Database (not including a child path).");const B=function BI(n,e,t,o){let l=Ug[e.name];l||(l={},Ug[e.name]=l);let f=l[n.toURLString()];return f&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new c0(n,Sy,t,o),l[n.toURLString()]=f,f}(D,n,V,new Th(n.name,t));return new d0(B,n)}class d0{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function bI(n,e,t){if(n.stats_=rc(n.repoInfo_),n.forceRestClient_||Bl())n.server_=new fc(n.repoInfo_,(o,l,f,_)=>{ny(n,o,l,f,_)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ry(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(t)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}n.persistentConnection_=new Hi(n.repoInfo_,e,(o,l,f,_)=>{ny(n,o,l,f,_)},o=>{ry(n,o)},o=>{!function TI(n,e){Mn(e,(t,o)=>{Dg(n,t,o)})}(n,o)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(o=>{n.server_.refreshAuthToken(o)}),n.appCheckProvider_.addTokenChangeListener(o=>{n.server_.refreshAppCheckToken(o.token)}),n.statsReporter_=function Ph(n,e){const t=n.toString();return jl[t]||(jl[t]=e()),jl[t]}(n.repoInfo_,()=>new KE(n.stats_,n.server_)),n.infoData_=new qh,n.infoSyncTree_=new ng({startListening:(o,l,f,_)=>{let D=[];const T=n.infoData_.getNode(o._path);return T.isEmpty()||(D=to(n.infoSyncTree_,o._path,T),setTimeout(()=>{_("ok")},0)),D},stopListening:()=>{}}),Dg(n,"connected",!1),n.serverSyncTree_=new ng({startListening:(o,l,f,_)=>(n.server_.listen(o,f,l,(D,T)=>{const R=_(D,T);ai(n.eventQueue_,o._path,R)}),[]),stopListening:(o,l)=>{n.server_.unlisten(o,l)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Di(this._repo,Vt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Hg(n,e){const t=Ug[e];(!t||t[n.key]!==n)&&Ei(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Sg(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ei("Cannot call "+e+" on a deleted database.")}}function HI(){Wl.IS_TRANSPORT_INITIALIZED&&Vn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function jI(){HI(),gs.forceDisallow()}function $I(){HI(),Ks.forceDisallow(),gs.forceAllow()}function WI(n,e){Dp(n,e)}const Ry={".sv":"timestamp"};class Py{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Hi.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Hi.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function zI(n){ri(tn.SDK_VERSION),(0,tn._registerComponent)(new vt.wA("database",(e,{instanceIdentifier:t})=>Qa(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,tn.registerVersion)(yi,"0.14.4",n),(0,tn.registerVersion)(yi,"0.14.4","esm2017")}();const xy=new Vi.Yd("@firebase/database-compat"),KI=function(n){xy.warn("FIREBASE WARNING: "+n)};class no{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),o=>e(o)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),o=>e(o)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const o=this._delegate.set(e);return t&&o.then(()=>t(null),l=>t(l)),o}setWithPriority(e,t,o){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const l=this._delegate.setWithPriority(e,t);return o&&l.then(()=>o(null),f=>o(f)),l}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const l={};for(let f=0;f<e.length;++f)l[""+f]=e[f];e=l,KI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const o=this._delegate.update(e);return t&&o.then(()=>t(null),l=>t(l)),o}}class YI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ja{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cu("DataSnapshot.child","path",e,!1),new Ja(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cu("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ja(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Cn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class cn{constructor(e,t){this.database=e,this._delegate=t}on(e,t,o,l){var f;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const _=cn.getCancelAndContextArgs_("Query.on",o,l),D=(R,V)=>{t.call(_.context,new Ja(this.database,R),V)};D.userCallback=t,D.context=_.context;const T=null===(f=_.cancel)||void 0===f?void 0:f.bind(_.context);switch(e){case"value":return Zd(this._delegate,D,T),t;case"child_added":return cy(this._delegate,D,T),t;case"child_removed":return xg(this._delegate,D,T),t;case"child_changed":return yf(this._delegate,D,T),t;case"child_moved":return vf(this._delegate,D,T),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,o){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",o,!0),t){const l=()=>{};l.userCallback=t,l.context=o,kg(this._delegate,e,l)}else kg(this._delegate,e)}get(){return Og(this._delegate).then(e=>new Ja(this.database,e))}once(e,t,o,l){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const f=cn.getCancelAndContextArgs_("Query.once",o,l),_=new N.BH,D=(R,V)=>{const B=new Ja(this.database,R);t&&t.call(f.context,B,V),_.resolve(B)};D.userCallback=t,D.context=f.context;const T=R=>{f.cancel&&f.cancel.call(f.context,R),_.reject(R)};switch(e){case"value":Zd(this._delegate,D,T,{onlyOnce:!0});break;case"child_added":cy(this._delegate,D,T,{onlyOnce:!0});break;case"child_removed":xg(this._delegate,D,T,{onlyOnce:!0});break;case"child_changed":yf(this._delegate,D,T,{onlyOnce:!0});break;case"child_moved":vf(this._delegate,D,T,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return _.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new cn(this.database,li(this._delegate,function LI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _y(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new cn(this.database,li(this._delegate,function UI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new VI(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new cn(this.database,li(this._delegate,function Vg(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cu("orderByChild","path",n,!1),new yy(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new cn(this.database,li(this._delegate,function Ey(){return new vy}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new cn(this.database,li(this._delegate,function Dy(){return new Iy}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new cn(this.database,li(this._delegate,function wy(){return new Cy}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new cn(this.database,li(this._delegate,function py(n=null,e){return yc("startAt","key",e,!0),new fy(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new cn(this.database,li(this._delegate,function my(n,e){return yc("startAfter","key",e,!0),new gy(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new cn(this.database,li(this._delegate,function dy(n,e){return yc("endAt","key",e,!0),new Fg(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new cn(this.database,li(this._delegate,function hy(n,e){return yc("endBefore","key",e,!0),new Lg(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new cn(this.database,li(this._delegate,function Ty(n,e){return yc("equalTo","key",e,!0),new by(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof cn))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,o){const l={cancel:void 0,context:void 0};if(t&&o)l.cancel=t,(0,N.Wj)(e,"cancel",l.cancel,!0),l.context=o,(0,N.lb)(e,"context",l.context,!0);else if(t)if("object"==typeof t&&null!==t)l.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");l.cancel=t}return l}get ref(){return new Cn(this.database,new Di(this._delegate._repo,this._delegate._path))}}class Cn extends cn{constructor(e,t){super(e,new Jn(t._repo,t._path,new xp,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Cn(this.database,qa(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Cn(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Cn(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const o=_f(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const l={};for(let f=0;f<e.length;++f)l[""+f]=e[f];e=l,KI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zr("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const o=Pg(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}setWithPriority(e,t,o){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",o,!0);const l=function uy(n,e,t){if(zr("setWithPriority",n._path),ji("setWithPriority",e,n._path,!1),gf("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const o=new N.BH;return wg(n._repo,n._path,e,t,o.wrapCallback(()=>{})),o.promise}(this._delegate,e,t);return o&&l.then(()=>o(null),f=>o(f)),l}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function kI(n){return zr("remove",n._path),_f(n,null)}(this._delegate);return e&&t.then(()=>e(null),o=>e(o)),t}transaction(e,t,o){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,o){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const l=function Tc(n,e,t){var o;if(n=(0,N.m9)(n),zr("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const l=null===(o=t?.applyLocally)||void 0===o||o,f=new N.BH,D=Zd(n,()=>{});return function oy(n,e,t,o,l,f){Ec(n,"transaction on "+e);const _={path:e,update:t,onComplete:o,status:null,order:vp(),applyLocally:f,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},D=ay(n,e,void 0);_.currentInputSnapshot=D;const T=_.update(D.val());if(void 0===T)_.unwatcher(),_.currentOutputSnapshotRaw=null,_.currentOutputSnapshotResolved=null,_.onComplete&&_.onComplete(null,!1,_.currentInputSnapshot);else{pf("transaction failed: Data returned ",T,_.path),_.status=0;const R=uf(n.transactionQueueTree_,e),V=lu(R)||[];let B;V.push(_),gg(R,V),"object"==typeof T&&null!==T&&(0,N.r3)(T,".priority")?(B=(0,N.DV)(T,".priority"),(0,N.hu)(ff(B),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):B=(mc(n.serverSyncTree_,e)||St.EMPTY_NODE).getPriority().val();const Y=jd(n),ge=Rn(T,B),Ae=Vd(ge,D,Y);_.currentOutputSnapshotRaw=ge,_.currentOutputSnapshotResolved=Ae,_.currentWriteId=$d(n);const rt=rg(n.serverSyncTree_,e,Ae,_.currentWriteId,_.applyLocally);ai(n.eventQueue_,e,rt),hu(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(T,R,V)=>{let B=null;T?f.reject(T):(B=new Za(V,new Di(n._repo,n._path),Xt),f.resolve(new Py(R,B)))},D,l),f.promise}(this._delegate,e,{applyLocally:o}).then(f=>new YI(f.committed,new Ja(this.database,f.snapshot)));return t&&l.then(f=>t(null,f.committed,f.snapshot),f=>t(f,!1,null)),l}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const o=function FI(n,e){n=(0,N.m9)(n),zr("setPriority",n._path),gf("setPriority",e,!1);const t=new N.BH;return wg(n._repo,Zt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const o=function xI(n,e){n=(0,N.m9)(n),zr("push",n._path),ji("push",e,n._path,!0);const t=ty(n._repo),o=bc(t),l=qa(n,o),f=qa(n,o);let _;return _=null!=e?_f(f,e).then(()=>f):Promise.resolve(f),l.then=_.then.bind(_),l.catch=_.then.bind(_,void 0),l}(this._delegate,e),l=o.then(_=>new Cn(this.database,_));t&&l.then(()=>t(null),_=>t(_));const f=new Cn(this.database,o);return f.then=l.then.bind(l),f.catch=l.catch.bind(l,void 0),f}onDisconnect(){return zr("Reference.onDisconnect",this._delegate._path),new no(new mu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zr{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:jI,forceLongPolling:$I}}useEmulator(e,t,o={}){!function Ay(n,e,t,o={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ei("Cannot call useEmulator() after instance has already been initialized.");const l=n._repoInternal;let f;if(l.repoInfo_.nodeAdmin)o.mockUserToken&&Ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new xa(xa.OWNER);else if(o.mockUserToken){const _="string"==typeof o.mockUserToken?o.mockUserToken:(0,N.Sg)(o.mockUserToken,n.app.options.projectId);f=new xa(_)}!function Bg(n,e,t,o){n.repoInfo_=new ld(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),o&&(n.authTokenProvider_=o)}(l,e,t,f)}(this._delegate,e,t,o)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Cn){const t=Ng(this._delegate,e.toString());return new Cn(this,t)}{const t=Rg(this._delegate,e);return new Cn(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const o=Ng(this._delegate,e);return new Cn(this,o)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function Xn(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),Sg(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function My(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function sy(n){n.persistentConnection_&&n.persistentConnection_.resume(vc)}(n._repo)}(this._delegate)}}Zr.ServerValue={TIMESTAMP:function ZI(){return Ry}(),increment:n=>function Ny(n){return{".sv":{increment:n}}}(n)};var Ly=Object.freeze({__proto__:null,initStandalone:function Fy({app:n,url:e,version:t,customAuthImpl:o,namespace:l,nodeAdmin:f=!1}){ri(t);const _=new vt.zt("auth-internal",new vt.H0("database-standalone"));return _.setComponent(new vt.wA("auth-internal",()=>o,"PRIVATE")),{instance:new Zr(Qa(n,_,void 0,e,f),n),namespace:l}}});const QI=Zr.ServerValue;!function JI(n){n.INTERNAL.registerComponent(new vt.wA("database-compat",(e,{instanceIdentifier:t})=>{const o=e.getProvider("app-compat").getImmediate(),l=e.getProvider("database").getImmediate({identifier:t});return new Zr(l,o)},"PUBLIC").setServiceProps({Reference:Cn,Query:cn,Database:Zr,DataSnapshot:Ja,enableLogging:WI,INTERNAL:Ly,ServerValue:QI}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(qe.Z);var Vy=x(7579),Ef=x(5363),Gg=x(6063);class qd extends Vy.x{constructor(e=1/0,t=1/0,o=Gg.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:o,_infiniteTimeWindow:l,_timestampProvider:f,_windowTime:_}=this;t||(o.push(e),!l&&o.push(f.now()+_)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:l}=this,f=l.slice();for(let _=0;_<f.length&&!e.closed;_+=o?1:2)e.next(f[_]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:l}=this,f=(l?1:2)*e;if(e<1/0&&f<o.length&&o.splice(0,o.length-f),!l){const _=t.now();let D=0;for(let T=1;T<o.length&&o[T]<=_;T+=2)D=T;D&&o.splice(0,D+1)}}}function Uy(n,e,t){let o,l=!1;return n&&"object"==typeof n?({bufferSize:o=1/0,windowTime:e=1/0,refCount:l=!1,scheduler:t}=n):o=n??1/0,(0,Ar.B)({connector:()=>new qd(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}const Hy=(0,x(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Wg(n,e){return(0,mr.e)((t,o)=>{let l=0;t.subscribe((0,Pn.x)(o,f=>n.call(e,f,l++)&&o.next(f)))})}var jy=x(515);function $y(n=Gy){return(0,mr.e)((e,t)=>{let o=!1;e.subscribe((0,Pn.x)(t,l=>{o=!0,t.next(l)},()=>o?t.complete():t.error(n())))})}function Gy(){return new Hy}var Df=x(576);function Zg(n,e){return(0,Df.m)(e)?or(()=>n,e):or(()=>n)}var Cf=x(9468);x(259);const Kg=new Map,Zy={activated:!1,tokenObservers:[]},rD={initialized:!1,enabled:!1};function yr(n){return Kg.get(n)||Object.assign({},Zy)}function bf(){return rD}const Tf="https://content-firebaseappcheck.googleapis.com/v1",Yy="exchangeDebugToken",Yg={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Jy{constructor(e,t,o,l,f){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=o,this.lowerBound=l,this.upperBound=f,this.pending=null,this.nextErrorWaitInterval=l,l>f)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,et.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function Xy(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(o){t.retryPolicy(o)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Nr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function el(n,e){return tv.apply(this,arguments)}function tv(){return(tv=(0,et.Z)(function*({url:n,body:e},t){const o={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const B=yield l.getHeartbeatsHeader();B&&(o["X-Firebase-Client"]=B)}const f={method:"POST",body:JSON.stringify(e),headers:o};let _,D;try{_=yield fetch(n,f)}catch(B){throw Nr.create("fetch-network-error",{originalErrorMessage:B?.message})}if(200!==_.status)throw Nr.create("fetch-status-error",{httpStatus:_.status});try{D=yield _.json()}catch(B){throw Nr.create("fetch-parse-error",{originalErrorMessage:B?.message})}const T=D.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const R=1e3*Number(T[1]),V=Date.now();return{token:D.token,expireTimeMillis:V+R,issuedAtTimeMillis:V}})).apply(this,arguments)}const rv="firebase-app-check-database",b0=1,lt="firebase-app-check-store";let Af=null;function wn(n,e){return ov.apply(this,arguments)}function ov(){return(ov=(0,et.Z)(function*(n,e){const o=(yield function sv(){return Af||(Af=new Promise((n,e)=>{try{const t=indexedDB.open(rv,b0);t.onsuccess=o=>{n(o.target.result)},t.onerror=o=>{var l;e(Nr.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},t.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(lt,{keyPath:"compositeKey"})}}catch(t){e(Nr.create("storage-open",{originalErrorMessage:t?.message}))}}),Af)}()).transaction(lt,"readwrite"),f=o.objectStore(lt).put({compositeKey:n,value:e});return new Promise((_,D)=>{f.onsuccess=T=>{_()},o.onerror=T=>{var R;D(Nr.create("storage-set",{originalErrorMessage:null===(R=T.target.error)||void 0===R?void 0:R.message}))}})})).apply(this,arguments)}const Ac=new Vi.Yd("@firebase/app-check");function Of(n,e){return(0,N.hl)()?function sD(n,e){return wn(function av(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ac.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Mc(){return tm.apply(this,arguments)}function tm(){return(tm=(0,et.Z)(function*(){const n=bf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lD={error:"UNKNOWN_ERROR"};function xf(n){return N.US.encodeString(JSON.stringify(n),!1)}function Qd(n){return kf.apply(this,arguments)}function kf(){return(kf=(0,et.Z)(function*(n,e=!1){const t=n.app;!function Xa(n){if(!yr(n).activated)throw Nr.create("use-before-activation",{appName:n.name})}(t);const o=yr(t);let f,l=o.token;if(l&&!Nc(l)&&(o.token=void 0,l=void 0),!l){const T=yield o.cachedTokenPromise;T&&(Nc(T)?l=T:yield Of(t,void 0))}if(!e&&l&&Nc(l))return{token:l.token};let D,_=!1;if(function uv(){return bf().enabled}()){o.exchangeTokenPromise||(o.exchangeTokenPromise=el(function nv(n,e){const{projectId:t,appId:o,apiKey:l}=n.options;return{url:`${Tf}/projects/${t}/apps/${o}:${Yy}?key=${l}`,body:{debug_token:e}}}(t,yield Mc()),n.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),_=!0);const T=yield o.exchangeTokenPromise;return yield Of(t,T),o.token=T,{token:T.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),_=!0),l=yield yr(t).exchangeTokenPromise}catch(T){"appCheck/throttled"===T.code?Ac.warn(T.message):Ac.error(T),f=T}return l?f?D=Nc(l)?{token:l.token,internalError:f}:dv(f):(D={token:l.token},o.token=l,yield Of(t,l)):D=dv(f),_&&function cv(n,e){const t=yr(n).tokenObservers;for(const o of t)try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch{}}(t,D),D})).apply(this,arguments)}function nm(n,e){const t=yr(n),o=t.tokenObservers.filter(l=>l.next!==e);0===o.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=o}function Rc(n){const{app:e}=n,t=yr(e);let o=t.tokenRefresher;o||(o=function Jd(n){const{app:e}=n;return new Jy((0,et.Z)(function*(){let o;if(o=yr(e).token?yield Qd(n,!0):yield Qd(n),o.error)throw o.error;if(o.internalError)throw o.internalError}),()=>!0,()=>{const t=yr(e);if(t.token){let o=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,t.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},Yg.RETRIAL_MIN_WAIT,Yg.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=o),!o.isRunning()&&t.isTokenAutoRefreshEnabled&&o.start()}function Nc(n){return n.expireTimeMillis-Date.now()>0}function dv(n){return{token:xf(lD),error:n}}class hv{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)nm(this.app,t.next);return Promise.resolve()}}const om="app-check-internal";!function yD(){(0,tn._registerComponent)(new vt.wA("app-check",n=>function fv(n,e){return new hv(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(om).initialize()})),(0,tn._registerComponent)(new vt.wA(om,n=>function pv(n){return{getToken:e=>Qd(n,e),addTokenListener:e=>function Ff(n,e,t,o){const{app:l}=n,f=yr(l);if(f.tokenObservers=[...f.tokenObservers,{next:t,error:o,type:e}],f.token&&Nc(f.token)){const D=f.token;Promise.resolve().then(()=>{t({token:D.token}),Rc(n)}).catch(()=>{})}f.cachedTokenPromise.then(()=>Rc(n))}(n,"INTERNAL",e),removeTokenListener:e=>nm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tn.registerVersion)("@firebase/app-check","0.6.4")}();class Xd{constructor(){return(0,oe.vb)("app-check")}}typeof window<"u"&&window;var um=x(9260);const Cv=new p.OlP("angularfire2.auth.use-emulator"),wv=new p.OlP("angularfire2.auth.settings"),cm=new p.OlP("angularfire2.auth.tenant-id"),dm=new p.OlP("angularfire2.auth.langugage-code"),bv=new p.OlP("angularfire2.auth.use-device-language"),Tv=new p.OlP("angularfire.auth.persistence"),hm=(n,e,t,o,l,f,_,D)=>(0,Fe.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const T=e.runOutsideAngular(()=>n.auth());if(t&&T.useEmulator(...t),o&&(T.tenantId=o),T.languageCode=l,f&&T.useDeviceLanguage(),_)for(const[R,V]of Object.entries(_))T.settings[R]=V;return D&&T.setPersistence(D),T},[t,o,l,f,_,D]);let fm=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B,Y,ge){const Ae=new Vy.x,rt=ds(void 0).pipe((0,Ef.Q)(_.outsideAngular),or(()=>f.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,8971)))),(0,Kn.U)(()=>(0,Fe.on)(t,f,o)),(0,Kn.U)(dt=>hm(dt,f,D,R,V,B,T,Y)),Uy({bufferSize:1,refCount:!1}));if(function gl(n){return"server"===n}(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ds(null);else{rt.pipe(function zg(n,e){const t=arguments.length>=2;return o=>o.pipe(n?Wg((l,f)=>n(l,f,o)):I.y,function If(n){return n<=0?()=>jy.E:(0,mr.e)((e,t)=>{let o=0;e.subscribe((0,Pn.x)(t,l=>{++o<=n&&(t.next(l),n<=o&&t.complete())}))})}(1),t?function XI(n){return(0,mr.e)((e,t)=>{let o=!1;e.subscribe((0,Pn.x)(t,l=>{o=!0,t.next(l)},()=>{o||t.next(n),t.complete()}))})}(e):$y(()=>new Hy))}()).subscribe();const jt=rt.pipe(or(Nt=>Nt.getRedirectResult().then(Ir=>Ir,()=>null)),oe.iC,Uy({bufferSize:1,refCount:!1})),Wt=rt.pipe(or(Nt=>new Sr.y(Ir=>({unsubscribe:f.runOutsideAngular(()=>Nt.onAuthStateChanged(zi=>Ir.next(zi),zi=>Ir.error(zi),()=>Ir.complete()))})))),zt=rt.pipe(or(Nt=>new Sr.y(Ir=>({unsubscribe:f.runOutsideAngular(()=>Nt.onIdTokenChanged(zi=>Ir.next(zi),zi=>Ir.error(zi),()=>Ir.complete()))}))));this.authState=jt.pipe(Zg(Wt),(0,Cf.R)(_.outsideAngular),(0,Ef.Q)(_.insideAngular)),this.user=jt.pipe(Zg(zt),(0,Cf.R)(_.outsideAngular),(0,Ef.Q)(_.insideAngular)),this.idToken=this.user.pipe(or(Nt=>Nt?(0,ni.D)(Nt.getIdToken()):ds(null))),this.idTokenResult=this.user.pipe(or(Nt=>Nt?(0,ni.D)(Nt.getIdTokenResult()):ds(null))),this.credential=(0,Hr.T)(jt,Ae,this.authState.pipe(Wg(Nt=>!Nt))).pipe((0,Kn.U)(Nt=>Nt?.user?Nt:null),(0,Cf.R)(_.outsideAngular),(0,Ef.Q)(_.insideAngular))}return(0,Fe.pX)(this,rt,f,{spy:{apply:(dt,jt,Wt)=>{(dt.startsWith("signIn")||dt.startsWith("createUser"))&&Wt.then(zt=>Ae.next(zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fe.Dh),p.LFG(Fe.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(oe.HU),p.LFG(Cv,8),p.LFG(wv,8),p.LFG(cm,8),p.LFG(dm,8),p.LFG(bv,8),p.LFG(Tv,8),p.LFG(Xd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bD=(()=>{class n{constructor(){um.Z.registerVersion("angularfire",oe.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[fm]}),n})();function Vf(n){return null==n}function gm(n){return"function"==typeof n.set}function Uf(n,e){return gm(e)?e:n.ref(e)}function Sv(n,e){if(function TD(n){return"string"==typeof n}(n))return e.stringCase();if(gm(n))return e.firebaseCase();if(function pm(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function th(n,e,t="on",o=Yu.z){return new Sr.y(l=>{let f=null;return f=n[t](e,(_,D)=>{o.schedule(()=>{l.next({snapshot:_,prevKey:D})}),"once"===t&&o.schedule(()=>l.complete())},_=>{o.schedule(()=>l.error(_))}),"on"===t?{unsubscribe(){null!=f&&n.off(e,f)}}:{unsubscribe(){}}}).pipe((0,Kn.U)(l=>{const{snapshot:f,prevKey:_}=l;let D=null;return f.exists()&&(D=f.key),{type:e,payload:f,prevKey:_,key:D}}),(0,Ar.B)())}function Av(n,e){const t=n.length;for(let o=0;o<t;o++)if(n[o].payload.key===e)return o;return-1}function xc(n,e){const{payload:t,prevKey:o,key:l}=e,f=Av(n,l),_=function Mv(n,e){if(Vf(e))return 0;{const t=Av(n,e);return-1===t?n.length:t+1}}(n,o);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let D=null;e.payload.forEach(T=>{const R={payload:T,type:"value",prevKey:D,key:T.key};return D=T.key,n=[...n,R],!1})}return n;case"child_added":if(f>-1){const D=n[f-1];(D&&D.key||null)!==o&&(n=n.filter(T=>T.payload.key!==t.key)).splice(_,0,e)}else{if(null==o)return[e,...n];(n=n.slice()).splice(_,0,e)}return n;case"child_removed":return n.filter(D=>D.payload.key!==t.key);case"child_changed":return n.map(D=>D.payload.key===l?e:D);case"child_moved":if(f>-1){const D=n.splice(f,1)[0];return(n=n.slice()).splice(_,0,D),n}return n;default:return n}}function Rv(n){return(Vf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Nv(n,e,t){return function mm(n,e,t){return th(n,"value","once",t).pipe(or(o=>{const l=[ds(o)];return e.forEach(f=>l.push(th(n,f,"on",t))),(0,Hr.T)(...l).pipe(Ra(xc,[]))}),function C(n,e=I.y){return n=n??S,(0,mr.e)((t,o)=>{let l,f=!0;t.subscribe((0,Pn.x)(o,_=>{const D=e(_);(f||!n(l,D))&&(f=!1,l=D,o.next(_))}))})}())}(n,e=Rv(e),t)}function SD(n,e,t){const o=(e=Rv(e)).map(l=>th(n,l,"on",t));return(0,Hr.T)(...o)}function ym(n,e){return function(o,l){return Sv(o,{stringCase:()=>n.child(o)[e](l),firebaseCase:()=>o[e](l),snapshotCase:()=>o.ref[e](l)})}}function MD(n){return function(t){return t?Sv(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Bf(n,e){return function(){return th(n,"value","on",e)}}const xv=new p.OlP("angularfire2.realtimeDatabaseURL"),kv=new p.OlP("angularfire2.database.use-emulator");let vm=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B,Y,ge,Ae,rt,dt){this.schedulers=D;const jt=T,Wt=(0,Fe.on)(t,_,o);R&&hm(Wt,_,V,Y,ge,Ae,B,rt),this.database=(0,Fe.cc)(`${Wt.name}.database.${l}`,"AngularFireDatabase",Wt.name,()=>{const zt=_.runOutsideAngular(()=>Wt.database(l||void 0));return jt&&zt.useEmulator(...jt),zt},[jt])}list(t,o){const l=this.schedulers.ngZone.runOutsideAngular(()=>Uf(this.database,t));let f=l;return o&&(f=o(l)),function RD(n,e){const t=e.schedulers.outsideAngular,o=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ym(o,"update"),set:ym(o,"set"),push:l=>o.push(l),remove:MD(o),snapshotChanges:l=>Nv(n,l,t).pipe(oe.iC),stateChanges:l=>SD(n,l,t).pipe(oe.iC),auditTrail:l=>function Pv(n,e,t){return function AD(n,e,t){return function _m(n,e){return th(n,"value","on",e).pipe((0,Kn.U)(t=>{let o;return t.payload.forEach(l=>(o=l.key,!1)),{data:t,lastKeyToLoad:o}}))}(n,t).pipe(function z(...n){const e=(0,Ws.jO)(n);return(0,mr.e)((t,o)=>{const l=n.length,f=new Array(l);let _=n.map(()=>!1),D=!1;for(let T=0;T<l;T++)(0,ko.Xf)(n[T]).subscribe((0,Pn.x)(o,R=>{f[T]=R,!D&&!_[T]&&(_[T]=!0,(D=_.every(I.y))&&(_=null))},k.Z));t.subscribe((0,Pn.x)(o,T=>{if(D){const R=[T,...f];o.next(e?e(...R):R)}}))})}(e),(0,Kn.U)(([l,f])=>{const _=l.lastKeyToLoad,D=f.map(T=>T.key);return{actions:f,lastKeyToLoad:_,loadedKeys:D}}),function Z(n){return(0,mr.e)((e,t)=>{let o=!1,l=0;e.subscribe((0,Pn.x)(t,f=>(o||(o=!n(f,l++)))&&t.next(f)))})}(l=>-1===l.loadedKeys.indexOf(l.lastKeyToLoad)),(0,Kn.U)(l=>l.actions))}(n,SD(n,e).pipe(Ra((l,f)=>[...l,f],[])),t)}(n,l,t).pipe(oe.iC),valueChanges:(l,f)=>Nv(n,l,t).pipe((0,Kn.U)(D=>D.map(T=>f&&f.idField?Object.assign(Object.assign({},T.payload.val()),{[f.idField]:T.key}):T.payload.val())),oe.iC)}}(f,this)}object(t){return function Ov(n,e){return{query:n,snapshotChanges:()=>Bf(n,e.schedulers.outsideAngular)().pipe(oe.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Bf(n,e.schedulers.outsideAngular)().pipe(oe.iC,(0,Kn.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Uf(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fe.Dh),p.LFG(Fe.xv,8),p.LFG(xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(oe.HU),p.LFG(kv,8),p.LFG(fm,8),p.LFG(Cv,8),p.LFG(wv,8),p.LFG(cm,8),p.LFG(dm,8),p.LFG(bv,8),p.LFG(Tv,8),p.LFG(Xd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ND=(()=>{class n{constructor(){um.Z.registerVersion("angularfire",oe.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[vm]}),n})();const{isArray:PD}=Array,{getPrototypeOf:OD,prototype:xD,keys:Fv}=Object;const{isArray:kD}=Array;function LD(n,e){return n.reduce((t,o,l)=>(t[o]=e[l],t),{})}let Vv=(()=>{class n{constructor(t,o){this._renderer=t,this._elementRef=o,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),yu=(()=>{class n extends Vv{}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ro=new p.OlP("NgValueAccessor"),UD={provide:ro,useExisting:(0,p.Gpc)(()=>Em),multi:!0};let Em=(()=>{class n extends yu{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(f){return o.onChange(f.target.checked)})("blur",function(){return o.onTouched()})},features:[p._Bn([UD]),p.qOj]}),n})();const BD={provide:ro,useExisting:(0,p.Gpc)(()=>Hf),multi:!0},jD=new p.OlP("CompositionEventMode");let Hf=(()=>{class n extends Vv{constructor(t,o,l){super(t,o),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function HD(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(jD,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,o){1&t&&p.NdJ("input",function(f){return o._handleInput(f.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(f){return o._compositionEnd(f.target.value)})},features:[p._Bn([BD]),p.qOj]}),n})();const $D=!1;function Gi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const vr=new p.OlP("NgValidators"),Jo=new p.OlP("NgAsyncValidators");function WD(n){return Gi(n.value)?{required:!0}:null}function tl(n){return null}function Zv(n){return null!=n}function jf(n){const e=(0,p.QGY)(n)?(0,ni.D)(n):n;if($D&&!(0,p.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new p.vHH(-1101,t)}return e}function Es(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qv(n,e){return e.map(t=>t(n))}function kc(n){return n.map(e=>function Dm(n){return!n.validate}(e)?e:t=>e.validate(t))}function Cm(n){return null!=n?function Kv(n){if(!n)return null;const e=n.filter(Zv);return 0==e.length?null:function(t){return Es(qv(t,e))}}(kc(n)):null}function Yv(n){if(!n)return null;const e=n.filter(Zv);return 0==e.length?null:function(t){return function VD(...n){const e=(0,Ws.jO)(n),{args:t,keys:o}=function F0(n){if(1===n.length){const e=n[0];if(PD(e))return{args:e,keys:null};if(function Lv(n){return n&&"object"==typeof n&&OD(n)===xD}(e)){const t=Fv(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:n,keys:null}}(n),l=new Sr.y(f=>{const{length:_}=t;if(!_)return void f.complete();const D=new Array(_);let T=_,R=_;for(let V=0;V<_;V++){let B=!1;(0,ko.Xf)(t[V]).subscribe((0,Pn.x)(f,Y=>{B||(B=!0,R--),D[V]=Y},()=>T--,void 0,()=>{(!T||!B)&&(R||f.next(o?LD(o,D):D),f.complete())}))}});return e?l.pipe(function L0(n){return(0,Kn.U)(e=>function FD(n,e){return kD(e)?n(...e):n(e)}(n,e))}(e)):l}(qv(t,e).map(jf)).pipe((0,Kn.U)(Es))}}function Fc(n){return null!=n?Yv(kc(n)):null}function nh(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $f(n){return n?Array.isArray(n)?n:[n]:[]}function rh(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gf(n,e){const t=$f(e);return $f(n).forEach(l=>{rh(t,l)||t.push(l)}),t}function wm(n,e){return $f(e).filter(t=>!rh(n,t))}class Wf{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Er extends Wf{get formDirective(){return null}get path(){return null}}class Xo extends Wf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zf{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let eE=(()=>{class n extends zf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Xo,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,o){2&t&&p.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[p.qOj]}),n})(),tE=(()=>{class n extends zf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Er,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,o){2&t&&p.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[p.qOj]}),n})();function Pr(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const nE=!1,Zf="VALID",sh="INVALID",vu="PENDING",ea="DISABLED";function Am(n){return(qf(n)?n.validators:n)||null}function Rm(n,e){return(qf(e)?e.asyncValidators:n)||null}function qf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Kf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zf}get invalid(){return this.status===sh}get pending(){return this.status==vu}get disabled(){return this.status===ea}get enabled(){return this.status!==ea}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wm(e,this._rawAsyncValidators))}hasValidator(e){return rh(this._rawValidators,e)}hasAsyncValidator(e){return rh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ea,this.errors=null,this._forEachChild(o=>{o.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zf,this._forEachChild(o=>{o.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zf||this.status===vu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ea:Zf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vu,this._hasOwnPendingAsyncValidator=!0;const t=jf(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((o,l)=>o&&o._find(l),this)}getError(e,t){const o=t?this.get(t):this;return o&&o.errors?o.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?ea:this.errors?sh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vu)?vu:this._anyControlsHaveStatus(sh)?sh:Zf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Mm(n){return Array.isArray(n)?Cm(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function rE(n){return Array.isArray(n)?Fc(n):n||null}(this._rawAsyncValidators)}}class Yf extends Kf{constructor(e,t,o){super(Am(t),Rm(o,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,o={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function sE(n,e,t){n._forEachChild((o,l)=>{if(void 0===t[l])throw new p.vHH(1002,nE?function JD(n,e){return`Must supply a value for form control ${Pr(n,e)}`}(e,l):"")})})(this,!0,e),Object.keys(e).forEach(o=>{(function iE(n,e,t){const o=n.controls;if(!(e?Object.keys(o):o).length)throw new p.vHH(1e3,nE?function Lc(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!o[t])throw new p.vHH(1001,nE?function QD(n,e){return`Cannot find form control ${Pr(n,e)}`}(e,t):"")})(this,!0,o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(o=>{const l=this.controls[o];l&&l.patchValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((o,l)=>{o.reset(e[l],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,o)=>(e[o]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,o)=>!!o._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const o=this.controls[t];o&&e(o,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,o]of Object.entries(this.controls))if(this.contains(t)&&e(o))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,o,l)=>((o.enabled||this.disabled)&&(t[l]=o.value),t))}_reduceChildren(e,t){let o=e;return this._forEachChild((l,f)=>{o=t(o,l,f)}),o}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Eu=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Qf}),Qf="always";function io(n,e,t=Qf){oE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function $0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aE(n,e)})}(n,e),function tC(n,e){const t=(o,l)=>{e.valueAccessor.writeValue(o),l&&e.viewToModelUpdate(o)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Om(n,e){if(e.valueAccessor.setDisabledState){const t=o=>{e.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ah(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oE(n,e){const t=function Qv(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(nh(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const o=function Jv(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(nh(o,e.asyncValidator)):"function"==typeof o&&n.setAsyncValidators([o]);const l=()=>n.updateValueAndValidity();ah(e._rawValidators,l),ah(e._rawAsyncValidators,l)}function aE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const iC={provide:Er,useExisting:(0,p.Gpc)(()=>Fm)},lh=(()=>Promise.resolve())();let Fm=(()=>{class n extends Er{constructor(t,o,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Yf({},Cm(t),Fc(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){lh.then(()=>{const o=this._findContainer(t.path);t.control=o.registerControl(t.name,t.control),io(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){lh.then(()=>{const o=this._findContainer(t.path);o&&o.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){lh.then(()=>{const o=this._findContainer(t.path),l=new Yf({});(function xm(n,e){oE(n,e)})(l,t),o.registerControl(t.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){lh.then(()=>{const o=this._findContainer(t.path);o&&o.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,o){lh.then(()=>{this.form.get(t.path).setValue(o)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function km(n,e){n._syncPendingControls(),e.forEach(t=>{const o=t.control;"submit"===o.updateOn&&o._pendingChange&&(t.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(vr,10),p.Y36(Jo,10),p.Y36(Eu,8))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,o){1&t&&p.NdJ("submit",function(f){return o.onSubmit(f)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([iC]),p.qOj]}),n})();function Lm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function sC(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const oC=class extends Kf{constructor(e=null,t,o){super(Am(t),Rm(o,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=sC(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){sC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rp={provide:Xo,useExisting:(0,p.Gpc)(()=>ip)},Bm=(()=>Promise.resolve())();let ip=(()=>{class n extends Xo{constructor(t,o,l,f,_,D){super(),this._changeDetectorRef=_,this.callSetDisabledState=D,this.control=new oC,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(o),this._setAsyncValidators(l),this.valueAccessor=function np(n,e){if(!e)return null;let t,o,l;return Array.isArray(e),e.forEach(f=>{f.constructor===Hf?t=f:function nC(n){return Object.getPrototypeOf(n.constructor)===yu}(f)?o=f:l=f}),l||o||t||null}(0,f)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const o=t.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){io(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Bm.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const o=t.isDisabled.currentValue,l=0!==o&&(0,p.D6c)(o);Bm.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function oh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Er,9),p.Y36(vr,10),p.Y36(Jo,10),p.Y36(ro,10),p.Y36(p.sBO,8),p.Y36(Eu,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([rp]),p.qOj,p.TTD]}),n})(),lC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const uC={provide:ro,useExisting:(0,p.Gpc)(()=>dE),multi:!0};let cC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),Y0=(()=>{class n{constructor(){this._accessors=[]}add(t,o){this._accessors.push([t,o])}remove(t){for(let o=this._accessors.length-1;o>=0;--o)if(this._accessors[o][1]===t)return void this._accessors.splice(o,1)}select(t){this._accessors.forEach(o=>{this._isSameGroup(o,t)&&o[1]!==t&&o[1].fireUncheck(t.value)})}_isSameGroup(t,o){return!!t[0].control&&t[0]._parent===o._control._parent&&t[1].name===o.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:cC}),n})(),dE=(()=>{class n extends yu{constructor(t,o,l,f){super(t,o),this._registry=l,this._injector=f,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,p.f3M)(Eu,{optional:!0})??Qf}ngOnInit(){this._control=this._injector.get(Xo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Y0),p.Y36(p.zs3))},n.\u0275dir=p.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([uC]),p.qOj]}),n})();const Is={provide:ro,useExisting:(0,p.Gpc)(()=>sp),multi:!0};function pE(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let sp=(()=>{class n extends yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const l=pE(this._getOptionId(t),t);this.setProperty("value",l)}registerOnChange(t){this.onChange=o=>{this.value=this._getOptionValue(o),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),t))return o;return null}_getOptionValue(t){const o=function Zm(n){return n.split(":")[0]}(t);return this._optionMap.has(o)?this._optionMap.get(o):t}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(f){return o.onChange(f.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Is]),p.qOj]}),n})(),pC=(()=>{class n{constructor(t,o,l){this._element=t,this._renderer=o,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(sp,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Wi={provide:ro,useExisting:(0,p.Gpc)(()=>Km),multi:!0};function gE(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Km=(()=>{class n extends yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let o;if(this.value=t,Array.isArray(t)){const l=t.map(f=>this._getOptionId(f));o=(f,_)=>{f._setSelected(l.indexOf(_.toString())>-1)}}else o=(l,f)=>{l._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(t){this.onChange=o=>{const l=[],f=o.selectedOptions;if(void 0!==f){const _=f;for(let D=0;D<_.length;D++){const R=this._getOptionValue(_[D].value);l.push(R)}}else{const _=o.options;for(let D=0;D<_.length;D++){const T=_[D];if(T.selected){const R=this._getOptionValue(T.value);l.push(R)}}}this.value=l,t(l)}}_registerOption(t){const o=(this._idCounter++).toString();return this._optionMap.set(o,t),o}_getOptionId(t){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,t))return o;return null}_getOptionValue(t){const o=function qm(n){return n.split(":")[0]}(t);return this._optionMap.has(o)?this._optionMap.get(o)._value:t}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(f){return o.onChange(f.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Wi]),p.qOj]}),n})(),op=(()=>{class n{constructor(t,o,l){this._element=t,this._renderer=o,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(gE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Km,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Iu=(()=>{class n{constructor(){this._validator=tl}ngOnChanges(t){if(this.inputName in t){const o=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):tl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const mC={provide:vr,useExisting:(0,p.Gpc)(()=>Ds),multi:!0};let Ds=(()=>{class n extends Iu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>WD}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,o){2&t&&p.uIk("required",o._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([mC]),p.qOj]}),n})();const _C={provide:vr,useExisting:(0,p.Gpc)(()=>_E),multi:!0};let _E=(()=>{class n extends Iu{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function Ym(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function Gv(n){return e=>Gi(e.value)||!function Im(n){return null!=n&&"number"==typeof n.length}(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,o){2&t&&p.uIk("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},features:[p._Bn([_C]),p.qOj]}),n})();const EC={provide:vr,useExisting:(0,p.Gpc)(()=>r_),multi:!0};let r_=(()=>{class n extends Iu{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function zv(n){if(!n)return tl;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),o=>{if(Gi(o.value))return null;const l=o.value;return e.test(l)?null:{pattern:{requiredPattern:t,actualValue:l}}}}(t)}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(n)))(o||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,o){2&t&&p.uIk("pattern",o._enabled?o.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([EC]),p.qOj]}),n})(),CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[cC]}),n})(),i_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Eu,useValue:t.callSetDisabledState??Qf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[CC]}),n})();function EE(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"First Name is required"),p.qZA())}function MC(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Must Be Letters Only"),p.qZA())}function RC(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Minimum Length is Two"),p.qZA())}function nw(n,e){if(1&n&&(p.TgZ(0,"div",36),p.YNc(1,EE,2,0,"div",37),p.YNc(2,MC,2,0,"div",37),p.YNc(3,RC,2,0,"div",37),p.qZA()),2&n){p.oxw();const t=p.MAs(8);p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.required),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.pattern),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function rw(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Last Name is required"),p.qZA())}function iw(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Must Be Letters Only"),p.qZA())}function IE(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Minimum Length is Two"),p.qZA())}function NC(n,e){if(1&n&&(p.TgZ(0,"div",36),p.YNc(1,rw,2,0,"div",37),p.YNc(2,iw,2,0,"div",37),p.YNc(3,IE,2,0,"div",37),p.qZA()),2&n){p.oxw();const t=p.MAs(14);p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.required),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.pattern),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function PC(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Email is required"),p.qZA())}function OC(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Email Address Not in Valid Format"),p.qZA())}function sw(n,e){if(1&n&&(p.TgZ(0,"div",36),p.YNc(1,PC,2,0,"div",37),p.YNc(2,OC,2,0,"div",37),p.qZA()),2&n){p.oxw();const t=p.MAs(20);p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.required),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}function ow(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Password is Required"),p.qZA())}function aw(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Need at Least 8 Characters"),p.qZA())}function lw(n,e){if(1&n&&(p.TgZ(0,"div",36),p.YNc(1,ow,2,0,"div",37),p.YNc(2,aw,2,0,"div",37),p.qZA()),2&n){p.oxw();const t=p.MAs(26);p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.required),p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function uw(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Not in Valid Format"),p.qZA())}function xC(n,e){1&n&&p._UZ(0,"div")}function ap(n,e){if(1&n&&(p.TgZ(0,"div",36),p.YNc(1,uw,2,0,"div",37),p.YNc(2,xC,1,0,"div",38),p.qZA()),2&n){p.oxw();const t=p.MAs(32);p.xp6(1),p.Q6J("ngIf",null==t.errors?null:t.errors.pattern),p.xp6(1),p.Q6J("ngForIn",t)}}function kC(n,e){if(1&n&&(p.TgZ(0,"option"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t)}}function FC(n,e){if(1&n&&(p.TgZ(0,"p",3),p._UZ(1,"br")(2,"br"),p._uU(3),p._UZ(4,"br"),p._uU(5),p._UZ(6,"br"),p._uU(7),p._UZ(8,"br"),p._uU(9),p._UZ(10,"br"),p._uU(11),p._UZ(12,"br"),p._uU(13),p._UZ(14,"br"),p._uU(15),p.qZA()),2&n){const t=p.oxw();p.xp6(3),p.hij("",t.wholeName," "),p.xp6(2),p.hij(" ",t.email," "),p.xp6(2),p.hij(" ",t.pass," "),p.xp6(2),p.hij(" ",t.phone," "),p.xp6(2),p.hij(" ",t.dept," "),p.xp6(2),p.hij(" ",t.gender," "),p.xp6(2),p.hij(" ",t.subscribed," ")}}class Vc{constructor(e){this.db=e,this.wholeName="",this.email="",this.pass="",this.phone="",this.dept="",this.gender="",this.subscribed="",this.departments=["Accounting","Business","Computer Science","Maintanence"],this.all=[]}onSubmit(e){this.wholeName="Name: "+e.firstname+" "+e.lastname,this.email="Email: "+e.email,this.pass="Password: "+e.pw,this.phone="Phone: "+e.phone,this.dept="Department:  "+e.dept,this.gender="Gender: "+e.gender,this.subscribed="Subscription Status: "+(e.subscribed?"Yes":"No"),this.all=[this.wholeName,this.email,this.pass,this.phone,this.dept,this.gender,this.subscribed],this.saveFormData()}onChange(e){let t;-1==e.search("-")&&(t=e.slice(0,3)+"-"+e.slice(3,6)+"-"+e.slice(6),this.phonenumber=t)}saveFormData(){const e={name:this.wholeName,email:this.email,password:this.pass,phone:this.phone,department:this.dept,gender:this.gender,SUBscribed:this.subscribed};this.db.list("myTreeTrunks").push(e)}}Vc.\u0275fac=function(e){return new(e||Vc)(p.Y36(vm))},Vc.\u0275cmp=p.Xpm({type:Vc,selectors:[["app-form"]],decls:63,vars:9,consts:[[1,"outline"],[1,"myForm",3,"ngSubmit"],["f","ngForm"],[1,"mydiv"],[1,"form-group"],[1,"form-floating","mydiv"],["ngModel","","name","firstname","type","text","id","floatingInput","placeholder","First Name","required","","minlength","2","pattern","^[a-zA-Z]+",1,"form-control"],["FIRSTNAME","ngModel"],["for","floatingInput"],["class","alert alert-danger mydiv danger",4,"ngIf"],["ngModel","","name","lastname","type","text","id","floatingInput","placeholder","Last Name","required","","minlength","2","pattern","^[a-zA-Z]+",1,"form-control"],["LASTNAME","ngModel"],[1,"form-floating","mb-3","mydiv"],["ngModel","","name","email","type","email","id","floatingInput","placeholder","Email","required","","pattern","[a-z0-9]+@[a-z]+\\.[a-z]{2,3}",1,"form-control"],["EMAIL","ngModel"],["ngModel","","name","pw","type","password","id","floatingPassword","placeholder","Password","required","","minlength","8",1,"form-control"],["PW","ngModel"],["for","floatingPassword"],["name","phone","type","text","id","floatingInput","placeholder","Phone Number","pattern","[0-9]{3}[\\s\\-][0-9]{3}[\\s\\-]?[0-9]{4}$",1,"form-control",3,"ngModel","ngModelChange","change"],["phoneNumber","ngModel"],["ngModel","","name","dept","id","floatingSelect","aria-label","Floating label select example",1,"form-select"],["value","","selected","","disabled",""],[4,"ngFor","ngForOf"],[1,"form-group","mydiv"],["for","gender"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-outline-secondary"],["type","radio","ngModel","","name","gender","id","male","value","Male","autocomplete","off"],[1,"far","fa-circle"],["type","radio","ngModel","","name","gender","id","female","value","Female","autocomplete","off"],["for","Newsletter"],[1,"form-check","form-check-inline"],["ngModel","","name","subscribed","type","checkbox","id","check","value","YES",1,"form-check-input"],["for","male",1,"form-check-label"],[1,"mydiv","btn","btn-primary",3,"disabled"],["class","mydiv",4,"ngIf"],[1,"alert","alert-danger","mydiv","danger"],[4,"ngIf"],[4,"ngFor","ngForIn"]],template:function(e,t){if(1&e){const o=p.EpF();p.TgZ(0,"div",0)(1,"form",1,2),p.NdJ("ngSubmit",function(){p.CHM(o);const f=p.MAs(2);return p.KtG(t.onSubmit(f.value))}),p.TgZ(3,"h1",3),p._uU(4," Registration Form"),p.qZA(),p.TgZ(5,"div",4)(6,"div",5),p._UZ(7,"input",6,7),p.TgZ(9,"label",8),p._uU(10,"First Name"),p.qZA()(),p.YNc(11,nw,4,3,"div",9),p.TgZ(12,"div",5),p._UZ(13,"input",10,11),p.TgZ(15,"label",8),p._uU(16,"Last Name"),p.qZA()(),p.YNc(17,NC,4,3,"div",9),p.TgZ(18,"div",12),p._UZ(19,"input",13,14),p.TgZ(21,"label",8),p._uU(22,"Email"),p.qZA()(),p.YNc(23,sw,3,2,"div",9),p.TgZ(24,"div",5),p._UZ(25,"input",15,16),p.TgZ(27,"label",17),p._uU(28,"Password"),p.qZA()(),p.YNc(29,lw,3,2,"div",9),p.TgZ(30,"div",5)(31,"input",18,19),p.NdJ("ngModelChange",function(f){return t.phonenumber=f})("change",function(){p.CHM(o);const f=p.MAs(32);return p.KtG(t.onChange(f.value))}),p.qZA(),p.TgZ(33,"label",8),p._uU(34,"Phone Number"),p.qZA()(),p.YNc(35,ap,3,2,"div",9),p.TgZ(36,"div",5)(37,"select",20)(38,"option",21),p._uU(39,"Choose Your Department"),p.qZA(),p.YNc(40,kC,2,1,"option",22),p.qZA(),p.TgZ(41,"label",8),p._uU(42,"Department"),p.qZA()(),p.TgZ(43,"div",23),p._UZ(44,"label",24),p.TgZ(45,"div",25)(46,"label",26),p._UZ(47,"input",27)(48,"i",28),p._uU(49," Male "),p.qZA(),p.TgZ(50,"label",26),p._UZ(51,"input",29)(52,"i",28),p._uU(53," Female "),p.qZA()()(),p.TgZ(54,"div",23),p._UZ(55,"label",30),p.TgZ(56,"div",31),p._UZ(57,"input",32),p.TgZ(58,"label",33),p._uU(59,"Subscribe to our Newsletter"),p.qZA()()(),p.TgZ(60,"button",34),p._uU(61," Sign Up "),p.qZA(),p.YNc(62,FC,16,7,"p",35),p.qZA()()()}if(2&e){const o=p.MAs(2),l=p.MAs(8),f=p.MAs(14),_=p.MAs(20),D=p.MAs(26),T=p.MAs(32);p.xp6(11),p.Q6J("ngIf",l.touched&&!l.valid),p.xp6(6),p.Q6J("ngIf",f.touched&&!f.valid),p.xp6(6),p.Q6J("ngIf",_.touched&&!_.valid),p.xp6(6),p.Q6J("ngIf",D.touched&&!D.valid),p.xp6(2),p.Q6J("ngModel",t.phonenumber),p.xp6(4),p.Q6J("ngIf",T.touched&&!T.valid),p.xp6(5),p.Q6J("ngForOf",t.departments),p.xp6(20),p.Q6J("disabled",!o.valid),p.xp6(2),p.Q6J("ngIf",o.valid)}},dependencies:[kr,Ki,lC,pC,op,Hf,Em,sp,dE,eE,tE,Ds,_E,r_,ip,Fm],styles:[".mydiv[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto;width:70%;padding-bottom:15px}.danger[_ngcontent-%COMP%]{background-color:red;color:#8b0000;width:70%;margin-right:auto;margin-left:auto}.outline[_ngcontent-%COMP%]{border:1px solid black;margin-top:3%;width:50%;margin-left:auto;margin-right:auto;padding-bottom:30px;padding-top:30px;border-radius:10%}.outline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;margin-left:200px}",".btn-outline-secondary.active[_ngcontent-%COMP%], .btn-outline-secondary[_ngcontent-%COMP%]:active, .btn-outline-secondary[_ngcontent-%COMP%]:hover {\n          color: #fff;\n          background-color: #343a40;\n          border-color: #343a40;\n      }"]});class Cs{constructor(){this.title="lab4"}}Cs.\u0275fac=function(e){return new(e||Cs)},Cs.\u0275cmp=p.Xpm({type:Cs,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&p._UZ(0,"app-form")},dependencies:[Vc]});const lp="firebasestorage.googleapis.com",up="storageBucket";class dn extends N.ZR{constructor(e,t,o=0){super(CE(e),`Firebase Storage: ${t} (${CE(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var pn=(()=>{return(n=pn||(pn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",pn;var n})();function CE(n){return"storage/"+n}function wE(){return new dn(pn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function TE(){return new dn(pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l_(){return new dn(pn.CANCELED,"User canceled the upload/download.")}function ME(){return new dn(pn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Du(n){return new dn(pn.INVALID_ARGUMENT,n)}function cp(){return new dn(pn.APP_DELETED,"The Firebase app was deleted.")}function NE(n){return new dn(pn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ch(n,e){return new dn(pn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function dp(n){throw new dn(pn.INTERNAL_ERROR,"Internal error: "+n)}class qr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=qr.makeFromUrl(e,t)}catch{return new qr(e,"")}if(""===o.path)return o;throw function AE(n){return new dn(pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let o=null;const l="([A-Za-z0-9.\\-_]+)",D=new RegExp("^gs://"+l+"(/(.*))?$","i");function R(Nt){Nt.path_=decodeURIComponent(Nt.path)}const B=t.replace(/[.]/g,"\\."),zt=[{regex:D,indices:{bucket:1,path:3},postModify:function f(Nt){"/"===Nt.path.charAt(Nt.path.length-1)&&(Nt.path_=Nt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${l}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:R},{regex:new RegExp(`^https?://${t===lp?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${l}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:R}];for(let Nt=0;Nt<zt.length;Nt++){const Ir=zt[Nt],zi=Ir.regex.exec(e);if(zi){let p_=zi[Ir.indices.path];p_||(p_=""),o=new qr(zi[Ir.indices.bucket],p_),Ir.postModify(o);break}}if(null==o)throw function SE(n){return new dn(pn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return o}}class jC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function c_(n){return"string"==typeof n||n instanceof String}function WC(n){return d_()&&n instanceof Blob}function d_(){return typeof Blob<"u"&&!(0,N.UG)()}function PE(n,e,t,o){if(o<e)throw Du(`Invalid value for '${n}'. Expected ${e} or greater.`);if(o>t)throw Du(`Invalid value for '${n}'. Expected ${t} or less.`)}function nl(n,e,t){let o=e;return null==t&&(o=`https://${e}`),`${t}://${o}/v0${n}`}function zC(n){const e=encodeURIComponent;let t="?";for(const o in n)n.hasOwnProperty(o)&&(t=t+(e(o)+"=")+e(n[o])+"&");return t=t.slice(0,-1),t}var Cu=(()=>{return(n=Cu||(Cu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Cu;var n})();function ZC(n,e){const t=n>=500&&n<600,l=-1!==[408,429].indexOf(n),f=-1!==e.indexOf(n);return t||l||f}class gw{constructor(e,t,o,l,f,_,D,T,R,V,B,Y=!0){this.url_=e,this.method_=t,this.headers_=o,this.body_=l,this.successCodes_=f,this.additionalRetryCodes_=_,this.callback_=D,this.errorCallback_=T,this.timeout_=R,this.progressCallback_=V,this.connectionFactory_=B,this.retry=Y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ge,Ae)=>{this.resolve_=ge,this.reject_=Ae,this.start_()})}start_(){const t=(o,l)=>{const f=this.resolve_,_=this.reject_,D=l.connection;if(l.wasSuccessCode)try{const T=this.callback_(D,D.getResponse());!function hw(n){return void 0!==n}(T)?f():f(T)}catch(T){_(T)}else if(null!==D){const T=wE();T.serverResponse=D.getErrorText(),_(this.errorCallback_?this.errorCallback_(D,T):T)}else _(l.canceled?this.appDelete_?cp():l_():TE())};this.canceled_?t(0,new r(!1,null,!0)):this.backoffId_=function $C(n,e,t){let o=1,l=null,f=null,_=!1,D=0;function T(){return 2===D}let R=!1;function V(...dt){R||(R=!0,e.apply(null,dt))}function B(dt){l=setTimeout(()=>{l=null,n(ge,T())},dt)}function Y(){f&&clearTimeout(f)}function ge(dt,...jt){if(R)return void Y();if(dt)return Y(),void V.call(null,dt,...jt);if(T()||_)return Y(),void V.call(null,dt,...jt);let zt;o<64&&(o*=2),1===D?(D=2,zt=0):zt=1e3*(o+Math.random()),B(zt)}let Ae=!1;function rt(dt){Ae||(Ae=!0,Y(),!R&&(null!==l?(dt||(D=2),clearTimeout(l),B(0)):dt||(D=1)))}return B(0),f=setTimeout(()=>{_=!0,rt(!0)},t),rt}((o,l)=>{if(l)return void o(!1,new r(!1,null,!0));const f=this.connectionFactory_();this.pendingConnection_=f;const _=D=>{null!==this.progressCallback_&&this.progressCallback_(D.loaded,D.lengthComputable?D.total:-1)};null!==this.progressCallback_&&f.addUploadProgressListener(_),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&f.removeUploadProgressListener(_),this.pendingConnection_=null;const D=f.getErrorCode()===Cu.NO_ERROR,T=f.getStatus();if(!D||ZC(T,this.additionalRetryCodes_)&&this.retry){const V=f.getErrorCode()===Cu.ABORT;return void o(!1,new r(!1,null,V))}const R=-1!==this.successCodes_.indexOf(T);o(!0,new r(R,f))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function GC(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class r{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function v(...n){const e=function m(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}if(d_())return new Blob(n);throw new dn(pn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const A={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class O{constructor(e,t){this.data=e,this.contentType=t||null}}function $(n,e){switch(n){case A.RAW:return new O(q(e));case A.BASE64:case A.BASE64URL:return new O(Ne(n,e));case A.DATA_URL:return new O(function Je(n){const e=new Ue(n);return e.base64?Ne(A.BASE64,e.rest):function fe(n){let e;try{e=decodeURIComponent(n)}catch{throw ch(A.DATA_URL,"Malformed data URL.")}return q(e)}(e.rest)}(e),function gt(n){return new Ue(n).contentType}(e))}throw wE()}function q(n){const e=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(o=65536|(1023&o)<<10|1023&n.charCodeAt(++t),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function Ne(n,e){switch(n){case A.BASE64:{const l=-1!==e.indexOf("-"),f=-1!==e.indexOf("_");if(l||f)throw ch(n,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case A.BASE64URL:{const l=-1!==e.indexOf("+"),f=-1!==e.indexOf("/");if(l||f)throw ch(n,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function b(n){if(typeof atob>"u")throw function dw(n){return new dn(pn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(l){throw l.message.includes("polyfill")?l:ch(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let l=0;l<t.length;l++)o[l]=t.charCodeAt(l);return o}class Ue{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ch(A.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;null!=o&&(this.base64=function we(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}class ct{constructor(e,t){let o=0,l="";WC(e)?(this.data_=e,o=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(WC(this.data_)){const l=function E(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===l?null:new ct(l)}{const o=new Uint8Array(this.data_.buffer,e,t-e);return new ct(o,!0)}}static getBlob(...e){if(d_()){const t=e.map(o=>o instanceof ct?o.data_:o);return new ct(v.apply(null,t))}{const t=e.map(_=>c_(_)?$(A.RAW,_).data:_.data_);let o=0;t.forEach(_=>{o+=_.byteLength});const l=new Uint8Array(o);let f=0;return t.forEach(_=>{for(let D=0;D<_.length;D++)l[f++]=_[D]}),new ct(l,!0)}}uploadData(){return this.data_}}function hn(n){let e;try{e=JSON.parse(n)}catch{return null}return function pw(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function _w(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Jw(n,e){return e}class wi{constructor(e,t,o,l){this.server=e,this.local=t||e,this.writable=!!o,this.xform=l||Jw}}let OE=null;function h_(){if(OE)return OE;const n=[];n.push(new wi("bucket")),n.push(new wi("generation")),n.push(new wi("metageneration")),n.push(new wi("name","fullPath",!0));const t=new wi("name");t.xform=function e(f,_){return function Xw(n){return!c_(n)||n.length<2?n:_w(n)}(_)},n.push(t);const l=new wi("size");return l.xform=function o(f,_){return void 0!==_?Number(_):_},n.push(l),n.push(new wi("timeCreated")),n.push(new wi("updated")),n.push(new wi("md5Hash",null,!0)),n.push(new wi("cacheControl",null,!0)),n.push(new wi("contentDisposition",null,!0)),n.push(new wi("contentEncoding",null,!0)),n.push(new wi("contentLanguage",null,!0)),n.push(new wi("contentType",null,!0)),n.push(new wi("metadata","customMetadata",!0)),OE=n,OE}function yw(n,e,t){const o=hn(e);return null===o?null:function tb(n,e,t){const o={type:"file"},l=t.length;for(let f=0;f<l;f++){const _=t[f];o[_.local]=_.xform(o,e[_.server])}return function eb(n,e){Object.defineProperty(n,"ref",{get:function t(){const f=new qr(n.bucket,n.fullPath);return e._makeStorageReference(f)}})}(o,n),o}(n,o,t)}function qC(n,e){const t={},o=e.length;for(let l=0;l<o;l++){const f=e[l];f.writable&&(t[f.server]=n[f.local])}return JSON.stringify(t)}const vw="prefixes",Ew="items";class rl{constructor(e,t,o,l){this.url=e,this.method=t,this.handler=o,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function il(n){if(!n)throw wE()}function xE(n,e){return function t(o,l){const f=yw(n,l,e);return il(null!==f),f}}function hp(n){return function e(t,o){let l;return l=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function UC(){return new dn(pn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function VC(){return new dn(pn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bE(n){return new dn(pn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function BC(n){return new dn(pn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):o,l.status=t.getStatus(),l.serverResponse=o.serverResponse,l}}function f_(n){const e=hp(n);return function t(o,l){let f=e(o,l);return 404===o.getStatus()&&(f=function cw(n){return new dn(pn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),f.serverResponse=l.serverResponse,f}}function Iw(n,e,t){const l=nl(e.fullServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,D=new rl(l,"GET",xE(n,t),_);return D.errorHandler=f_(e),D}function ab(n,e,t,o,l){const f={};f.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(f.delimiter=t),o&&(f.pageToken=o),l&&(f.maxResults=l);const D=nl(e.bucketOnlyServerUrl(),n.host,n._protocol),R=n.maxOperationRetryTime,V=new rl(D,"GET",function sb(n,e){return function t(o,l){const f=function ib(n,e,t){const o=hn(t);return null===o?null:function rb(n,e,t){const o={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vw])for(const l of t[vw]){const f=l.replace(/\/$/,""),_=n._makeStorageReference(new qr(e,f));o.prefixes.push(_)}if(t[Ew])for(const l of t[Ew]){const f=n._makeStorageReference(new qr(e,l.name));o.items.push(f)}return o}(n,e,o)}(n,e,l);return il(null!==f),f}}(n,e.bucket),R);return V.urlParams=f,V.errorHandler=hp(e),V}function Cw(n,e,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=e.size(),o.contentType||(o.contentType=function db(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),o}class kE{constructor(e,t,o,l){this.current=e,this.total=t,this.finalized=!!o,this.metadata=l||null}}function KC(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{il(!1)}return il(!!t&&-1!==(e||["active"]).indexOf(t)),t}const gb={STATE_CHANGED:"state_changed"},bi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function YC(n){switch(n){case"running":case"pausing":case"canceling":return bi.RUNNING;case"paused":return bi.PAUSED;case"success":return bi.SUCCESS;case"canceled":return bi.CANCELED;default:return bi.ERROR}}class mb{constructor(e,t,o){if(function fw(n){return"function"==typeof n}(e)||null!=t||null!=o)this.next=e,this.error=t??void 0,this.complete=o??void 0;else{const f=e;this.next=f.next,this.error=f.error,this.complete=f.complete}}}function fp(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Tw=null;class _b{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,o,l){if(this.sent_)throw dp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==l)for(const f in l)l.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,l[f].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class yb extends _b{initXhr(){this.xhr_.responseType="text"}}function ta(){return Tw?Tw():new yb}class Sw{constructor(e,t,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=o,this._mappings=h_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{if(this._request=void 0,this._chunkMultiplier=1,l._codeEquals(pn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const f=this.isExponentialBackoffExpired();if(ZC(l.status,[])){if(!f)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();l=TE()}this._error=l,this._transition("error")}},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals(pn.CANCELED)?this.completeTransitions_():(this._error=l,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((l,f)=>{this._resolve=l,this._reject=f,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,o])=>{switch(this._state){case"running":e(t,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const o=function hb(n,e,t,o,l){const f=e.bucketOnlyServerUrl(),_=Cw(e,o,l),D={name:_.fullPath},T=nl(f,n.host,n._protocol),V={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":_.contentType,"Content-Type":"application/json; charset=utf-8"},B=qC(_,t),Ae=new rl(T,"POST",function ge(rt){let dt;KC(rt);try{dt=rt.getResponseHeader("X-Goog-Upload-URL")}catch{il(!1)}return il(c_(dt)),dt},n.maxUploadRetryTime);return Ae.urlParams=D,Ae.headers=V,Ae.body=B,Ae.errorHandler=hp(e),Ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(o,ta,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._uploadUrl=f,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,o)=>{const l=function fb(n,e,t,o){const T=new rl(t,"POST",function f(R){const V=KC(R,["active","final"]);let B=null;try{B=R.getResponseHeader("X-Goog-Upload-Size-Received")}catch{il(!1)}B||il(!1);const Y=Number(B);return il(!isNaN(Y)),new kE(Y,o.size(),"final"===V)},n.maxUploadRetryTime);return T.headers={"X-Goog-Upload-Command":"query"},T.errorHandler=hp(e),T}(this._ref.storage,this._ref._location,e,this._blob),f=this._ref.storage._makeRequest(l,ta,t,o);this._request=f,f.getPromise().then(_=>{this._request=void 0,this._updateProgress(_.current),this._needToFetchStatus=!1,_.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kE(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((l,f)=>{let _;try{_=function pb(n,e,t,o,l,f,_,D){const T=new kE(0,0);if(_?(T.current=_.current,T.total=_.total):(T.current=0,T.total=o.size()),o.size()!==T.total)throw function RE(){return new dn(pn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const R=T.total-T.current;let V=R;l>0&&(V=Math.min(V,l));const B=T.current;let ge="";ge=0===V?"finalize":R===V?"upload, finalize":"upload";const Ae={"X-Goog-Upload-Command":ge,"X-Goog-Upload-Offset":`${T.current}`},rt=o.slice(B,B+V);if(null===rt)throw ME();const zt=new rl(t,"POST",function dt(Nt,Ir){const zi=KC(Nt,["active","final"]),XC=T.current+V,p_=o.size();let e0;return e0="final"===zi?xE(e,f)(Nt,Ir):null,new kE(XC,p_,"final"===zi,e0)},e.maxUploadRetryTime);return zt.headers=Ae,zt.body=rt.uploadData(),zt.progressCallback=D||null,zt.errorHandler=hp(n),zt}(this._ref._location,this._ref.storage,o,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(T){return this._error=T,void this._transition("error")}const D=this._ref.storage._makeRequest(_,ta,l,f,!1);this._request=D,D.getPromise().then(T=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(T.current),T.finalized?(this._metadata=T.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const o=Iw(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(o,ta,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const o=function ww(n,e,t,o,l){const f=e.bucketOnlyServerUrl(),_={"X-Goog-Upload-Protocol":"multipart"},T=function D(){let zt="";for(let Nt=0;Nt<2;Nt++)zt+=Math.random().toString().slice(2);return zt}();_["Content-Type"]="multipart/related; boundary="+T;const R=Cw(e,o,l),V=qC(R,t),ge=ct.getBlob("--"+T+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+V+"\r\n--"+T+"\r\nContent-Type: "+R.contentType+"\r\n\r\n",o,"\r\n--"+T+"--");if(null===ge)throw ME();const Ae={name:R.fullPath},rt=nl(f,n.host,n._protocol),jt=n.maxUploadRetryTime,Wt=new rl(rt,"POST",xE(n,t),jt);return Wt.urlParams=Ae,Wt.headers=_,Wt.body=ge.uploadData(),Wt.errorHandler=hp(e),Wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(o,ta,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=l_(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=YC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,o,l){const f=new mb(t||void 0,o||void 0,l||void 0);return this._addObserver(f),()=>{this._removeObserver(f)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(YC(this._state)){case bi.SUCCESS:fp(this._resolve.bind(null,this.snapshot))();break;case bi.CANCELED:case bi.ERROR:fp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(YC(this._state)){case bi.RUNNING:case bi.PAUSED:e.next&&fp(e.next.bind(e,this.snapshot))();break;case bi.SUCCESS:e.complete&&fp(e.complete.bind(e))();break;default:e.error&&fp(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dh{constructor(e,t){this._service=e,this._location=t instanceof qr?t:qr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dh(e,t)}get root(){const e=new qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _w(this._location.path)}get storage(){return this._service}get parent(){const e=function xn(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new qr(this._location.bucket,e);return new dh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw NE(e)}}function Mw(n,e,t){return QC.apply(this,arguments)}function QC(){return(QC=(0,et.Z)(function*(n,e,t){const l=yield Rw(n,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),null!=l.nextPageToken&&(yield Mw(n,e,l.nextPageToken))})).apply(this,arguments)}function Rw(n,e){null!=e&&"number"==typeof e.maxResults&&PE("options.maxResults",1,1e3,e.maxResults);const t=e||{},o=ab(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(o,ta)}function Rb(n){n._throwIfRoot("getDownloadURL");const e=function lb(n,e,t){const l=nl(e.fullServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,D=new rl(l,"GET",function ob(n,e){return function t(o,l){const f=yw(n,l,e);return il(null!==f),function nb(n,e,t,o){const l=hn(e);if(null===l||!c_(l.downloadTokens))return null;const f=l.downloadTokens;if(0===f.length)return null;const _=encodeURIComponent;return f.split(",").map(R=>{const B=n.fullPath;return nl("/b/"+_(n.bucket)+"/o/"+_(B),t,o)+zC({alt:"media",token:R})})[0]}(f,l,n.host,n._protocol)}}(n,t),_);return D.errorHandler=f_(e),D}(n.storage,n._location,h_());return n.storage.makeRequestWithTokens(e,ta).then(t=>{if(null===t)throw function u_(){return new dn(pn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Nw(n,e){const t=function mw(n,e){const t=e.split("/").filter(o=>o.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),o=new qr(n._location.bucket,t);return new dh(n.storage,o)}function Pw(n,e){if(n instanceof JC){const t=n;if(null==t._bucket)throw function HC(){return new dn(pn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+up+"' property when initializing the app?")}();const o=new dh(t,t._bucket);return null!=e?Pw(o,e):o}return void 0!==e?Nw(n,e):n}function xb(n,e){if(e&&function Pb(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof JC)return function Ob(n,e){return new dh(n,e)}(n,e);throw Du("To use ref(service, url), the first argument must be a Storage instance.")}return Pw(n,e)}function Ow(n,e){const t=e?.[up];return null==t?null:qr.makeFromBucketSpec(t,n)}class JC{constructor(e,t,o,l,f){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=l,this._firebaseVersion=f,this._bucket=null,this._host=lp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=l?qr.makeFromBucketSpec(l,this._host):Ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?qr.makeFromBucketSpec(this._url,e):Ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,et.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const o=yield t.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,et.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dh(this,e)}_makeRequest(e,t,o,l,f=!0){if(this._deleted)return new jC(cp());{const _=function d(n,e,t,o,l,f,_=!0){const D=zC(n.urlParams),T=n.url+D,R=Object.assign({},n.headers);return function a(n,e){e&&(n["X-Firebase-GMPID"]=e)}(R,e),function i(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(R,t),function s(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(R,f),function u(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(R,o),new gw(T,n.method,R,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,l,_)}(e,this._appId,o,l,t,this._firebaseVersion,f);return this._requests.add(_),_.getPromise().then(()=>this._requests.delete(_),()=>this._requests.delete(_)),_}}makeRequestWithTokens(e,t){var o=this;return(0,et.Z)(function*(){const[l,f]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(e,t,l,f).getPromise()})()}}const xw="@firebase/storage";function Lw(n,e){return xb(n=(0,N.m9)(n),e)}function Gb(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),l=n.getProvider("app-check-internal");return new JC(t,o,l,e,tn.SDK_VERSION)}!function Wb(){(0,tn._registerComponent)(new vt.wA("storage",Gb,"PUBLIC").setMultipleInstances(!0)),(0,tn.registerVersion)(xw,"0.11.2",""),(0,tn.registerVersion)(xw,"0.11.2","esm2017")}();class FE{constructor(e,t,o){this._delegate=e,this.task=t,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Uw{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(o=>{if(e)return e(new FE(o,this,this._ref))},t)}on(e,t,o,l){let f;return t&&(f="function"==typeof t?_=>t(new FE(_,this,this._ref)):{next:t.next?_=>t.next(new FE(_,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,f,o||void 0,l||void 0)}}class Bw{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new wu(e,this._service))}get items(){return this._delegate.items.map(e=>new wu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class wu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function $b(n,e){return Nw(n,e)}(this._delegate,e);return new wu(t,this.storage)}get root(){return new wu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new wu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Uw(function Fb(n,e,t){return function bb(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Sw(n,new ct(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=A.RAW,o){this._throwIfRoot("putString");const l=$(t,e),f=Object.assign({},o);return null==f.contentType&&null!=l.contentType&&(f.contentType=l.contentType),new Uw(new Sw(this._delegate,new ct(l.data,!0),f),this)}listAll(){return function Bb(n){return function Sb(n){const e={prefixes:[],items:[]};return Mw(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new Bw(e,this.storage))}list(e){return function Ub(n,e){return Rw(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Bw(t,this.storage))}getMetadata(){return function Lb(n){return function Ab(n){n._throwIfRoot("getMetadata");const e=Iw(n.storage,n._location,h_());return n.storage.makeRequestWithTokens(e,ta)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function Vb(n,e){return function Mb(n,e){n._throwIfRoot("updateMetadata");const t=function ub(n,e,t,o){const f=nl(e.fullServerUrl(),n.host,n._protocol),D=qC(t,o),R=n.maxOperationRetryTime,V=new rl(f,"PATCH",xE(n,o),R);return V.headers={"Content-Type":"application/json; charset=utf-8"},V.body=D,V.errorHandler=f_(e),V}(n.storage,n._location,e,h_());return n.storage.makeRequestWithTokens(t,ta)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Hb(n){return Rb(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function jb(n){return function Nb(n){n._throwIfRoot("deleteObject");const e=function cb(n,e){const o=nl(e.fullServerUrl(),n.host,n._protocol),D=new rl(o,"DELETE",function _(T,R){},n.maxOperationRetryTime);return D.successCodes=[200,204],D.errorHandler=f_(e),D}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ta)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw NE(e)}}class Hw{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(jw(e))throw Du("ref() expected a child path but got a URL, use refFromURL instead.");return new wu(Lw(this._delegate,e),this)}refFromURL(e){if(!jw(e))throw Du("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qr.makeFromUrl(e,this._delegate.host)}catch{throw Du("refFromUrl() expected a valid full URL but got an invalid one.")}return new wu(Lw(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,o={}){!function Vw(n,e,t,o={}){!function kb(n,e,t,o={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:l}=o;l&&(n._overrideAuthToken="string"==typeof l?l:(0,N.Sg)(l,n.app.options.projectId))}(n,e,t,o)}(this._delegate,e,t,o)}}function jw(n){return/^[A-Za-z]+:\/\//.test(n)}function Kb(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),o=n.getProvider("storage").getImmediate({identifier:e});return new Hw(t,o)}function $w(n){const e=function Qb(n){return new Sr.y(e=>{const t=_=>e.next(_);t(n.snapshot);const f=n.on("state_changed",t);return n.then(_=>{t(_),e.complete()},_=>{t(n.snapshot),(_=>{e.error(_)})(_)}),function(){f()}}).pipe(function DE(n,e=Yu.z){return(0,mr.e)((t,o)=>{let l=null,f=null,_=null;const D=()=>{if(l){l.unsubscribe(),l=null;const R=f;f=null,o.next(R)}};function T(){const R=_+n,V=e.now();if(V<R)return l=this.schedule(void 0,R-V),void o.add(l);D()}t.subscribe((0,Pn.x)(o,R=>{f=R,_=e.now(),l||(l=e.schedule(T,n),o.add(l))},()=>{D(),o.complete()},void 0,()=>{f=l=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Kn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LE(n){return{getDownloadURL:()=>ds(void 0).pipe(oe.fc,or(()=>n.getDownloadURL()),oe.iC),getMetadata:()=>ds(void 0).pipe(oe.fc,or(()=>n.getMetadata()),oe.iC),delete:()=>(0,ni.D)(n.delete()),child:e=>LE(n.child(e)),updateMetadata:e=>(0,ni.D)(n.updateMetadata(e)),put:(e,t)=>$w(n.put(e,t)),putString:(e,t,o)=>$w(n.putString(e,t,o)),list:e=>(0,ni.D)(n.list(e)),listAll:()=>(0,ni.D)(n.listAll())}}!function Yb(n){const e={TaskState:bi,TaskEvent:gb,StringFormat:A,Storage:Hw,Reference:wu};n.INTERNAL.registerComponent(new vt.wA("storage-compat",Kb,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(qe.Z);const Jb=new p.OlP("angularfire2.storageBucket"),Xb=new p.OlP("angularfire2.storage.maxUploadRetryTime"),eT=new p.OlP("angularfire2.storage.maxOperationRetryTime"),tT=new p.OlP("angularfire2.storage.use-emulator");let nT=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B){const Y=(0,Fe.on)(t,_,o);this.storage=(0,Fe.cc)(`${Y.name}.storage.${l}`,"AngularFireStorage",Y.name,()=>{const ge=_.runOutsideAngular(()=>Y.storage(l||void 0)),Ae=V;return Ae&&ge.useEmulator(...Ae),T&&ge.setMaxUploadRetryTime(T),R&&ge.setMaxOperationRetryTime(R),ge},[T,R])}ref(t){return LE(this.storage.ref(t))}refFromURL(t){return LE(this.storage.refFromURL(t))}upload(t,o,l){return LE(this.storage.ref(t)).put(o,l)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fe.Dh),p.LFG(Fe.xv,8),p.LFG(Jb,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(oe.HU),p.LFG(Xb,8),p.LFG(eT,8),p.LFG(tT,8),p.LFG(Xd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),iT=(()=>{class n{constructor(){um.Z.registerVersion("angularfire",oe.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[nT],imports:[rT]}),n})();class pp{}pp.\u0275fac=function(e){return new(e||pp)},pp.\u0275mod=p.oAB({type:pp,bootstrap:[Cs]}),pp.\u0275inj=p.cJS({imports:[Po,i_,Fe.hO.initializeApp({apiKey:"AIzaSyCOzYaRpkVTr49cwlxs3IaNg4V4FXLWH3c",authDomain:"treetrunks-f1407.firebaseapp.com",projectId:"treetrunks-f1407",storageBucket:"treetrunks-f1407.appspot.com",messagingSenderId:"672149659854",appId:"1:672149659854:web:129df4fdc785d3e5d8709f",measurementId:"G-03ZLT5J69E"}),bD,iT,ND]}),Gu().bootstrapModule(pp).catch(n=>console.error(n))},8306:(it,Ce,x)=>{x.d(Ce,{y:()=>j});var p=x(930),Q=x(727),P=x(8822),re=x(4671);var me=x(2416),le=x(576),ye=x(2806);let j=(()=>{class Se{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const te=new Se;return te.source=this,te.operator=Oe,te}subscribe(Oe,te,ve){const de=function ze(Se){return Se&&Se instanceof p.Lv||function K(Se){return Se&&(0,le.m)(Se.next)&&(0,le.m)(Se.error)&&(0,le.m)(Se.complete)}(Se)&&(0,Q.Nn)(Se)}(Oe)?Oe:new p.Hp(Oe,te,ve);return(0,ye.x)(()=>{const{operator:be,source:_e}=this;de.add(be?be.call(de,_e):_e?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(te){Oe.error(te)}}forEach(Oe,te){return new(te=H(te))((ve,de)=>{const be=new p.Hp({next:_e=>{try{Oe(_e)}catch(pe){de(pe),be.unsubscribe()}},error:de,complete:ve});this.subscribe(be)})}_subscribe(Oe){var te;return null===(te=this.source)||void 0===te?void 0:te.subscribe(Oe)}[P.L](){return this}pipe(...Oe){return function ie(Se){return 0===Se.length?re.y:1===Se.length?Se[0]:function(Oe){return Se.reduce((te,ve)=>ve(te),Oe)}}(Oe)(this)}toPromise(Oe){return new(Oe=H(Oe))((te,ve)=>{let de;this.subscribe(be=>de=be,be=>ve(be),()=>te(de))})}}return Se.create=st=>new Se(st),Se})();function H(Se){var st;return null!==(st=Se??me.v.Promise)&&void 0!==st?st:Promise}},7579:(it,Ce,x)=>{x.d(Ce,{x:()=>me});var p=x(8306),Q=x(727);const re=(0,x(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=x(8737),ie=x(2806);let me=(()=>{class ye extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new le(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new re}next(H){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:ze,observers:Se}=this;return K||ze?Q.Lc:(this.currentObservers=null,Se.push(H),new Q.w0(()=>{this.currentObservers=null,(0,ee.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:ze,isStopped:Se}=this;K?H.error(ze):Se&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return ye.create=(j,H)=>new le(j,H),ye})();class le extends me{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,j)}error(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==K?K:Q.Lc}}},930:(it,Ce,x)=>{x.d(Ce,{Hp:()=>Oe,Lv:()=>K});var p=x(576),Q=x(727),P=x(2416),re=x(7849),ee=x(5032);const ie=ye("C",void 0,void 0);function ye(_e,pe,Ie){return{kind:_e,value:pe,error:Ie}}var j=x(3410),H=x(2806);class K extends Q.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,Q.Nn)(pe)&&pe.add(this)):this.destination=be}static create(pe,Ie,Pe){return new Oe(pe,Ie,Pe)}next(pe){this.isStopped?de(function le(_e){return ye("N",_e,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?de(function me(_e){return ye("E",void 0,_e)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?de(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Se(_e,pe){return ze.call(_e,pe)}class st{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(pe)}catch(Pe){te(Pe)}}error(pe){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(pe)}catch(Pe){te(Pe)}else te(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(Ie){te(Ie)}}}class Oe extends K{constructor(pe,Ie,Pe){let Te;if(super(),(0,p.m)(pe)||!pe)Te={next:pe??void 0,error:Ie??void 0,complete:Pe??void 0};else{let U;this&&P.v.useDeprecatedNextContext?(U=Object.create(pe),U.unsubscribe=()=>this.unsubscribe(),Te={next:pe.next&&Se(pe.next,U),error:pe.error&&Se(pe.error,U),complete:pe.complete&&Se(pe.complete,U)}):Te=pe}this.destination=new st(Te)}}function te(_e){P.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(_e):(0,re.h)(_e)}function de(_e,pe){const{onStoppedNotification:Ie}=P.v;Ie&&j.z.setTimeout(()=>Ie(_e,pe))}const be={closed:!0,next:ee.Z,error:function ve(_e){throw _e},complete:ee.Z}},727:(it,Ce,x)=>{x.d(Ce,{Lc:()=>ie,w0:()=>ee,Nn:()=>me});var p=x(576);const P=(0,x(3888).d)(ye=>function(H){ye(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,ze)=>`${ze+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var re=x(8737);class ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,p.m)(K))try{K()}catch(Se){j=Se instanceof P?Se.errors:[Se]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Se of ze)try{le(Se)}catch(st){j=j??[],st instanceof P?j=[...j,...st.errors]:j.push(st)}}if(j)throw new P(j)}}add(j){var H;if(j&&j!==this)if(this.closed)le(j);else{if(j instanceof ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,re.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,re.P)(H,j),j instanceof ee&&j._removeParent(this)}}ee.EMPTY=(()=>{const ye=new ee;return ye.closed=!0,ye})();const ie=ee.EMPTY;function me(ye){return ye instanceof ee||ye&&"closed"in ye&&(0,p.m)(ye.remove)&&(0,p.m)(ye.add)&&(0,p.m)(ye.unsubscribe)}function le(ye){(0,p.m)(ye)?ye():ye.unsubscribe()}},2416:(it,Ce,x)=>{x.d(Ce,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ce,x)=>{x.d(Ce,{E:()=>Q});const Q=new(x(8306).y)(ee=>ee.complete())},8996:(it,Ce,x)=>{x.d(Ce,{D:()=>pe});var p=x(8421),Q=x(5363),P=x(9468),ie=x(8306),le=x(2202),ye=x(576),j=x(9672);function K(Ie,Pe){if(!Ie)throw new Error("Iterable cannot be null");return new ie.y(Te=>{(0,j.f)(Te,Pe,()=>{const U=Ie[Symbol.asyncIterator]();(0,j.f)(Te,Pe,()=>{U.next().then(ue=>{ue.done?Te.complete():Te.next(ue.value)})},0,!0)})})}var ze=x(3670),Se=x(8239),st=x(1144),Oe=x(6495),te=x(2206),ve=x(4532),de=x(3260);function pe(Ie,Pe){return Pe?function _e(Ie,Pe){if(null!=Ie){if((0,ze.c)(Ie))return function re(Ie,Pe){return(0,p.Xf)(Ie).pipe((0,P.R)(Pe),(0,Q.Q)(Pe))}(Ie,Pe);if((0,st.z)(Ie))return function me(Ie,Pe){return new ie.y(Te=>{let U=0;return Pe.schedule(function(){U===Ie.length?Te.complete():(Te.next(Ie[U++]),Te.closed||this.schedule())})})}(Ie,Pe);if((0,Se.t)(Ie))return function ee(Ie,Pe){return(0,p.Xf)(Ie).pipe((0,P.R)(Pe),(0,Q.Q)(Pe))}(Ie,Pe);if((0,te.D)(Ie))return K(Ie,Pe);if((0,Oe.T)(Ie))return function H(Ie,Pe){return new ie.y(Te=>{let U;return(0,j.f)(Te,Pe,()=>{U=Ie[le.h](),(0,j.f)(Te,Pe,()=>{let ue,Re;try{({value:ue,done:Re}=U.next())}catch(Ve){return void Te.error(Ve)}Re?Te.complete():Te.next(ue)},0,!0)}),()=>(0,ye.m)(U?.return)&&U.return()})}(Ie,Pe);if((0,de.L)(Ie))return function be(Ie,Pe){return K((0,de.Q)(Ie),Pe)}(Ie,Pe)}throw(0,ve.z)(Ie)}(Ie,Pe):(0,p.Xf)(Ie)}},8421:(it,Ce,x)=>{x.d(Ce,{Xf:()=>ze});var p=x(655),Q=x(1144),P=x(8239),re=x(8306),ee=x(3670),ie=x(2206),me=x(4532),le=x(6495),ye=x(3260),j=x(576),H=x(7849),K=x(8822);function ze(_e){if(_e instanceof re.y)return _e;if(null!=_e){if((0,ee.c)(_e))return function Se(_e){return new re.y(pe=>{const Ie=_e[K.L]();if((0,j.m)(Ie.subscribe))return Ie.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,Q.z)(_e))return function st(_e){return new re.y(pe=>{for(let Ie=0;Ie<_e.length&&!pe.closed;Ie++)pe.next(_e[Ie]);pe.complete()})}(_e);if((0,P.t)(_e))return function Oe(_e){return new re.y(pe=>{_e.then(Ie=>{pe.closed||(pe.next(Ie),pe.complete())},Ie=>pe.error(Ie)).then(null,H.h)})}(_e);if((0,ie.D)(_e))return ve(_e);if((0,le.T)(_e))return function te(_e){return new re.y(pe=>{for(const Ie of _e)if(pe.next(Ie),pe.closed)return;pe.complete()})}(_e);if((0,ye.L)(_e))return function de(_e){return ve((0,ye.Q)(_e))}(_e)}throw(0,me.z)(_e)}function ve(_e){return new re.y(pe=>{(function be(_e,pe){var Ie,Pe,Te,U;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,p.KL)(_e);!(Pe=yield Ie.next()).done;)if(pe.next(Pe.value),pe.closed)return}catch(ue){Te={error:ue}}finally{try{Pe&&!Pe.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(Te)throw Te.error}}pe.complete()})})(_e,pe).catch(Ie=>pe.error(Ie))})}},831:(it,Ce,x)=>{x.d(Ce,{T:()=>Se});var p=x(4004),Q=x(8421),P=x(4482),re=x(9672),ee=x(5403),me=x(576);function le(st,Oe,te=1/0){return(0,me.m)(Oe)?le((ve,de)=>(0,p.U)((be,_e)=>Oe(ve,be,de,_e))((0,Q.Xf)(st(ve,de))),te):("number"==typeof Oe&&(te=Oe),(0,P.e)((ve,de)=>function ie(st,Oe,te,ve,de,be,_e,pe){const Ie=[];let Pe=0,Te=0,U=!1;const ue=()=>{U&&!Ie.length&&!Pe&&Oe.complete()},Re=Ye=>Pe<ve?Ve(Ye):Ie.push(Ye),Ve=Ye=>{be&&Oe.next(Ye),Pe++;let He=!1;(0,Q.Xf)(te(Ye,Te++)).subscribe((0,ee.x)(Oe,J=>{de?.(J),be?Re(J):Oe.next(J)},()=>{He=!0},void 0,()=>{if(He)try{for(Pe--;Ie.length&&Pe<ve;){const J=Ie.shift();_e?(0,re.f)(Oe,_e,()=>Ve(J)):Ve(J)}ue()}catch(J){Oe.error(J)}}))};return st.subscribe((0,ee.x)(Oe,Re,()=>{U=!0,ue()})),()=>{pe?.()}}(ve,de,st,te)))}var ye=x(4671),H=x(515),K=x(7669),ze=x(8996);function Se(...st){const Oe=(0,K.yG)(st),te=(0,K._6)(st,1/0),ve=st;return ve.length?1===ve.length?(0,Q.Xf)(ve[0]):function j(st=1/0){return le(ye.y,st)}(te)((0,ze.D)(ve,Oe)):H.E}},5403:(it,Ce,x)=>{x.d(Ce,{x:()=>Q});var p=x(930);function Q(re,ee,ie,me,le){return new P(re,ee,ie,me,le)}class P extends p.Lv{constructor(ee,ie,me,le,ye,j){super(ee),this.onFinalize=ye,this.shouldUnsubscribe=j,this._next=ie?function(H){try{ie(H)}catch(K){ee.error(K)}}:super._next,this._error=le?function(H){try{le(H)}catch(K){ee.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(H){ee.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(it,Ce,x)=>{x.d(Ce,{U:()=>P});var p=x(4482),Q=x(5403);function P(re,ee){return(0,p.e)((ie,me)=>{let le=0;ie.subscribe((0,Q.x)(me,ye=>{me.next(re.call(ee,ye,le++))}))})}},5363:(it,Ce,x)=>{x.d(Ce,{Q:()=>re});var p=x(9672),Q=x(4482),P=x(5403);function re(ee,ie=0){return(0,Q.e)((me,le)=>{me.subscribe((0,P.x)(le,ye=>(0,p.f)(le,ee,()=>le.next(ye),ie),()=>(0,p.f)(le,ee,()=>le.complete(),ie),ye=>(0,p.f)(le,ee,()=>le.error(ye),ie)))})}},3099:(it,Ce,x)=>{x.d(Ce,{B:()=>ee});var p=x(8421),Q=x(7579),P=x(930),re=x(4482);function ee(me={}){const{connector:le=(()=>new Q.x),resetOnError:ye=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=me;return K=>{let ze,Se,st,Oe=0,te=!1,ve=!1;const de=()=>{Se?.unsubscribe(),Se=void 0},be=()=>{de(),ze=st=void 0,te=ve=!1},_e=()=>{const pe=ze;be(),pe?.unsubscribe()};return(0,re.e)((pe,Ie)=>{Oe++,!ve&&!te&&de();const Pe=st=st??le();Ie.add(()=>{Oe--,0===Oe&&!ve&&!te&&(Se=ie(_e,H))}),Pe.subscribe(Ie),!ze&&Oe>0&&(ze=new P.Hp({next:Te=>Pe.next(Te),error:Te=>{ve=!0,de(),Se=ie(be,ye,Te),Pe.error(Te)},complete:()=>{te=!0,de(),Se=ie(be,j),Pe.complete()}}),(0,p.Xf)(pe).subscribe(ze))})(K)}}function ie(me,le,...ye){if(!0===le)return void me();if(!1===le)return;const j=new P.Hp({next:()=>{j.unsubscribe(),me()}});return(0,p.Xf)(le(...ye)).subscribe(j)}},9468:(it,Ce,x)=>{x.d(Ce,{R:()=>Q});var p=x(4482);function Q(P,re=0){return(0,p.e)((ee,ie)=>{ie.add(P.schedule(()=>ee.subscribe(ie),re))})}},4408:(it,Ce,x)=>{x.d(Ce,{o:()=>ee});var p=x(727);class Q extends p.w0{constructor(me,le){super()}schedule(me,le=0){return this}}const P={setInterval(ie,me,...le){const{delegate:ye}=P;return ye?.setInterval?ye.setInterval(ie,me,...le):setInterval(ie,me,...le)},clearInterval(ie){const{delegate:me}=P;return(me?.clearInterval||clearInterval)(ie)},delegate:void 0};var re=x(8737);class ee extends Q{constructor(me,le){super(me,le),this.scheduler=me,this.work=le,this.pending=!1}schedule(me,le=0){var ye;if(this.closed)return this;this.state=me;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,le)),this.pending=!0,this.delay=le,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(H,this.id,le),this}requestAsyncId(me,le,ye=0){return P.setInterval(me.flush.bind(me,this),ye)}recycleAsyncId(me,le,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return le;null!=le&&P.clearInterval(le)}execute(me,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(me,le);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,le){let j,ye=!1;try{this.work(me)}catch(H){ye=!0,j=H||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:me,scheduler:le}=this,{actions:ye}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ye,this),null!=me&&(this.id=this.recycleAsyncId(le,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ce,x)=>{x.d(Ce,{v:()=>P});var p=x(6063);class Q{constructor(ee,ie=Q.now){this.schedulerActionCtor=ee,this.now=ie}schedule(ee,ie=0,me){return new this.schedulerActionCtor(this,ee).schedule(me,ie)}}Q.now=p.l.now;class P extends Q{constructor(ee,ie=Q.now){super(ee,ie),this.actions=[],this._active=!1}flush(ee){const{actions:ie}=this;if(this._active)return void ie.push(ee);let me;this._active=!0;do{if(me=ee.execute(ee.state,ee.delay))break}while(ee=ie.shift());if(this._active=!1,me){for(;ee=ie.shift();)ee.unsubscribe();throw me}}}},4986:(it,Ce,x)=>{x.d(Ce,{z:()=>P});var p=x(4408);const P=new(x(7565).v)(p.o)},6063:(it,Ce,x)=>{x.d(Ce,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(it,Ce,x)=>{x.d(Ce,{z:()=>p});const p={setTimeout(Q,P,...re){const{delegate:ee}=p;return ee?.setTimeout?ee.setTimeout(Q,P,...re):setTimeout(Q,P,...re)},clearTimeout(Q){const{delegate:P}=p;return(P?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(it,Ce,x)=>{x.d(Ce,{h:()=>Q});const Q=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ce,x)=>{x.d(Ce,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ce,x)=>{x.d(Ce,{_6:()=>ie,jO:()=>re,yG:()=>ee});var p=x(576);function P(me){return me[me.length-1]}function re(me){return(0,p.m)(P(me))?me.pop():void 0}function ee(me){return function Q(me){return me&&(0,p.m)(me.schedule)}(P(me))?me.pop():void 0}function ie(me,le){return"number"==typeof P(me)?me.pop():le}},8737:(it,Ce,x)=>{function p(Q,P){if(Q){const re=Q.indexOf(P);0<=re&&Q.splice(re,1)}}x.d(Ce,{P:()=>p})},3888:(it,Ce,x)=>{function p(Q){const re=Q(ee=>{Error.call(ee),ee.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}x.d(Ce,{d:()=>p})},2806:(it,Ce,x)=>{x.d(Ce,{O:()=>re,x:()=>P});var p=x(2416);let Q=null;function P(ee){if(p.v.useDeprecatedSynchronousErrorHandling){const ie=!Q;if(ie&&(Q={errorThrown:!1,error:null}),ee(),ie){const{errorThrown:me,error:le}=Q;if(Q=null,me)throw le}}else ee()}function re(ee){p.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ee)}},9672:(it,Ce,x)=>{function p(Q,P,re,ee=0,ie=!1){const me=P.schedule(function(){re(),ie?Q.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Q.add(me),!ie)return me}x.d(Ce,{f:()=>p})},4671:(it,Ce,x)=>{function p(Q){return Q}x.d(Ce,{y:()=>p})},1144:(it,Ce,x)=>{x.d(Ce,{z:()=>p});const p=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(it,Ce,x)=>{x.d(Ce,{D:()=>Q});var p=x(576);function Q(P){return Symbol.asyncIterator&&(0,p.m)(P?.[Symbol.asyncIterator])}},576:(it,Ce,x)=>{function p(Q){return"function"==typeof Q}x.d(Ce,{m:()=>p})},3670:(it,Ce,x)=>{x.d(Ce,{c:()=>P});var p=x(8822),Q=x(576);function P(re){return(0,Q.m)(re[p.L])}},6495:(it,Ce,x)=>{x.d(Ce,{T:()=>P});var p=x(2202),Q=x(576);function P(re){return(0,Q.m)(re?.[p.h])}},8239:(it,Ce,x)=>{x.d(Ce,{t:()=>Q});var p=x(576);function Q(P){return(0,p.m)(P?.then)}},3260:(it,Ce,x)=>{x.d(Ce,{L:()=>re,Q:()=>P});var p=x(655),Q=x(576);function P(ee){return(0,p.FC)(this,arguments,function*(){const me=ee.getReader();try{for(;;){const{value:le,done:ye}=yield(0,p.qq)(me.read());if(ye)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{me.releaseLock()}})}function re(ee){return(0,Q.m)(ee?.getReader)}},4482:(it,Ce,x)=>{x.d(Ce,{e:()=>P});var p=x(576);function P(re){return ee=>{if(function Q(re){return(0,p.m)(re?.lift)}(ee))return ee.lift(function(ie){try{return re(ie,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Ce,x)=>{function p(){}x.d(Ce,{Z:()=>p})},7849:(it,Ce,x)=>{x.d(Ce,{h:()=>P});var p=x(2416),Q=x(3410);function P(re){Q.z.setTimeout(()=>{const{onUnhandledError:ee}=p.v;if(!ee)throw re;ee(re)})}},4532:(it,Ce,x)=>{function p(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(Ce,{z:()=>p})},655:(it,Ce,x)=>{function re(J,se){var he={};for(var De in J)Object.prototype.hasOwnProperty.call(J,De)&&se.indexOf(De)<0&&(he[De]=J[De]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(De=Object.getOwnPropertySymbols(J);Me<De.length;Me++)se.indexOf(De[Me])<0&&Object.prototype.propertyIsEnumerable.call(J,De[Me])&&(he[De[Me]]=J[De[Me]])}return he}function K(J,se,he,De){return new(he||(he=Promise))(function(xe,je){function Be(Ft){try{ot(De.next(Ft))}catch(We){je(We)}}function Ut(Ft){try{ot(De.throw(Ft))}catch(We){je(We)}}function ot(Ft){Ft.done?xe(Ft.value):function Me(xe){return xe instanceof he?xe:new he(function(je){je(xe)})}(Ft.value).then(Be,Ut)}ot((De=De.apply(J,se||[])).next())})}function _e(J){return this instanceof _e?(this.v=J,this):new _e(J)}function pe(J,se,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,De=he.apply(J,se||[]),xe=[];return Me={},je("next"),je("throw"),je("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function je(mt){De[mt]&&(Me[mt]=function(gn){return new Promise(function($t,nn){xe.push([mt,gn,$t,nn])>1||Be(mt,gn)})})}function Be(mt,gn){try{!function Ut(mt){mt.value instanceof _e?Promise.resolve(mt.value.v).then(ot,Ft):We(xe[0][2],mt)}(De[mt](gn))}catch($t){We(xe[0][3],$t)}}function ot(mt){Be("next",mt)}function Ft(mt){Be("throw",mt)}function We(mt,gn){mt(gn),xe.shift(),xe.length&&Be(xe[0][0],xe[0][1])}}function Pe(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function Oe(J){var se="function"==typeof Symbol&&Symbol.iterator,he=se&&J[se],De=0;if(he)return he.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&De>=J.length&&(J=void 0),{value:J&&J[De++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),he={},De("next"),De("throw"),De("return"),he[Symbol.asyncIterator]=function(){return this},he);function De(xe){he[xe]=J[xe]&&function(je){return new Promise(function(Be,Ut){!function Me(xe,je,Be,Ut){Promise.resolve(Ut).then(function(ot){xe({value:ot,done:Be})},je)}(Be,Ut,(je=J[xe](je)).done,je.value)})}}}x.d(Ce,{FC:()=>pe,KL:()=>Pe,_T:()=>re,mG:()=>K,qq:()=>_e})},4650:(it,Ce,x)=>{x.d(Ce,{$8M:()=>Da,AFp:()=>Bm,AaK:()=>le,CHM:()=>Il,CZH:()=>rp,CqO:()=>dy,D6c:()=>GC,EJc:()=>hE,EpF:()=>kg,F4k:()=>Fg,FYo:()=>w_,FiY:()=>mr,GfV:()=>Bp,Gpc:()=>H,JOm:()=>Un,KtG:()=>Pu,LFG:()=>ke,Lbi:()=>uC,Lck:()=>Nv,MAs:()=>uy,NdJ:()=>Lg,OlP:()=>Ht,Oqu:()=>zg,Q6J:()=>Pg,QGY:()=>Ci,Qsj:()=>YE,R0b:()=>Wi,RDi:()=>kt,Rgc:()=>kc,SBq:()=>Td,TTD:()=>ra,TgZ:()=>_u,X6Q:()=>RC,Xpm:()=>oo,Y36:()=>gc,YNc:()=>_f,Yjl:()=>lo,Yz7:()=>We,ZZ4:()=>u_,_Bn:()=>Mv,_UZ:()=>Zd,_c5:()=>jC,_uU:()=>Gy,aQg:()=>cp,cJS:()=>gn,cg1:()=>Jg,dDg:()=>gC,dqk:()=>Et,eFA:()=>DC,ekj:()=>$g,eoX:()=>Xm,f3M:()=>Ze,g9A:()=>jm,h0i:()=>xc,hGG:()=>$C,hij:()=>Df,ifc:()=>at,ip1:()=>Um,kL8:()=>nv,lG2:()=>ao,lri:()=>mE,n5z:()=>$u,oAB:()=>an,oxw:()=>_y,q4F:()=>Md,qLn:()=>Wr,qOj:()=>Cg,qZA:()=>Ka,rWj:()=>Jm,sBO:()=>NC,s_b:()=>nh,soG:()=>uh,uIk:()=>Mg,vHH:()=>te,vpe:()=>Es,wAp:()=>lt,xp6:()=>Zp,zSh:()=>hc,zs3:()=>su});var p=x(7579),Q=x(727),P=x(8306),re=x(831),ee=x(3099);function ie(r){for(let i in r)if(r[i]===ie)return i;throw Error("Could not find renamed property on target object.")}function me(r,i){for(const s in i)i.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(r[s]=i[s])}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function ye(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const j=ie({__forward_ref__:ie});function H(r){return r.__forward_ref__=H,r.toString=function(){return le(this())},r}function K(r){return ze(r)?r():r}function ze(r){return"function"==typeof r&&r.hasOwnProperty(j)&&r.__forward_ref__===H}function Se(r){return r&&!!r.\u0275providers}class te extends Error{constructor(i,s){super(ve(i,s)),this.code=i}}function ve(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}function de(r){return"string"==typeof r?r:null==r?"":String(r)}function Pe(r,i){throw new te(-201,!1)}function je(r,i){null==r&&function Be(r,i,s,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,r,null,"!=")}function We(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function gn(r){return{providers:r.providers||[],imports:r.imports||[]}}function $t(r){return rn(r,er)||rn(r,qt)}function rn(r,i){return r.hasOwnProperty(i)?r[i]:null}function Dr(r){return r&&(r.hasOwnProperty(Si)||r.hasOwnProperty(cr))?r[Si]:null}const er=ie({\u0275prov:ie}),Si=ie({\u0275inj:ie}),qt=ie({ngInjectableDef:ie}),cr=ie({ngInjectorDef:ie});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Ai;function sn(r){const i=Ai;return Ai=r,i}function Hn(r,i,s){const a=$t(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Xe.Optional?null:void 0!==i?i:void Pe(le(r))}const Et=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kt={},mn="__NG_DI_FLAG__",jn="ngTempTokenPath",$n="ngTokenPath",ws=/\n/gm,Bt="\u0275",Kr="__source";let Pt;function tr(r){const i=Pt;return Pt=r,i}function Yr(r,i=Xe.Default){if(void 0===Pt)throw new te(-203,!1);return null===Pt?Hn(r,void 0,i):Pt.get(r,i&Xe.Optional?null:void 0,i)}function ke(r,i=Xe.Default){return(function Or(){return Ai}()||Yr)(K(r),i)}function Ze(r,i=Xe.Default){return ke(r,ht(i))}function ht(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function yt(r){const i=[];for(let s=0;s<r.length;s++){const a=K(r[s]);if(Array.isArray(a)){if(0===a.length)throw new te(900,!1);let u,d=Xe.Default;for(let m=0;m<a.length;m++){const v=a[m],E=Gn(v);"number"==typeof E?-1===E?u=v.token:d|=E:u=v}i.push(ke(u,d))}else i.push(ke(a))}return i}function Dt(r,i){return r[mn]=i,r.prototype[mn]=i,r}function Gn(r){return r[mn]}function G(r){return{toString:r}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),at=(()=>{return(r=at||(at={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",at;var r})();const Lt={},ut=[],on=ie({\u0275cmp:ie}),vn=ie({\u0275dir:ie}),Mt=ie({\u0275pipe:ie}),xr=ie({\u0275mod:ie}),bn=ie({\u0275fac:ie}),qi=ie({__NG_ELEMENT_ID__:ie});let Uc=0;function oo(r){return G(()=>{const s=!0===r.standalone,a={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||ut,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||at.Emulated,id:"c"+Uc++,styles:r.styles||ut,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},d=r.dependencies,m=r.features;return u.inputs=ol(r.inputs,a),u.outputs=ol(r.outputs),m&&m.forEach(v=>v(u)),u.directiveDefs=d?()=>("function"==typeof d?d():d).map(sl).filter(bu):null,u.pipeDefs=d?()=>("function"==typeof d?d():d).map(_n).filter(bu):null,u})}function sl(r){return Ot(r)||Tn(r)}function bu(r){return null!==r}function an(r){return G(()=>({type:r.type,bootstrap:r.bootstrap||ut,declarations:r.declarations||ut,imports:r.imports||ut,exports:r.exports||ut,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function ol(r,i){if(null==r)return Lt;const s={};for(const a in r)if(r.hasOwnProperty(a)){let u=r[a],d=u;Array.isArray(u)&&(d=u[1],u=u[0]),s[u]=a,i&&(i[u]=d)}return s}const ao=oo;function lo(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ot(r){return r[on]||null}function Tn(r){return r[vn]||null}function _n(r){return r[Mt]||null}const Cr=0,$e=1,It=2,Yt=3,nr=4,ui=5,En=6,kr=7,ln=8,bs=9,Ki=10,Ct=11,al=12,Ri=13,ll=14,Fr=15,zn=16,Ts=17,Yi=18,Lr=19,Ni=20,ci=21,Gt=22,wr=1,Su=2,Ss=7,Qi=8,rr=9,Zn=10;function dr(r){return Array.isArray(r)&&"object"==typeof r[wr]}function Vr(r){return Array.isArray(r)&&!0===r[wr]}function uo(r){return 0!=(4&r.flags)}function Ur(r){return r.componentOffset>-1}function ul(r){return 1==(1&r.flags)}function hr(r){return null!==r.template}function co(r){return 0!=(256&r[It])}function Xi(r,i){return r.hasOwnProperty(bn)?r[bn]:null}class es{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ra(){return fo}function fo(r){return r.type.prototype.ngOnChanges&&(r.setInput=Rs),ml}function ml(){const r=po(this),i=r?.current;if(i){const s=r.previous;if(s===Lt)r.previous=i;else for(let a in i)s[a]=i[a];r.current=null,this.ngOnChanges(i)}}function Rs(r,i,s,a){const u=this.declaredInputs[s],d=po(r)||function Ru(r,i){return r[ts]=i}(r,{previous:Lt,current:null}),m=d.current||(d.current={}),v=d.previous,E=v[u];m[u]=new es(E&&E.currentValue,i,v===Lt),r[a]=i}ra.ngInherit=!0;const ts="__ngSimpleChanges__";function po(r){return r[ts]||null}const fr=function(r,i,s){};function yn(r){for(;Array.isArray(r);)r=r[Cr];return r}function ns(r,i){return yn(i[r])}function In(r,i){return yn(i[r.index])}function xs(r,i){return r.data[i]}function Nn(r,i){const s=i[r];return dr(s)?s:s[Cr]}function ks(r){return 64==(64&r[It])}function hi(r,i){return null==i?null:r[i]}function mo(r){r[Yi]=0}function _o(r,i){r[ui]+=i;let s=r,a=r[Yt];for(;null!==a&&(1===i&&1===s[ui]||-1===i&&0===s[ui]);)a[ui]+=i,s=a,a=a[Yt]}const _t={lFrame:gp(null),bindingsEnabled:!0};function la(){return _t.bindingsEnabled}function ae(){return _t.lFrame.lView}function xt(){return _t.lFrame.tView}function Il(r){return _t.lFrame.contextLView=r,r[ln]}function Pu(r){return _t.lFrame.contextLView=null,r}function kn(){let r=yo();for(;null!==r&&64===r.type;)r=r.parent;return r}function yo(){return _t.lFrame.currentTNode}function pr(r,i){const s=_t.lFrame;s.currentTNode=r,s.isParent=i}function ca(){return _t.lFrame.isParent}function is(){return _t.lFrame.bindingIndex++}function ku(r,i){const s=_t.lFrame;s.bindingIndex=s.bindingRootIndex=r,wl(i)}function wl(r){_t.lFrame.currentDirectiveIndex=r}function bl(r){_t.lFrame.currentQueryIndex=r}function Lu(r){const i=r[$e];return 2===i.type?i.declTNode:1===i.type?r[En]:null}function Wc(r,i,s){if(s&Xe.SkipSelf){let u=i,d=r;for(;!(u=u.parent,null!==u||s&Xe.Host||(u=Lu(d),null===u||(d=d[Fr],10&u.type))););if(null===u)return!1;i=u,r=d}const a=_t.lFrame=zc();return a.currentTNode=i,a.lView=r,!0}function fa(r){const i=zc(),s=r[$e];_t.lFrame=i,i.currentTNode=s.firstChild,i.lView=r,i.tView=s,i.contextLView=r,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function zc(){const r=_t.lFrame,i=null===r?null:r.child;return null===i?gp(r):i}function gp(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function ph(){const r=_t.lFrame;return _t.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Tl=ph;function gh(){const r=ph();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function sr(){return _t.lFrame.selectedIndex}function Fs(r){_t.lFrame.selectedIndex=r}function Qt(){const r=_t.lFrame;return xs(r.tView,r.selectedIndex)}function Eo(r,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const d=r.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:b,ngOnDestroy:A}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-s,m),v&&((r.contentHooks||(r.contentHooks=[])).push(s,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(s,v)),E&&(r.viewHooks||(r.viewHooks=[])).push(-s,E),b&&((r.viewHooks||(r.viewHooks=[])).push(s,b),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(s,b)),null!=A&&(r.destroyHooks||(r.destroyHooks=[])).push(s,A)}}function ss(r,i,s){Io(r,i,3,s)}function Al(r,i,s,a){(3&r[It])===s&&Io(r,i,s,a)}function Oi(r,i){let s=r[It];(3&s)===i&&(s&=2047,s+=1,r[It]=s)}function Io(r,i,s,a){const d=a??-1,m=i.length-1;let v=0;for(let E=void 0!==a?65535&r[Yi]:0;E<m;E++)if("number"==typeof i[E+1]){if(v=i[E],null!=a&&v>=a)break}else i[E]<0&&(r[Yi]+=65536),(v<d||-1==d)&&(Do(r,s,i,E),r[Yi]=(4294901760&r[Yi])+E+2),E++}function Do(r,i,s,a){const u=s[a]<0,d=s[a+1],v=r[u?-s[a]:s[a]];if(u){if(r[It]>>11<r[Yi]>>16&&(3&r[It])===i){r[It]+=2048,fr(4,v,d);try{d.call(v)}finally{fr(5,v,d)}}}else{fr(4,v,d);try{d.call(v)}finally{fr(5,v,d)}}}const Vs=-1;class xi{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function un(r,i,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const d=s[a++],m=s[a++],v=s[a++];r.setAttribute(i,m,v,d)}else{const d=u,m=s[++a];pi(d)?r.setProperty(i,d,m):r.setAttribute(i,d,m),a++}}return a}function wo(r){return 3===r||4===r||6===r}function pi(r){return 64===r.charCodeAt(0)}function gi(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const u=i[a];"number"==typeof u?s=u:0===s||Us(r,s,u,null,-1===s||2===s?i[++a]:null)}}return r}function Us(r,i,s,a,u){let d=0,m=r.length;if(-1===i)m=-1;else for(;d<r.length;){const v=r[d++];if("number"==typeof v){if(v===i){m=-1;break}if(v>i){m=d-1;break}}}for(;d<r.length;){const v=r[d];if("number"==typeof v)break;if(v===s){if(null===a)return void(null!==u&&(r[d+1]=u));if(a===r[d+1])return void(r[d+2]=u)}d++,null!==a&&d++,null!==u&&d++}-1!==m&&(r.splice(m,0,i),d=m+1),r.splice(d++,0,s),null!==a&&r.splice(d++,0,a),null!==u&&r.splice(d++,0,u)}function Ml(r){return r!==Vs}function bo(r){return 32767&r}function ma(r,i){let s=function ga(r){return r>>16}(r),a=i;for(;s>0;)a=a[Fr],s--;return a}let ki=!0;function Bs(r){const i=ki;return ki=r,i}const To=255,So=5;let _a=0;const qn={};function js(r,i){const s=Mo(r,i);if(-1!==s)return s;const a=i[$e];a.firstCreatePass&&(r.injectorIndex=i.length,Fi(a.data,r),Fi(i,null),Fi(a.blueprint,null));const u=ya(r,i),d=r.injectorIndex;if(Ml(u)){const m=bo(u),v=ma(u,i),E=v[$e].data;for(let b=0;b<8;b++)i[d+b]=v[m+b]|E[m+b]}return i[d+8]=u,d}function Fi(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Mo(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function ya(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let s=0,a=null,u=i;for(;null!==u;){if(a=Nl(u),null===a)return Vs;if(s++,u=u[Fr],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Vs}function Ro(r,i,s){!function Ao(r,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(qi)&&(a=s[qi]),null==a&&(a=s[qi]=_a++);const u=a&To;i.data[r+(u>>So)]|=1<<u}(r,i,s)}function ls(r,i,s){if(s&Xe.Optional||void 0!==r)return r;Pe()}function No(r,i,s,a){if(s&Xe.Optional&&void 0===a&&(a=null),!(s&(Xe.Self|Xe.Host))){const u=r[bs],d=sn(void 0);try{return u?u.get(i,a,s&Xe.Optional):Hn(i,a,s&Xe.Optional)}finally{sn(d)}}return ls(a,0,s)}function Hu(r,i,s,a=Xe.Default,u){if(null!==r){if(1024&i[It]){const m=function Gu(r,i,s,a,u){let d=r,m=i;for(;null!==d&&null!==m&&1024&m[It]&&!(256&m[It]);){const v=ei(d,m,s,a|Xe.Self,qn);if(v!==qn)return v;let E=d.parent;if(!E){const b=m[ci];if(b){const A=b.get(s,qn,a);if(A!==qn)return A}E=Nl(m),m=m[Fr]}d=E}return u}(r,i,s,a,qn);if(m!==qn)return m}const d=ei(r,i,s,a,qn);if(d!==qn)return d}return No(i,s,a,u)}function ei(r,i,s,a,u){const d=function ju(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(qi)?r[qi]:void 0;return"number"==typeof i?i>=0?i&To:yh:i}(s);if("function"==typeof d){if(!Wc(i,r,a))return a&Xe.Host?ls(u,0,a):No(i,s,a,u);try{const m=d(a);if(null!=m||a&Xe.Optional)return m;Pe()}finally{Tl()}}else if("number"==typeof d){let m=null,v=Mo(r,i),E=Vs,b=a&Xe.Host?i[zn][En]:null;for((-1===v||a&Xe.SkipSelf)&&(E=-1===v?ya(r,i):i[v+8],E!==Vs&&mi(a,!1)?(m=i[$e],v=bo(E),i=ma(E,i)):v=-1);-1!==v;){const A=i[$e];if(Ea(d,v,A.data)){const O=va(v,i,s,m,a,b);if(O!==qn)return O}E=i[v+8],E!==Vs&&mi(a,i[$e].data[v+8]===b)&&Ea(d,v,i)?(m=A,v=bo(E),i=ma(E,i)):v=-1}}return u}function va(r,i,s,a,u,d){const m=i[$e],v=m.data[r+8],A=function us(r,i,s,a,u){const d=r.providerIndexes,m=i.data,v=1048575&d,E=r.directiveStart,A=d>>20,$=u?v+A:r.directiveEnd;for(let q=a?v:v+A;q<$;q++){const fe=m[q];if(q<E&&s===fe||q>=E&&fe.type===s)return q}if(u){const q=m[E];if(q&&hr(q)&&q.type===s)return E}return null}(v,m,s,null==a?Ur(v)&&ki:a!=m&&0!=(3&v.type),u&Xe.Host&&d===v);return null!==A?ti(i,m,A,v):qn}function ti(r,i,s,a){let u=r[s];const d=i.data;if(function br(r){return r instanceof xi}(u)){const m=u;m.resolving&&function _e(r,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new te(-200,`Circular dependency in DI detected for ${r}${s}`)}(function be(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():de(r)}(d[s]));const v=Bs(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?sn(m.injectImpl):null;Wc(r,a,Xe.Default);try{u=r[s]=m.factory(void 0,d,r,a),i.firstCreatePass&&s>=a.directiveStart&&function _h(r,i,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:d}=i.type.prototype;if(a){const m=fo(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(r,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,m)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-r,u),d&&((s.preOrderHooks||(s.preOrderHooks=[])).push(r,d),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,d))}(s,d[s],i)}finally{null!==E&&sn(E),Bs(v),m.resolving=!1,Tl()}}return u}function Ea(r,i,s){return!!(s[i+(r>>So)]&1<<r)}function mi(r,i){return!(r&Xe.Self||r&Xe.Host&&i)}class Br{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return Hu(this._tNode,this._lView,i,ht(a),s)}}function yh(){return new Br(kn(),ae())}function $u(r){return G(()=>{const i=r.prototype.constructor,s=i[bn]||Ia(i),a=Object.prototype;let u=Object.getPrototypeOf(r.prototype).constructor;for(;u&&u!==a;){const d=u[bn]||Ia(u);if(d&&d!==s)return d;u=Object.getPrototypeOf(u)}return d=>new d})}function Ia(r){return ze(r)?()=>{const i=Ia(K(r));return i&&i()}:Xi(r)}function Nl(r){const i=r[$e],s=i.type;return 2===s?i.declTNode:1===s?r[En]:null}function Da(r){return function Rl(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const s=r.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const d=s[u];if(wo(d))break;if(0===d)u+=2;else if("number"==typeof d)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(d===i)return s[u+1];u+=2}}}return null}(kn(),r)}const Po="__parameters__";function wa(r,i,s){return G(()=>{const a=function Kc(r){return function(...s){if(r){const a=r(...s);for(const u in a)this[u]=a[u]}}}(i);function u(...d){if(this instanceof u)return a.apply(this,d),this;const m=new u(...d);return v.annotation=m,v;function v(E,b,A){const O=E.hasOwnProperty(Po)?E[Po]:Object.defineProperty(E,Po,{value:[]})[Po];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(m),E}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=r,u.annotationCls=u,u})}class Ht{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=We({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Li(r,i){r.forEach(s=>Array.isArray(s)?Li(s,i):i(s))}function Ku(r,i,s){i>=r.length?r.push(s):r.splice(i,0,s)}function $s(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function Ln(r,i,s){let a=Ma(r,i);return a>=0?r[1|a]=s:(a=~a,function Aa(r,i,s,a){let u=r.length;if(u==i)r.push(s,a);else if(1===u)r.push(a,r[0]),r[0]=s;else{for(u--,r.push(r[u-1],r[u]);u>i;)r[u]=r[u-2],u--;r[i]=s,r[i+1]=a}}(r,a,i,s)),a}function kl(r,i){const s=Ma(r,i);if(s>=0)return r[1|s]}function Ma(r,i){return function Xc(r,i,s){let a=0,u=r.length>>s;for(;u!==a;){const d=a+(u-a>>1),m=r[d<<s];if(i===m)return d<<s;m>i?u=d:a=d+1}return~(u<<s)}(r,i,1)}const mr=Dt(wa("Optional"),8),or=Dt(wa("SkipSelf"),4);var Un=(()=>((Un=Un||{})[Un.Important=1]="Important",Un[Un.DashCase=2]="DashCase",Un))();const Vo=new Map;let wh=0;const Xu="__ngContext__";function Dn(r,i){dr(i)?(r[Xu]=i[Ni],function bh(r){Vo.set(r[Ni],r)}(i)):r[Xu]=i}let ka;function tc(r,i){return ka(r,i)}function Zs(r){const i=r[Yt];return Vr(i)?i[Yt]:i}function Hl(r){return Nh(r[Ri])}function nc(r){return Nh(r[nr])}function Nh(r){for(;null!==r&&!Vr(r);)r=r[nr];return r}function qs(r,i,s,a,u){if(null!=a){let d,m=!1;Vr(a)?d=a:dr(a)&&(m=!0,a=a[Cr]);const v=yn(a);0===r&&null!==s?null==u?La(i,s,v):Uo(i,s,v,u||null,!0):1===r&&null!==s?Uo(i,s,v,u||null,!0):2===r?function Bo(r,i,s){const a=ic(r,i);a&&function gs(r,i,s,a){r.removeChild(i,s,a)}(r,a,i,s)}(i,v,m):3===r&&i.destroyNode(v),null!=d&&function Bh(r,i,s,a,u){const d=s[Ss];d!==yn(s)&&qs(i,r,a,d,u);for(let v=Zn;v<s.length;v++){const E=s[v];ql(E[$e],E,r,i,a,d)}}(i,r,d,s,u)}}function $l(r,i,s){return r.createElement(i,s)}function Fa(r,i){const s=r[rr],a=s.indexOf(i),u=i[Yt];512&i[It]&&(i[It]&=-513,_o(u,-1)),s.splice(a,1)}function dd(r,i){if(r.length<=Zn)return;const s=Zn+i,a=r[s];if(a){const u=a[Ts];null!==u&&u!==r&&Fa(u,a),i>0&&(r[s-1][nr]=a[nr]);const d=$s(r,Zn+i);!function Oh(r,i){ql(r,i,i[Ct],2,null,null),i[Cr]=null,i[En]=null}(a[$e],a);const m=d[Lr];null!==m&&m.detachView(d[$e]),a[Yt]=null,a[nr]=null,a[It]&=-65}return a}function Fh(r,i){if(!(128&i[It])){const s=i[Ct];s.destroyNode&&ql(r,i,s,3,null,null),function cd(r){let i=r[Ri];if(!i)return hd(r[$e],r);for(;i;){let s=null;if(dr(i))s=i[Ri];else{const a=i[Zn];a&&(s=a)}if(!s){for(;i&&!i[nr]&&i!==r;)dr(i)&&hd(i[$e],i),i=i[Yt];null===i&&(i=r),dr(i)&&hd(i[$e],i),s=i&&i[nr]}i=s}}(i)}}function hd(r,i){if(!(128&i[It])){i[It]&=-65,i[It]|=128,function Tp(r,i){let s;if(null!=r&&null!=(s=r.destroyHooks))for(let a=0;a<s.length;a+=2){const u=i[s[a]];if(!(u instanceof xi)){const d=s[a+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=u[d[m]],E=d[m+1];fr(4,v,E);try{E.call(v)}finally{fr(5,v,E)}}else{fr(4,u,d);try{d.call(u)}finally{fr(5,u,d)}}}}}(r,i),function Lh(r,i){const s=r.cleanup,a=i[kr];let u=-1;if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+3];m>=0?a[u=m]():a[u=-m].unsubscribe(),d+=2}else{const m=a[u=s[d+1]];s[d].call(m)}if(null!==a){for(let d=u+1;d<a.length;d++)(0,a[d])();i[kr]=null}}(r,i),1===i[$e].type&&i[Ct].destroy();const s=i[Ts];if(null!==s&&Vr(i[Yt])){s!==i[Yt]&&Fa(s,i);const a=i[Lr];null!==a&&a.detachView(r)}!function wp(r){Vo.delete(r[Ni])}(i)}}function fd(r,i,s){return function pd(r,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[Cr];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:d}=r.data[a.directiveStart+u];if(d===at.None||d===at.Emulated)return null}return In(a,s)}}(r,i.parent,s)}function Uo(r,i,s,a,u){r.insertBefore(i,s,a,u)}function La(r,i,s){r.appendChild(i,s)}function Vh(r,i,s,a,u){null!==a?Uo(r,i,s,a,u):La(r,i,s)}function ic(r,i){return r.parentNode(i)}let zl,Bi,Wl=function Ks(r,i,s){return 40&r.type?In(r,s):null};function sc(r,i,s,a){const u=fd(r,a,i),d=i[Ct],v=function Gl(r,i,s){return Wl(r,i,s)}(a.parent||i[En],a,i);if(null!=u)if(Array.isArray(s))for(let E=0;E<s.length;E++)Vh(d,u,s[E],v,!1);else Vh(d,u,s,v,!1);void 0!==zl&&zl(d,a,i,s,u)}function Va(r,i){if(null!==i){const s=i.type;if(3&s)return In(i,r);if(4&s)return ar(-1,r[i.index]);if(8&s){const a=i.child;if(null!==a)return Va(r,a);{const u=r[i.index];return Vr(u)?ar(-1,u):yn(u)}}if(32&s)return tc(i,r)()||yn(r[i.index]);{const a=oc(r,i);return null!==a?Array.isArray(a)?a[0]:Va(Zs(r[zn]),a):Va(r,i.next)}}return null}function oc(r,i){return null!==i?r[zn][En].projection[i.projection]:null}function ar(r,i){const s=Zn+r+1;if(s<i.length){const a=i[s],u=a[$e].firstChild;if(null!==u)return Va(a,u)}return i[Ss]}function Zl(r,i,s,a,u,d,m){for(;null!=s;){const v=a[s.index],E=s.type;if(m&&0===i&&(v&&Dn(yn(v),a),s.flags|=2),32!=(32&s.flags))if(8&E)Zl(r,i,s.child,a,u,d,!1),qs(i,r,u,v,d);else if(32&E){const b=tc(s,a);let A;for(;A=b();)qs(i,r,u,A,d);qs(i,r,u,v,d)}else 16&E?Kl(r,i,a,s,u,d):qs(i,r,u,v,d);s=m?s.projectionNext:s.next}}function ql(r,i,s,a,u,d){Zl(s,a,r.firstChild,i,u,d,!1)}function Kl(r,i,s,a,u,d){const m=s[zn],E=m[En].projection[a.projection];if(Array.isArray(E))for(let b=0;b<E.length;b++)qs(i,r,u,E[b],d);else Zl(r,i,E,m[Yt],u,d,!0)}function Ui(r,i,s){""===s?r.removeAttribute(i,"class"):r.setAttribute(i,"class",s)}function lc(r,i,s){const{mergedAttrs:a,classes:u,styles:d}=s;null!==a&&un(r,i,a),null!==u&&Ui(r,i,u),null!==d&&function Ap(r,i,s){r.setAttribute(i,"style",s)}(r,i,d)}function kt(r){Bi=r}class lr{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Gh=new Ht("ENVIRONMENT_INITIALIZER"),Pp=new Ht("INJECTOR",-1),eu=new Ht("INJECTOR_DEF_TYPES");class cc{get(i,s=Kt){if(s===Kt){const a=new Error(`NullInjectorError: No provider for ${le(i)}!`);throw a.name="NullInjectorError",a}return s}}function $E(...r){return{\u0275providers:zh(0,r),\u0275fromNgModule:!0}}function zh(r,...i){const s=[],a=new Set;let u;return Li(i,d=>{const m=d;Op(m,s,[],a)&&(u||(u=[]),u.push(m))}),void 0!==u&&dc(u,s),s}function dc(r,i){for(let s=0;s<r.length;s++){const{providers:u}=r[s];kp(u,d=>{i.push(d)})}}function Op(r,i,s,a){if(!(r=K(r)))return!1;let u=null,d=Dr(r);const m=!d&&Ot(r);if(d||m){if(m&&!m.standalone)return!1;u=r}else{const E=r.ngModule;if(d=Dr(E),!d)return!1;u=E}const v=a.has(u);if(m){if(v)return!1;if(a.add(u),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const b of E)Op(b,i,s,a)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let b;a.add(u);try{Li(d.imports,A=>{Op(A,i,s,a)&&(b||(b=[]),b.push(A))})}finally{}void 0!==b&&dc(b,i)}if(!v){const b=Xi(u)||(()=>new u);i.push({provide:u,useFactory:b,deps:ut},{provide:eu,useValue:u,multi:!0},{provide:Gh,useValue:()=>ke(u),multi:!0})}const E=d.providers;null==E||v||kp(E,A=>{i.push(A)})}}return u!==r&&void 0!==r.providers}function kp(r,i){for(let s of r)Se(s)&&(s=s.\u0275providers),Array.isArray(s)?kp(s,i):i(s)}const GE=ie({provide:String,useValue:ie});function Fp(r){return null!==r&&"object"==typeof r&&GE in r}function Go(r){return"function"==typeof r}const hc=new Ht("Set Injector scope."),Cd={},D_={};let fc;function qh(){return void 0===fc&&(fc=new cc),fc}class Wo{}class tu extends Wo{get destroyed(){return this._destroyed}constructor(i,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,si(i,m=>this.processProvider(m)),this.records.set(Pp,nu(void 0,this)),u.has("environment")&&this.records.set(Wo,nu(void 0,this));const d=this.records.get(hc);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(eu.multi,ut,Xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=tr(this),a=sn(void 0);try{return i()}finally{tr(s),sn(a)}}get(i,s=Kt,a=Xe.Default){this.assertNotDestroyed(),a=ht(a);const u=tr(this),d=sn(void 0);try{if(!(a&Xe.SkipSelf)){let v=this.records.get(i);if(void 0===v){const E=function KE(r){return"function"==typeof r||"object"==typeof r&&r instanceof Ht}(i)&&$t(i);v=E&&this.injectableDefInScope(E)?nu(wd(i),Cd):null,this.records.set(i,v)}if(null!=v)return this.hydrate(i,v)}return(a&Xe.Self?qh():this.parent).get(i,s=a&Xe.Optional&&s===Kt?null:s)}catch(m){if("NullInjectorError"===m.name){if((m[jn]=m[jn]||[]).unshift(le(i)),u)throw m;return function L(r,i,s,a){const u=r[jn];throw i[Kr]&&u.unshift(i[Kr]),r.message=function F(r,i,s,a=null){r=r&&"\n"===r.charAt(0)&&r.charAt(1)==Bt?r.slice(2):r;let u=le(i);if(Array.isArray(i))u=i.map(le).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let v=i[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):le(v)))}u=`{${d.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${r.replace(ws,"\n  ")}`}("\n"+r.message,u,s,a),r[$n]=u,r[jn]=null,r}(m,i,"R3InjectorError",this.source)}throw m}finally{sn(d),tr(u)}}resolveInjectorInitializers(){const i=tr(this),s=sn(void 0);try{const a=this.get(Gh.multi,ut,Xe.Self);for(const u of a)u()}finally{tr(i),sn(s)}}toString(){const i=[],s=this.records;for(const a of s.keys())i.push(le(a));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(i){let s=Go(i=K(i))?i:K(i&&i.provide);const a=function zE(r){return Fp(r)?nu(void 0,r.useValue):nu(C_(r),Cd)}(i);if(Go(i)||!0!==i.multi)this.records.get(s);else{let u=this.records.get(s);u||(u=nu(void 0,Cd,!0),u.factory=()=>yt(u.multi),this.records.set(s,u)),s=i,u.multi.push(i)}this.records.set(s,a)}hydrate(i,s){return s.value===Cd&&(s.value=D_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qE(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=K(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function wd(r){const i=$t(r),s=null!==i?i.factory:Xi(r);if(null!==s)return s;if(r instanceof Ht)throw new te(204,!1);if(r instanceof Function)return function Lp(r){const i=r.length;if(i>0)throw function Gs(r,i){const s=[];for(let a=0;a<r;a++)s.push(i);return s}(i,"?"),new te(204,!1);const s=function ur(r){const i=r&&(r[er]||r[qt]);return i?(function Ti(r){if(r.hasOwnProperty("name"))return r.name;(""+r).match(/^function\s*([^\s(]+)/)}(r),i):null}(r);return null!==s?()=>s.factory(r):()=>new r}(r);throw new te(204,!1)}function C_(r,i,s){let a;if(Go(r)){const u=K(r);return Xi(u)||wd(u)}if(Fp(r))a=()=>K(r.useValue);else if(function I_(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...yt(r.deps||[]));else if(function Zh(r){return!(!r||!r.useExisting)}(r))a=()=>ke(K(r.useExisting));else{const u=K(r&&(r.useClass||r.provide));if(!function ZE(r){return!!r.deps}(r))return Xi(u)||wd(u);a=()=>new u(...yt(r.deps))}return a}function nu(r,i,s=!1){return{factory:r,value:i,multi:s?[]:void 0}}function si(r,i){for(const s of r)Array.isArray(s)?si(s,i):s&&Se(s)?si(s.\u0275providers,i):i(s)}class Vp{}class Kh{}class ru{resolveComponentFactory(i){throw function Up(r){const i=Error(`No component factory found for ${le(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let zo=(()=>{class r{}return r.NULL=new ru,r})();function Ha(){return pc(kn(),ae())}function pc(r,i){return new Td(In(r,i))}let Td=(()=>{class r{constructor(s){this.nativeElement=s}}return r.__NG_ELEMENT_ID__=Ha,r})();class w_{}let YE=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Qh(){const r=ae(),s=Nn(kn().index,r);return(dr(s)?s:r)[Ct]}(),r})(),Ad=(()=>{class r{}return r.\u0275prov=We({token:r,providedIn:"root",factory:()=>null}),r})();class Bp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Md=new Bp("15.2.1"),Zo={},Rd="ngOriginalError";function en(r){return r[Rd]}class Wr{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&en(i);for(;s&&en(s);)s=en(s);return s||null}}function M_(r,i,s){let a=r.length;for(;;){const u=r.indexOf(i,s);if(-1===u)return u;if(0===u||r.charCodeAt(u-1)<=32){const d=i.length;if(u+d===a||r.charCodeAt(u+d)<=32)return u}s=u+1}}const R_="ng-template";function JE(r,i,s){let a=0;for(;a<r.length;){let u=r[a++];if(s&&"class"===u){if(u=r[a],-1!==M_(u.toLowerCase(),i,0))return!0}else if(1===u){for(;a<r.length&&"string"==typeof(u=r[a++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function $p(r){return 4===r.type&&r.value!==R_}function N_(r,i,s){return i===(4!==r.type||s?r.value:R_)}function XE(r,i,s){let a=4;const u=r.attrs||[],d=function nI(r){for(let i=0;i<r.length;i++)if(wo(r[i]))return i;return r.length}(u);let m=!1;for(let v=0;v<i.length;v++){const E=i[v];if("number"!=typeof E){if(!m)if(4&a){if(a=2|1&a,""!==E&&!N_(r,E,s)||""===E&&1===i.length){if(ms(a))return!1;m=!0}}else{const b=8&a?E:i[++v];if(8&a&&null!==r.attrs){if(!JE(r.attrs,b,s)){if(ms(a))return!1;m=!0}continue}const O=eI(8&a?"class":E,u,$p(r),s);if(-1===O){if(ms(a))return!1;m=!0;continue}if(""!==b){let $;$=O>d?"":u[O+1].toLowerCase();const q=8&a?$:null;if(q&&-1!==M_(q,b,0)||2&a&&b!==$){if(ms(a))return!1;m=!0}}}}else{if(!m&&!ms(a)&&!ms(E))return!1;if(m&&ms(E))continue;m=!1,a=E|1&a}}return ms(a)||m}function ms(r){return 0==(1&r)}function eI(r,i,s,a){if(null===i)return-1;let u=0;if(a||!s){let d=!1;for(;u<i.length;){const m=i[u];if(m===r)return u;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=i[++u];for(;"string"==typeof v;)v=i[++u];continue}if(4===m)break;if(0===m){u+=4;continue}}u+=d?1:2}return-1}return function Xh(r,i){let s=r.indexOf(4);if(s>-1)for(s++;s<r.length;){const a=r[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,r)}function P_(r,i,s=!1){for(let a=0;a<i.length;a++)if(XE(r,i[a],s))return!0;return!1}function Wp(r,i){return r?":not("+i.trim()+")":i}function ef(r){let i=r[0],s=1,a=2,u="",d=!1;for(;s<r.length;){let m=r[s];if("string"==typeof m)if(2&a){const v=r[++s];u+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?u+="."+m:4&a&&(u+=" "+m);else""!==u&&!ms(m)&&(i+=Wp(d,u),u=""),a=m,d=d||!ms(a);s++}return""!==u&&(i+=Wp(d,u)),i}const bt={};function Zp(r){O_(xt(),ae(),sr()+r,!1)}function O_(r,i,s,a){if(!a)if(3==(3&i[It])){const d=r.preOrderCheckHooks;null!==d&&ss(i,d,s)}else{const d=r.preOrderHooks;null!==d&&Al(i,d,0,s)}Fs(s)}function tf(r,i=null,s=null,a){const u=Yp(r,i,s,a);return u.resolveInjectorInitializers(),u}function Yp(r,i=null,s=null,a,u=new Set){const d=[s||ut,$E(r)];return a=a||("object"==typeof r?void 0:le(r)),new tu(d,i||qh(),a||null,u)}let su=(()=>{class r{static create(s,a){if(Array.isArray(s))return tf({name:""},a,s,"");{const u=s.name??"";return tf({name:u},s.parent,s.providers,u)}}}return r.THROW_IF_NOT_FOUND=Kt,r.NULL=new cc,r.\u0275prov=We({token:r,providedIn:"any",factory:()=>ke(Pp)}),r.__NG_ELEMENT_ID__=-1,r})();function gc(r,i=Xe.Default){const s=ae();return null===s?ke(r,i):Hu(kn(),s,K(r),i)}function ng(r,i){const s=r.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a+1];if(-1!==d){const m=r.data[d];bl(s[a]),m.contentQueries(2,i[d],d)}}}function _s(r,i,s,a,u,d,m,v,E,b,A){const O=i.blueprint.slice();return O[Cr]=u,O[It]=76|a,(null!==A||r&&1024&r[It])&&(O[It]|=1024),mo(O),O[Yt]=O[Fr]=r,O[ln]=s,O[Ki]=m||r&&r[Ki],O[Ct]=v||r&&r[Ct],O[al]=E||r&&r[al]||null,O[bs]=b||r&&r[bs]||null,O[En]=d,O[Ni]=function Mn(){return wh++}(),O[ci]=A,O[zn]=2==i.type?r[zn]:O,O}function to(r,i,s,a,u){let d=r.data[i];if(null===d)d=function ig(r,i,s,a,u){const d=yo(),m=ca(),E=r.data[i]=function Fd(r,i,s,a,u,d){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,i,a,u);return null===r.firstChild&&(r.firstChild=E),null!==d&&(m?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E,E.prev=d)),E}(r,i,s,a,u),function xu(){return _t.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=s,d.value=a,d.attrs=u;const m=function ua(){const r=_t.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return pr(d,!0),d}function xd(r,i,s,a){if(0===s)return-1;const u=i.length;for(let d=0;d<s;d++)i.push(a),r.blueprint.push(a),r.data.push(null);return u}function sg(r,i,s){fa(i);try{const a=r.viewQuery;null!==a&&ji(1,a,s);const u=r.template;null!==u&&og(r,i,u,1,s),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ng(r,i),r.staticViewQueries&&ji(2,r.viewQuery,s);const d=r.components;null!==d&&function _I(r,i){for(let s=0;s<i.length;s++)DI(r,i[s])}(i,d)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{i[It]&=-5,gh()}}function au(r,i,s,a){const u=i[It];if(128!=(128&u)){fa(i);try{mo(i),function Pi(r){return _t.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==s&&og(r,i,s,2,a);const m=3==(3&u);if(m){const b=r.preOrderCheckHooks;null!==b&&ss(i,b,null)}else{const b=r.preOrderHooks;null!==b&&Al(i,b,0,null),Oi(i,0)}if(function _g(r){for(let i=Hl(r);null!==i;i=nc(i)){if(!i[Su])continue;const s=i[rr];for(let a=0;a<s.length;a++){const u=s[a];512&u[It]||_o(u[Yt],1),u[It]|=512}}}(i),function Ud(r){for(let i=Hl(r);null!==i;i=nc(i))for(let s=Zn;s<i.length;s++){const a=i[s],u=a[$e];ks(a)&&au(u,a,u.template,a[ln])}}(i),null!==r.contentQueries&&ng(r,i),m){const b=r.contentCheckHooks;null!==b&&ss(i,b)}else{const b=r.contentHooks;null!==b&&Al(i,b,1),Oi(i,1)}!function mI(r,i){const s=r.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)Fs(~u);else{const d=u,m=s[++a],v=s[++a];ku(m,d),v(2,i[d])}}}finally{Fs(-1)}}(r,i);const v=r.components;null!==v&&function rg(r,i){for(let s=0;s<i.length;s++)II(r,i[s])}(i,v);const E=r.viewQuery;if(null!==E&&ji(2,E,a),m){const b=r.viewCheckHooks;null!==b&&ss(i,b)}else{const b=r.viewHooks;null!==b&&Al(i,b,2),Oi(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[It]&=-41,512&i[It]&&(i[It]&=-513,_o(i[Yt],-1))}finally{gh()}}}function og(r,i,s,a,u){const d=sr(),m=2&a;try{Fs(-1),m&&i.length>Gt&&O_(r,i,Gt,!1),fr(m?2:0,u),s(a,u)}finally{Fs(d),fr(m?3:1,u)}}function ag(r,i,s){if(uo(i)){const u=i.directiveEnd;for(let d=i.directiveStart;d<u;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,s[d],d)}}}function kd(r,i,s){la()&&(function q_(r,i,s,a){const u=s.directiveStart,d=s.directiveEnd;Ur(s)&&function gg(r,i,s){const a=In(i,r),u=W_(s),d=r[Ki],m=uu(r,_s(r,u,null,s.onPush?32:16,a,i,d,d.createRenderer(a,s),null,null,null));r[i.index]=m}(i,s,r.data[u+s.componentOffset]),r.firstCreatePass||js(s,i),Dn(a,i);const m=s.initialInputs;for(let v=u;v<d;v++){const E=r.data[v],b=ti(i,r,v,s);Dn(b,i),null!==m&&cf(0,v-u,b,E,0,m),hr(E)&&(Nn(s.index,i)[ln]=ti(i,r,v,s))}}(r,i,s,In(s,i)),64==(64&s.flags)&&K_(r,i,s))}function mc(r,i,s=In){const a=i.localNames;if(null!==a){let u=i.index+1;for(let d=0;d<a.length;d+=2){const m=a[d+1],v=-1===m?s(i,r):r[m];r[u++]=v}}}function W_(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Ga(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Ga(r,i,s,a,u,d,m,v,E,b){const A=Gt+a,O=A+u,$=function z_(r,i){const s=[];for(let a=0;a<i;a++)s.push(a<r?null:bt);return s}(A,O),q="function"==typeof b?b():b;return $[$e]={type:r,blueprint:$,template:s,queries:null,viewQuery:v,declTNode:i,data:$.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:q,incompleteFirstPass:!1}}function Ld(r,i,s,a){for(let u in r)if(r.hasOwnProperty(u)){s=null===s?{}:s;const d=r[u];null===a?af(s,i,u,d):a.hasOwnProperty(u)&&af(s,i,a[u],d)}return s}function af(r,i,s,a){r.hasOwnProperty(s)?r[s].push(i,a):r[s]=[i,a]}function _c(r,i){const s=Nn(i,r);16&s[It]||(s[It]|=32)}function dg(r,i,s,a){if(la()){const u=null===a?null:{"":-1},d=function Y_(r,i){const s=r.directiveRegistry;let a=null,u=null;if(s)for(let d=0;d<s.length;d++){const m=s[d];if(P_(i,m.selectors,!1))if(a||(a=[]),hr(m))if(null!==m.findHostDirectiveDefs){const v=[];u=u||new Map,m.findHostDirectiveDefs(m,v,u),a.unshift(...v,m),Vd(r,i,v.length)}else a.unshift(m),Vd(r,i,0);else u=u||new Map,m.findHostDirectiveDefs?.(m,a,u),a.push(m)}return null===a?null:[a,u]}(r,s);let m,v;null===d?m=v=null:[m,v]=d,null!==m&&lf(r,i,s,m,u,v),u&&function fg(r,i,s){if(i){const a=r.localNames=[];for(let u=0;u<i.length;u+=2){const d=s[i[u+1]];if(null==d)throw new te(-301,!1);a.push(i[u],d)}}}(s,a,u)}s.mergedAttrs=gi(s.mergedAttrs,s.attrs)}function lf(r,i,s,a,u,d){for(let b=0;b<a.length;b++)Ro(js(s,i),r,a[b].type);!function uf(r,i,s){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+s,r.providerIndexes=i}(s,r.data.length,a.length);for(let b=0;b<a.length;b++){const A=a[b];A.providersResolver&&A.providersResolver(A)}let m=!1,v=!1,E=xd(r,i,a.length,null);for(let b=0;b<a.length;b++){const A=a[b];s.mergedAttrs=gi(s.mergedAttrs,A.hostAttrs),lu(r,s,i,E,A),pg(E,A,u),null!==A.contentQueries&&(s.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(s.flags|=64);const O=A.type.prototype;!m&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(s.index),m=!0),!v&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s.index),v=!0),E++}!function ug(r,i,s){const u=i.directiveEnd,d=r.data,m=i.attrs,v=[];let E=null,b=null;for(let A=i.directiveStart;A<u;A++){const O=d[A],$=s?s.get(O):null,fe=$?$.outputs:null;E=Ld(O.inputs,A,E,$?$.inputs:null),b=Ld(O.outputs,A,b,fe);const Ne=null===E||null===m||$p(i)?null:Q_(E,A,m);v.push(Ne)}null!==E&&(E.hasOwnProperty("class")&&(i.flags|=8),E.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=v,i.inputs=E,i.outputs=b}(r,s,d)}function K_(r,i,s){const a=s.directiveStart,u=s.directiveEnd,d=s.index,m=function Cl(){return _t.lFrame.currentDirectiveIndex}();try{Fs(d);for(let v=a;v<u;v++){const E=r.data[v],b=i[v];wl(v),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&EI(E,b)}}finally{Fs(-1),wl(m)}}function EI(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Vd(r,i,s){i.componentOffset=s,(r.components||(r.components=[])).push(i.index)}function pg(r,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=r;hr(i)&&(s[""]=r)}}function lu(r,i,s,a,u){r.data[a]=u;const d=u.factory||(u.factory=Xi(u.type)),m=new xi(d,hr(u),gc);r.blueprint[a]=m,s[a]=m,function hg(r,i,s,a,u){const d=u.hostBindings;if(d){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const v=~i.index;(function vI(r){let i=r.length;for(;i>0;){const s=r[--i];if("number"==typeof s&&s<0)return s}return 0})(m)!=v&&m.push(v),m.push(s,a,d)}}(r,i,a,xd(r,s,u.hostVars,bt),u)}function ys(r,i,s,a,u,d){const m=In(r,i);!function mg(r,i,s,a,u,d,m){if(null==d)r.removeAttribute(i,u,s);else{const v=null==m?de(d):m(d,a||"",u);r.setAttribute(i,u,v,s)}}(i[Ct],m,d,r.value,s,a,u)}function cf(r,i,s,a,u,d){const m=d[i];if(null!==m){const v=a.setInput;for(let E=0;E<m.length;){const b=m[E++],A=m[E++],O=m[E++];null!==v?a.setInput(s,O,b,A):s[A]=O}}}function Q_(r,i,s){let a=null,u=0;for(;u<s.length;){const d=s[u];if(0!==d)if(5!==d){if("number"==typeof d)break;if(r.hasOwnProperty(d)){null===a&&(a=[]);const m=r[d];for(let v=0;v<m.length;v+=2)if(m[v]===i){a.push(d,m[v+1],s[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function J_(r,i,s,a){return[r,!0,!1,i,null,0,a,s,null,null]}function II(r,i){const s=Nn(i,r);if(ks(s)){const a=s[$e];48&s[It]?au(a,s,a.template,s[ln]):s[ui]>0&&yg(s)}}function yg(r){for(let a=Hl(r);null!==a;a=nc(a))for(let u=Zn;u<a.length;u++){const d=a[u];if(ks(d))if(512&d[It]){const m=d[$e];au(m,d,m.template,d[ln])}else d[ui]>0&&yg(d)}const s=r[$e].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Nn(s[a],r);ks(u)&&u[ui]>0&&yg(u)}}function DI(r,i){const s=Nn(i,r),a=s[$e];(function vg(r,i){for(let s=i.length;s<r.blueprint.length;s++)i.push(r.blueprint[s])})(a,s),sg(a,s,s[ln])}function uu(r,i){return r[Ri]?r[ll][nr]=i:r[Ri]=i,r[ll]=i,i}function df(r){for(;r;){r[It]|=32;const i=Zs(r);if(co(r)&&!i)return r;r=i}return null}function hf(r,i,s,a=!0){const u=i[Ki];u.begin&&u.begin();try{au(r,i,r.template,s)}catch(m){throw a&&yc(i,m),m}finally{u.end&&u.end()}}function ji(r,i,s){bl(0),i(r,s)}function X_(r){return r[kr]||(r[kr]=[])}function Eg(r){return r.cleanup||(r.cleanup=[])}function yc(r,i){const s=r[bs],a=s?s.get(Wr,null):null;a&&a.handleError(i)}function cu(r,i,s,a,u){for(let d=0;d<s.length;){const m=s[d++],v=s[d++],E=i[m],b=r.data[m];null!==b.setInput?b.setInput(E,u,a,v):E[v]=u}}function zr(r,i,s){let a=s?r.styles:null,u=s?r.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const v=i[m];"number"==typeof v?d=v:1==d?u=ye(u,v):2==d&&(a=ye(a,v+": "+i[++m]+";"))}s?r.styles=a:r.stylesWithoutHost=a,s?r.classes=u:r.classesWithoutHost=u}function Bd(r,i,s,a,u=!1){for(;null!==s;){const d=i[s.index];if(null!==d&&a.push(yn(d)),Vr(d))for(let v=Zn;v<d.length;v++){const E=d[v],b=E[$e].firstChild;null!==b&&Bd(E[$e],E,b,a)}const m=s.type;if(8&m)Bd(r,i,s.child,a);else if(32&m){const v=tc(s,i);let E;for(;E=v();)a.push(E)}else if(16&m){const v=oc(i,s);if(Array.isArray(v))a.push(...v);else{const E=Zs(i[zn]);Bd(E[$e],E,v,a,!0)}}s=u?s.projectionNext:s.next}return a}class Hd{get rootNodes(){const i=this._lView,s=i[$e];return Bd(s,i,s.firstChild,[])}constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(i){this._lView[ln]=i}get destroyed(){return 128==(128&this._lView[It])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Yt];if(Vr(i)){const s=i[Qi],a=s?s.indexOf(this):-1;a>-1&&(dd(i,a),$s(s,a))}this._attachedToViewContainer=!1}Fh(this._lView[$e],this._lView)}onDestroy(i){!function lg(r,i,s,a){const u=X_(i);null===s?u.push(a):(u.push(s),r.firstCreatePass&&Eg(r).push(a,u.length-1))}(this._lView[$e],this._lView,null,i)}markForCheck(){df(this._cdRefInjectingView||this._lView)}detach(){this._lView[It]&=-65}reattach(){this._lView[It]|=64}detectChanges(){hf(this._lView[$e],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ud(r,i){ql(r,i,i[Ct],2,null,null)}(this._lView[$e],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=i}}class mf extends Hd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;hf(i[$e],i,i[ln],!1)}checkNoChanges(){}get context(){return null}}class Ig extends zo{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Ot(i);return new vc(s,this.ngModule)}}function ai(r){const i=[];for(let s in r)r.hasOwnProperty(s)&&i.push({propName:r[s],templateName:s});return i}class CI{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,a){a=ht(a);const u=this.injector.get(i,Zo,a);return u!==Zo||s===Zo?u:this.parentInjector.get(i,s,a)}}class vc extends Kh{get inputs(){return ai(this.componentDef.inputs)}get outputs(){return ai(this.componentDef.outputs)}constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function rI(r){return r.map(ef).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}create(i,s,a,u){let d=(u=u||this.ngModule)instanceof Wo?u:u?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const m=d?new CI(i,d):i,v=m.get(w_,null);if(null===v)throw new te(407,!1);const E=m.get(Ad,null),b=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=a?function Z_(r,i,s){return r.selectRootElement(i,s===at.ShadowDom)}(b,a,this.componentDef.encapsulation):$l(b,A,function ey(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(A)),$=this.componentDef.onPush?288:272,q=Ga(0,null,null,1,0,null,null,null,null,null),fe=_s(null,q,null,$,null,null,v,b,E,m,null);let Ne,Ue;fa(fe);try{const Je=this.componentDef;let gt,we=null;Je.findHostDirectiveDefs?(gt=[],we=new Map,Je.findHostDirectiveDefs(Je,gt,we),gt.push(Je)):gt=[Je];const ct=function bI(r,i){const s=r[$e],a=Gt;return r[a]=i,to(s,a,2,"#host",null)}(fe,O),hn=function ty(r,i,s,a,u,d,m,v){const E=u[$e];!function jd(r,i,s,a){for(const u of r)i.mergedAttrs=gi(i.mergedAttrs,u.hostAttrs);null!==i.mergedAttrs&&(zr(i,i.mergedAttrs,!0),null!==s&&lc(a,s,i))}(a,r,i,m);const b=d.createRenderer(i,s),A=_s(u,W_(s),null,s.onPush?32:16,u[r.index],r,d,b,v||null,null,null);return E.firstCreatePass&&Vd(E,r,a.length-1),uu(u,A),u[r.index]=A}(ct,O,Je,gt,fe,v,b);Ue=xs(q,Gt),O&&function ry(r,i,s,a){if(a)un(r,s,["ng-version",Md.full]);else{const{attrs:u,classes:d}=function zp(r){const i=[],s=[];let a=1,u=2;for(;a<r.length;){let d=r[a];if("string"==typeof d)2===u?""!==d&&i.push(d,r[++a]):8===u&&s.push(d);else{if(!ms(u))break;u=d}a++}return{attrs:i,classes:s}}(i.selectors[0]);u&&un(r,s,u),d&&d.length>0&&Ui(r,s,d.join(" "))}}(b,Je,O,a),void 0!==s&&function TI(r,i,s){const a=r.projection=[];for(let u=0;u<i.length;u++){const d=s[u];a.push(null!=d?Array.from(d):null)}}(Ue,this.ngContentSelectors,s),Ne=function ny(r,i,s,a,u,d){const m=kn(),v=u[$e],E=In(m,u);lf(v,u,m,s,null,a);for(let A=0;A<s.length;A++)Dn(ti(u,v,m.directiveStart+A,m),u);K_(v,u,m),E&&Dn(E,u);const b=ti(u,v,m.directiveStart+m.componentOffset,m);if(r[ln]=u[ln]=b,null!==d)for(const A of d)A(b,i);return ag(v,m,r),b}(hn,Je,gt,we,fe,[Dg]),sg(q,fe,null)}finally{gh()}return new wI(this.componentType,Ne,pc(Ue,fe),fe,Ue)}}class wI extends Vp{constructor(i,s,a,u,d){super(),this.location=a,this._rootLView=u,this._tNode=d,this.instance=s,this.hostView=this.changeDetectorRef=new mf(u),this.componentType=i}setInput(i,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[i])){const d=this._rootLView;cu(d[$e],d,u,i,s),_c(d,this._tNode.index)}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Dg(){const r=kn();Eo(ae()[$e],r)}function Cg(r){let i=function $d(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),s=!0;const a=[r];for(;i;){let u;if(hr(r))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new te(903,!1);u=i.\u0275dir}if(u){if(s){a.push(u);const m=r;m.inputs=bg(r.inputs),m.declaredInputs=bg(r.declaredInputs),m.outputs=bg(r.outputs);const v=u.hostBindings;v&&iy(r,v);const E=u.viewQuery,b=u.contentQueries;if(E&&SI(r,E),b&&AI(r,b),me(r.inputs,u.inputs),me(r.declaredInputs,u.declaredInputs),me(r.outputs,u.outputs),hr(u)&&u.data.animation){const A=r.data;A.animation=(A.animation||[]).concat(u.data.animation)}}const d=u.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(r),v===Cg&&(s=!1)}}i=Object.getPrototypeOf(i)}!function wg(r){let i=0,s=null;for(let a=r.length-1;a>=0;a--){const u=r[a];u.hostVars=i+=u.hostVars,u.hostAttrs=gi(u.hostAttrs,s=gi(s,u.hostAttrs))}}(a)}function bg(r){return r===Lt?{}:r===ut?[]:r}function SI(r,i){const s=r.viewQuery;r.viewQuery=s?(a,u)=>{i(a,u),s(a,u)}:i}function AI(r,i){const s=r.contentQueries;r.contentQueries=s?(a,u,d)=>{i(a,u,d),s(a,u,d)}:i}function iy(r,i){const s=r.hostBindings;r.hostBindings=s?(a,u)=>{i(a,u),s(a,u)}:i}function hu(r){return!!Ag(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function Ag(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Qn(r,i,s){return!Object.is(r[i],s)&&(r[i]=s,!0)}function Mg(r,i,s,a){const u=ae();return Qn(u,is(),i)&&(xt(),ys(Qt(),u,r,i,s,a)),Mg}function _f(r,i,s,a,u,d,m,v){const E=ae(),b=xt(),A=r+Gt,O=b.firstCreatePass?function kI(r,i,s,a,u,d,m,v,E){const b=i.consts,A=to(i,r,4,m||null,hi(b,v));dg(i,s,A,hi(b,E)),Eo(i,A);const O=A.tViews=Ga(2,A,a,u,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,b);return null!==i.queries&&(i.queries.template(i,A),O.queries=i.queries.embeddedTView(A)),A}(A,b,E,i,s,a,u,d,m):b.data[A];pr(O,!1);const $=E[Ct].createComment("");sc(b,E,$,O),Dn($,E),uu(E,E[A]=J_($,E,$,O)),ul(O)&&kd(b,E,O),null!=m&&mc(E,O,v)}function uy(r){return function rs(r,i){return r[i]}(function Ou(){return _t.lFrame.contextLView}(),Gt+r)}function Pg(r,i,s){const a=ae();return Qn(a,is(),i)&&function Ii(r,i,s,a,u,d,m,v){const E=In(i,s);let A,b=i.inputs;!v&&null!=b&&(A=b[a])?(cu(r,s,A,a,u),Ur(i)&&_c(s,i.index)):3&i.type&&(a=function cg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),u=null!=m?m(u,i.value||"",a):u,d.setProperty(E,a,u))}(xt(),Qt(),a,r,i,a[Ct],s,!1),Pg}function Og(r,i,s,a,u){const m=u?"class":"style";cu(r,s,i.inputs[m],m,a)}function _u(r,i,s,a){const u=ae(),d=xt(),m=Gt+r,v=u[Ct],E=d.firstCreatePass?function zd(r,i,s,a,u,d){const m=i.consts,E=to(i,r,2,a,hi(m,u));return dg(i,s,E,hi(m,d)),null!==E.attrs&&zr(E,E.attrs,!1),null!==E.mergedAttrs&&zr(E,E.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,E),E}(m,d,u,i,s,a):d.data[m],b=u[m]=$l(v,i,function mh(){return _t.lFrame.currentNamespace}()),A=ul(E);return pr(E,!0),lc(v,b,E),32!=(32&E.flags)&&sc(d,u,b,E),0===function aa(){return _t.lFrame.elementDepthCount}()&&Dn(b,u),function yl(){_t.lFrame.elementDepthCount++}(),A&&(kd(d,u,E),ag(d,E,u)),null!==a&&mc(u,E),_u}function Ka(){let r=kn();ca()?function da(){_t.lFrame.isParent=!1}():(r=r.parent,pr(r,!1));const i=r;!function vl(){_t.lFrame.elementDepthCount--}();const s=xt();return s.firstCreatePass&&(Eo(s,r),uo(r)&&s.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Bu(r){return 0!=(8&r.flags)}(i)&&Og(s,i,ae(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function qc(r){return 0!=(16&r.flags)}(i)&&Og(s,i,ae(),i.stylesWithoutHost,!1),Ka}function Zd(r,i,s,a){return _u(r,i,s,a),Ka(),Zd}function kg(){return ae()}function Ci(r){return!!r&&"function"==typeof r.then}function Fg(r){return!!r&&"function"==typeof r.subscribe}const dy=Fg;function Lg(r,i,s,a){const u=ae(),d=xt(),m=kn();return function py(r,i,s,a,u,d,m){const v=ul(a),b=r.firstCreatePass&&Eg(r),A=i[ln],O=X_(i);let $=!0;if(3&a.type||m){const Ne=In(a,i),Ue=m?m(Ne):Ne,Je=O.length,gt=m?ct=>m(yn(ct[a.index])):a.index;let we=null;if(!m&&v&&(we=function fy(r,i,s,a){const u=r.cleanup;if(null!=u)for(let d=0;d<u.length-1;d+=2){const m=u[d];if(m===s&&u[d+1]===a){const v=i[kr],E=u[d+2];return v.length>E?v[E]:null}"string"==typeof m&&(d+=2)}return null}(r,i,u,a.index)),null!==we)(we.__ngLastListenerFn__||we).__ngNextListenerFn__=d,we.__ngLastListenerFn__=d,$=!1;else{d=my(a,i,A,d,!1);const ct=s.listen(Ue,u,d);O.push(d,ct),b&&b.push(u,gt,Je,Je+1)}}else d=my(a,i,A,d,!1);const q=a.outputs;let fe;if($&&null!==q&&(fe=q[u])){const Ne=fe.length;if(Ne)for(let Ue=0;Ue<Ne;Ue+=2){const hn=i[fe[Ue]][fe[Ue+1]].subscribe(d),xn=O.length;O.push(d,hn),b&&b.push(u,a.index,xn,-(xn+1))}}}(d,u,u[Ct],m,r,i,a),Lg}function gy(r,i,s,a){try{return fr(6,i,s),!1!==s(a)}catch(u){return yc(r,u),!1}finally{fr(7,i,s)}}function my(r,i,s,a,u){return function d(m){if(m===Function)return a;df(r.componentOffset>-1?Nn(r.index,i):i);let E=gy(i,s,a,m),b=d.__ngNextListenerFn__;for(;b;)E=gy(i,s,b,m)&&E,b=b.__ngNextListenerFn__;return u&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function _y(r=1){return function mp(r){return(_t.lFrame.contextLView=function Vu(r,i){for(;r>0;)i=i[Fr],r--;return i}(r,_t.lFrame.contextLView))[ln]}(r)}function li(r,i){return r<<17|i<<2}function Ya(r){return r>>17&32767}function Bg(r){return 2|r}function Qa(r){return(131068&r)>>2}function Hg(r,i){return-131069&r|i<<2}function jg(r){return 1|r}function GI(r,i,s,a,u){const d=r[s+1],m=null===i;let v=a?Ya(d):Qa(d),E=!1;for(;0!==v&&(!1===E||m);){const A=r[v+1];Ay(r[v],i)&&(E=!0,r[v+1]=a?jg(A):Bg(A)),v=a?Ya(A):Qa(A)}E&&(r[s+1]=a?Bg(d):jg(d))}function Ay(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&Ma(r,i)>=0}function $g(r,i){return function Cn(r,i,s,a){const u=ae(),d=xt(),m=function Xr(r){const i=_t.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,s}(2);d.firstUpdatePass&&function Ly(r,i,s,a){const u=r.data;if(null===u[s+1]){const d=u[sr()],m=function Fy(r,i){return i>=r.expandoStartIndex}(r,s);(function $y(r,i){return 0!=(r.flags&(i?8:16))})(d,a)&&null===i&&!m&&(i=!1),i=function QI(r,i,s,a){const u=function fi(r){const i=_t.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=a?i.residualClasses:i.residualStyles;if(null===u)0===(a?i.classBindings:i.styleBindings)&&(s=qd(s=Gg(null,r,i,s,a),i.attrs,a),d=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==u)if(s=Gg(u,r,i,s,a),null===d){let E=function JI(r,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==Qa(a))return r[Ya(a)]}(r,i,a);void 0!==E&&Array.isArray(E)&&(E=Gg(null,r,i,E[1],a),E=qd(E,i.attrs,a),function Vy(r,i,s,a){r[Ya(s?i.classBindings:i.styleBindings)]=a}(r,i,a,E))}else d=function Ef(r,i,s){let a;const u=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<u;d++)a=qd(a,r[d].hostAttrs,s);return qd(a,i.attrs,s)}(r,i,a)}return void 0!==d&&(a?i.residualClasses=d:i.residualStyles=d),s}(u,d,i,a),function jI(r,i,s,a,u,d){let m=d?i.classBindings:i.styleBindings,v=Ya(m),E=Qa(m);r[a]=s;let A,b=!1;if(Array.isArray(s)?(A=s[1],(null===A||Ma(s,A)>0)&&(b=!0)):A=s,u)if(0!==E){const $=Ya(r[v+1]);r[a+1]=li($,v),0!==$&&(r[$+1]=Hg(r[$+1],a)),r[v+1]=function Sy(r,i){return 131071&r|i<<17}(r[v+1],a)}else r[a+1]=li(v,0),0!==v&&(r[v+1]=Hg(r[v+1],a)),v=a;else r[a+1]=li(E,0),0===v?v=a:r[E+1]=Hg(r[E+1],a),E=a;b&&(r[a+1]=Bg(r[a+1])),GI(r,A,a,!0),GI(r,A,a,!1),function $I(r,i,s,a,u){const d=u?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&Ma(d,i)>=0&&(s[a+1]=jg(s[a+1]))}(i,A,r,a,d),m=li(v,E),d?i.classBindings=m:i.styleBindings=m}(u,d,i,s,m,a)}}(d,r,m,a),i!==bt&&Qn(u,m,i)&&function Wg(r,i,s,a,u,d,m,v){if(!(3&i.type))return;const E=r.data,b=E[v+1],A=function BI(r){return 1==(1&r)}(b)?jy(E,i,s,u,Qa(b),m):void 0;If(A)||(If(d)||function Ug(r){return 2==(2&r)}(b)&&(d=jy(E,null,s,u,v,m)),function md(r,i,s,a,u){if(i)u?r.addClass(s,a):r.removeClass(s,a);else{let d=-1===a.indexOf("-")?void 0:Un.DashCase;null==u?r.removeStyle(s,a,d):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),d|=Un.Important),r.setStyle(s,a,u,d))}}(a,m,ns(sr(),s),u,d))}(d,d.data[sr()],u,u[Ct],r,u[m+1]=function XI(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=le(function y(r){return r instanceof lr?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(i,s),a,m)}(r,i,null,!0),$g}function Gg(r,i,s,a,u){let d=null;const m=s.directiveEnd;let v=s.directiveStylingLast;for(-1===v?v=s.directiveStart:v++;v<m&&(d=i[v],a=qd(a,d.hostAttrs,u),d!==r);)v++;return null!==r&&(s.directiveStylingLast=v),a}function qd(r,i,s){const a=s?1:2;let u=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?u=m:u===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ln(r,m,!!s||i[++d]))}return void 0===r?null:r}function jy(r,i,s,a,u,d){const m=null===i;let v;for(;u>0;){const E=r[u],b=Array.isArray(E),A=b?E[1]:E,O=null===A;let $=s[u+1];$===bt&&($=O?ut:void 0);let q=O?kl($,a):A===a?$:void 0;if(b&&!If(q)&&(q=kl(E,a)),If(q)&&(v=q,m))return v;const fe=r[u+1];u=m?Ya(fe):Qa(fe)}if(null!==i){let E=d?i.residualClasses:i.residualStyles;null!=E&&(v=kl(E,a))}return v}function If(r){return void 0!==r}function Gy(r,i=""){const s=ae(),a=xt(),u=r+Gt,d=a.firstCreatePass?to(a,u,1,i,null):a.data[u],m=s[u]=function jl(r,i){return r.createText(i)}(s[Ct],i);sc(a,s,m,d),pr(d,!1)}function zg(r){return Df("",r,""),zg}function Df(r,i,s){const a=ae(),u=function wc(r,i,s,a){return Qn(r,is(),s)?i+de(s)+a:bt}(a,r,i,s);return u!==bt&&function Ko(r,i,s){const a=ns(i,r);!function rc(r,i,s){r.setValue(i,s)}(r[Ct],a,s)}(a,sr(),u),Df}const Xa=void 0;var Sf=["en",[["a","p"],["AM","PM"],Xa],[["AM","PM"],Xa,Xa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xa,"{1} 'at' {0}",Xa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Qg(r){const s=Math.floor(Math.abs(r)),a=r.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let el={};function Jg(r){const i=function iv(r){return r.toLowerCase().replace(/_/g,"-")}(r);let s=rv(i);if(s)return s;const a=i.split("-")[0];if(s=rv(a),s)return s;if("en"===a)return Sf;throw new te(701,!1)}function nv(r){return Jg(r)[lt.PluralCase]}function rv(r){return r in el||(el[r]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[r]),el[r]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const Sc="en-US";let Xg=Sc;function pm(r,i,s,a,u){if(r=K(r),Array.isArray(r))for(let d=0;d<r.length;d++)pm(r[d],i,s,a,u);else{const d=xt(),m=ae();let v=Go(r)?r:K(r.provide),E=C_(r);const b=kn(),A=1048575&b.providerIndexes,O=b.directiveStart,$=b.providerIndexes>>20;if(Go(r)||!r.multi){const q=new xi(E,u,gc),fe=Uf(v,i,u?A:A+$,O);-1===fe?(Ro(js(b,m),d,v),Vf(d,r,i.length),i.push(v),b.directiveStart++,b.directiveEnd++,u&&(b.providerIndexes+=1048576),s.push(q),m.push(q)):(s[fe]=q,m[fe]=q)}else{const q=Uf(v,i,A+$,O),fe=Uf(v,i,A,A+$),Ue=fe>=0&&s[fe];if(u&&!Ue||!u&&!(q>=0&&s[q])){Ro(js(b,m),d,v);const Je=function Av(r,i,s,a,u){const d=new xi(r,s,gc);return d.multi=[],d.index=i,d.componentProviders=0,gm(d,u,a&&!s),d}(u?th:Sv,s.length,u,a,E);!u&&Ue&&(s[fe].providerFactory=Je),Vf(d,r,i.length,0),i.push(v),b.directiveStart++,b.directiveEnd++,u&&(b.providerIndexes+=1048576),s.push(Je),m.push(Je)}else Vf(d,r,q>-1?q:fe,gm(s[u?fe:q],E,!u&&a));!u&&a&&Ue&&s[fe].componentProviders++}}}function Vf(r,i,s,a){const u=Go(i),d=function WE(r){return!!r.useClass}(i);if(u||d){const E=(d?K(i.useClass):i).prototype.ngOnDestroy;if(E){const b=r.destroyHooks||(r.destroyHooks=[]);if(!u&&i.multi){const A=b.indexOf(s);-1===A?b.push(s,[a,E]):b[A+1].push(a,E)}else b.push(s,E)}}}function gm(r,i,s){return s&&r.componentProviders++,r.multi.push(i)-1}function Uf(r,i,s,a){for(let u=s;u<a;u++)if(i[u]===r)return u;return-1}function Sv(r,i,s,a){return mm(this.multi,[])}function th(r,i,s,a){const u=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=ti(s,s[$e],this.providerFactory.index,a);d=v.slice(0,m),mm(u,d);for(let E=m;E<v.length;E++)d.push(v[E])}else d=[],mm(u,d);return d}function mm(r,i){for(let s=0;s<r.length;s++)i.push((0,r[s])());return i}function Mv(r,i=[]){return s=>{s.providersResolver=(a,u)=>function TD(r,i,s){const a=xt();if(a.firstCreatePass){const u=hr(r);pm(s,a.data,a.blueprint,u,!0),pm(i,a.data,a.blueprint,u,!1)}}(a,u?u(r):r,i)}}class xc{}class Rv{}function Nv(r,i){return new Pv(r,i??null)}class Pv extends xc{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ig(this);const a=function Wn(r,i){const s=r[xr]||null;if(!s&&!0===i)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return s}(i);this._bootstrapComponents=function oi(r){return r instanceof Function?r():r}(a.bootstrap),this._r3Injector=Yp(i,s,[{provide:xc,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],le(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class _m extends Rv{constructor(i){super(),this.moduleType=i}create(i){return new Pv(this.moduleType,i)}}function jf(r){return i=>{setTimeout(r,void 0,i)}}const Es=class Zv extends p.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){let u=i,d=s||(()=>null),m=a;if(i&&"object"==typeof i){const E=i;u=E.next?.bind(E),d=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(d=jf(d),u&&(u=jf(u)),m&&(m=jf(m)));const v=super.subscribe({next:u,error:d,complete:m});return i instanceof Q.w0&&i.add(v),v}};let kc=(()=>{class r{}return r.__NG_ELEMENT_ID__=Yv,r})();const Kv=kc,Cm=class extends Kv{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i,s){const a=this._declarationTContainer.tViews,u=_s(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null,s||null);u[Ts]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[Lr];return null!==m&&(u[Lr]=m.createEmbeddedView(a)),sg(a,u,i),new Hd(u)}};function Yv(){return function Fc(r,i){return 4&r.type?new Cm(i,r,pc(r,i)):null}(kn(),ae())}let nh=(()=>{class r{}return r.__NG_ELEMENT_ID__=Qv,r})();function Qv(){return function wm(r,i){let s;const a=i[r.index];if(Vr(a))s=a;else{let u;if(8&r.type)u=yn(a);else{const d=i[Ct];u=d.createComment("");const m=In(r,i);Uo(d,ic(d,m),u,function Sp(r,i){return r.nextSibling(i)}(d,m),!1)}i[r.index]=s=J_(a,i,u,r),uu(i,s)}return new $f(s,r,i)}(kn(),ae())}const Jv=nh,$f=class extends Jv{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const i=ya(this._hostTNode,this._hostLView);if(Ml(i)){const s=ma(i,this._hostLView),a=bo(i);return new Br(s[$e].data[a+8],s)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=rh(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-Zn}createEmbeddedView(i,s,a){let u,d;"number"==typeof a?u=a:null!=a&&(u=a.index,d=a.injector);const m=i.createEmbeddedView(s||{},d);return this.insert(m,u),m}createComponent(i,s,a,u,d){const m=i&&!function Ta(r){return"function"==typeof r}(i);let v;if(m)v=s;else{const O=s||{};v=O.index,a=O.injector,u=O.projectableNodes,d=O.environmentInjector||O.ngModuleRef}const E=m?i:new vc(Ot(i)),b=a||this.parentInjector;if(!d&&null==E.ngModule){const $=(m?b:this.parentInjector).get(Wo,null);$&&(d=$)}const A=E.create(b,u,void 0,d);return this.insert(A.hostView,v),A}insert(i,s){const a=i._lView,u=a[$e];if(function sa(r){return Vr(r[Yt])}(a)){const A=this.indexOf(i);if(-1!==A)this.detach(A);else{const O=a[Yt],$=new $f(O,O[En],O[Yt]);$.detach($.indexOf(i))}}const d=this._adjustIndex(s),m=this._lContainer;!function xh(r,i,s,a){const u=Zn+a,d=s.length;a>0&&(s[u-1][nr]=i),a<d-Zn?(i[nr]=s[u],Ku(s,Zn+a,i)):(s.push(i),i[nr]=null),i[Yt]=s;const m=i[Ts];null!==m&&s!==m&&function kh(r,i){const s=r[rr];i[zn]!==i[Yt][Yt][zn]&&(r[Su]=!0),null===s?r[rr]=[i]:s.push(i)}(m,i);const v=i[Lr];null!==v&&v.insertView(r),i[It]|=64}(u,a,m,d);const v=ar(d,m),E=a[Ct],b=ic(E,m[Ss]);return null!==b&&function bp(r,i,s,a,u,d){a[Cr]=u,a[En]=i,ql(r,a,s,1,u,d)}(u,m[En],E,a,b,v),i.attachToViewContainerRef(),Ku(Gf(m),d,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=rh(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=dd(this._lContainer,s);a&&($s(Gf(this._lContainer),s),Fh(a[$e],a))}detach(i){const s=this._adjustIndex(i,-1),a=dd(this._lContainer,s);return a&&null!=$s(Gf(this._lContainer),s)?new Hd(a):null}_adjustIndex(i,s=0){return i??this.length+s}};function rh(r){return r[Qi]}function Gf(r){return r[Qi]||(r[Qi]=[])}function Vm(...r){}const Um=new Ht("Application Initializer");let rp=(()=>{class r{constructor(s){this.appInits=s,this.resolve=Vm,this.reject=Vm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const d=this.appInits[u]();if(Ci(d))s.push(d);else if(dy(d)){const m=new Promise((v,E)=>{d.subscribe({complete:v,error:E})});s.push(m)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return r.\u0275fac=function(s){return new(s||r)(ke(Um,8))},r.\u0275prov=We({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Bm=new Ht("AppId",{providedIn:"root",factory:function ip(){return`${Hm()}${Hm()}${Hm()}`}});function Hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jm=new Ht("Platform Initializer"),uC=new Ht("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),K0=new Ht("appBootstrapListener"),uh=new Ht("LocaleId",{providedIn:"root",factory:()=>Ze(uh,Xe.Optional|Xe.SkipSelf)||function dC(){return typeof $localize<"u"&&$localize.locale||Sc}()}),hE=new Ht("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),pE=(()=>Promise.resolve(0))();function Zm(r){typeof Zone>"u"?pE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Wi{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Es(!1),this.onMicrotaskEmpty=new Es(!1),this.onStable=new Es(!1),this.onError=new Es(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function sp(){let r=Et.requestAnimationFrame,i=Et.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const s=r[Zone.__symbol__("OriginalDelegate")];s&&(r=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Km(r){const i=()=>{!function tw(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Et,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,op(r),r.isCheckStableRunning=!0,qm(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),op(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,d,m,v)=>{try{return Ym(r),s.invokeTask(u,d,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),Qm(r)}},onInvoke:(s,a,u,d,m,v,E)=>{try{return Ym(r),s.invoke(u,d,m,v,E)}finally{r.shouldCoalesceRunChangeDetection&&i(),Qm(r)}},onHasTask:(s,a,u,d)=>{s.hasTask(u,d),a===u&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,op(r),qm(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,a,u,d)=>(s.handleError(u,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wi.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(Wi.isInAngularZone())throw new te(909,!1)}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,u){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+u,i,gE,Vm,Vm);try{return d.runTask(m,s,a)}finally{d.cancelTask(m)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const gE={};function qm(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function op(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Ym(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Qm(r){r._nesting--,qm(r)}class Iu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Es,this.onMicrotaskEmpty=new Es,this.onStable=new Es,this.onError=new Es}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,u){return i.apply(s,a)}}const mE=new Ht(""),Jm=new Ht("");let e_,gC=(()=>{class r{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,e_||(function mC(r){e_=r}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wi.assertNotInAngularZone(),Zm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zm(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}}return r.\u0275fac=function(s){return new(s||r)(ke(Wi),ke(Xm),ke(Jm))},r.\u0275prov=We({token:r,factory:r.\u0275fac}),r})(),Xm=(()=>{class r{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return e_?.findTestabilityInTree(this,s,a)??null}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=We({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Ds=null;const t_=new Ht("AllowMultipleToken"),n_=new Ht("PlatformDestroyListeners"),so=!1;function DC(r,i,s=[]){const a=`Platform: ${i}`,u=new Ht(a);return(d=[])=>{let m=vE();if(!m||m.injector.get(t_,!1)){const v=[...s,...d,{provide:u,useValue:!0}];r?r(v):function EC(r){if(Ds&&!Ds.get(t_,!1))throw new te(400,!1);Ds=r;const i=r.get(wC);(function IC(r){const i=r.get(jm,null);i&&i.forEach(s=>s())})(r)}(function yE(r=[],i){return su.create({name:i,providers:[{provide:hc,useValue:"platform"},{provide:n_,useValue:new Set([()=>Ds=null])},...r]})}(v,a))}return function CC(r){const i=vE();if(!i)throw new te(401,!1);return i}()}}function vE(){return Ds?.get(wC)??null}let wC=(()=>{class r{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function TC(r,i){let s;return s="noop"===r?new Iu:("zone.js"===r?void 0:r)||new Wi(i),s}(a?.ngZone,function bC(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(a)),d=[{provide:Wi,useValue:u}];return u.run(()=>{const m=su.create({providers:d,parent:this.injector,name:s.moduleType.name}),v=s.create(m),E=v.injector.get(Wr,null);if(!E)throw new te(402,!1);return u.runOutsideAngular(()=>{const b=u.onError.subscribe({next:A=>{E.handleError(A)}});v.onDestroy(()=>{s_(this._modules,v),b.unsubscribe()})}),function SC(r,i,s){try{const a=s();return Ci(a)?a.catch(u=>{throw i.runOutsideAngular(()=>r.handleError(u)),u}):a}catch(a){throw i.runOutsideAngular(()=>r.handleError(a)),a}}(E,u,()=>{const b=v.injector.get(rp);return b.runInitializers(),b.donePromise.then(()=>(function Nf(r){je(r,"Expected localeId to be defined"),"string"==typeof r&&(Xg=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(uh,Sc)||Sc),this._moduleDoBootstrap(v),v))})})}bootstrapModule(s,a=[]){const u=AC({},a);return function _C(r,i,s){const a=new _m(s);return Promise.resolve(a)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,u))}_moduleDoBootstrap(s){const a=s.injector.get(i_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new te(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(n_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(s){return new(s||r)(ke(su))},r.\u0275prov=We({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function AC(r,i){return Array.isArray(i)?i.reduce(AC,r):{...r,...i}}let i_=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,a,u){this._zone=s,this._injector=a,this._exceptionHandler=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new P.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new P.y(v=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Wi.assertNotInAngularZone(),Zm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{Wi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{E.unsubscribe(),b.unsubscribe()}});this.isStable=(0,re.T)(d,m.pipe((0,ee.B)()))}bootstrap(s,a){const u=s instanceof Kh;if(!this._injector.get(rp).done){!u&&function Sn(r){const i=Ot(r)||Tn(r)||_n(r);return null!==i&&i.standalone}(s);throw new te(405,so)}let m;m=u?s:this._injector.get(zo).resolveComponentFactory(s),this.componentTypes.push(m.componentType);const v=function yC(r){return r.isBoundToModule}(m)?void 0:this._injector.get(xc),b=m.create(su.NULL,[],a||m.selector,v),A=b.location.nativeElement,O=b.injector.get(mE,null);return O?.registerApplication(A),b.onDestroy(()=>{this.detachView(b.hostView),s_(this.components,b),O?.unregisterApplication(A)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;s_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(K0,[]);a.push(...this._bootstrapListeners),a.forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>s_(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new te(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(s){return new(s||r)(ke(Wi),ke(Wo),ke(Wr))},r.\u0275prov=We({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function s_(r,i){const s=r.indexOf(i);s>-1&&r.splice(s,1)}function RC(){return!1}let NC=(()=>{class r{}return r.__NG_ELEMENT_ID__=PC,r})();function PC(r){return function OC(r,i,s){if(Ur(r)&&!s){const a=Nn(r.index,i);return new Hd(a,a)}return 47&r.type?new Hd(i[zn],i):null}(kn(),ae(),16==(16&r))}class bE{constructor(){}supports(i){return hu(i)}create(i){return new UC(i)}}const VC=(r,i)=>i;class UC{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||VC}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,u=0,d=null;for(;s||a;){const m=!a||s&&s.currentIndex<SE(a,u,d)?s:a,v=SE(m,u,d),E=m.currentIndex;if(m===a)u--,a=a._nextRemoved;else if(s=s._next,null==m.previousIndex)u++;else{d||(d=[]);const b=v-u,A=E-u;if(b!=A){for(let $=0;$<b;$++){const q=$<d.length?d[$]:d[$]=0,fe=q+$;A<=fe&&fe<b&&(d[$]=q+1)}d[m.previousIndex]=A-b}}v!==E&&i(m,v,E)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!hu(i))throw new te(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,d,m,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)d=i[v],m=this._trackByFn(v,d),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,d,m,v)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,v),a=!0),s=s._next}else u=0,function Ic(r,i){if(Array.isArray(r))for(let s=0;s<r.length;s++)i(r[s]);else{const s=r[Symbol.iterator]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,v=>{m=this._trackByFn(u,v),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,v,m,u)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,m,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,u){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,d,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,d,u)):i=this._addAfter(new BC(s,a),d,u),i}_verifyReinsertion(i,s,a,u){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?i=this._reinsertAfter(d,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,d=i._nextRemoved;return null===u?this._removalsHead=d:u._nextRemoved=d,null===d?this._removalsTail=u:d._prevRemoved=u,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new l_),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new l_),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class BC{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TE{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class l_{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new TE,this.map.set(s,a)),a.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SE(r,i,s){const a=r.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+i+u}class AE{constructor(){}supports(i){return i instanceof Map||Ag(i)}create(){return new HC}}class HC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Ag(i)))throw new te(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const d=u._prev,m=u._next;return d&&(d._next=m),m&&(m._prev=d),u._next=null,u._prev=null,u}const a=new ME(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class ME{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RE(){return new u_([new bE])}let u_=(()=>{class r{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new r(s)}static extend(s){return{provide:r,useFactory:a=>r.create(s,a||RE()),deps:[[r,new or,new mr]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new te(901,!1)}}return r.\u0275prov=We({token:r,providedIn:"root",factory:RE}),r})();function Du(){return new cp([new AE])}let cp=(()=>{class r{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new r(s)}static extend(s){return{provide:r,useFactory:a=>r.create(s,a||Du()),deps:[[r,new or,new mr]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new te(901,!1)}}return r.\u0275prov=We({token:r,providedIn:"root",factory:Du}),r})();const jC=DC(null,"core",[]);let $C=(()=>{class r{constructor(s){}}return r.\u0275fac=function(s){return new(s||r)(ke(i_))},r.\u0275mod=an({type:r}),r.\u0275inj=gn({}),r})();function GC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},3942:(it,Ce,x)=>{x.d(Ce,{Z:()=>st});var p=x(2090),Q=x(4859),P=x(9681),re=x(1877);class ee{constructor(te,ve){this._delegate=te,this.firebase=ve,(0,P._addComponent)(te,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(te,ve=P._DEFAULT_ENTRY_NAME){var de;this._delegate.checkDestroyed();const be=this._delegate.container.getProvider(te);return!be.isInitialized()&&"EXPLICIT"===(null===(de=be.getComponent())||void 0===de?void 0:de.instantiationMode)&&be.initialize(),be.getImmediate({identifier:ve})}_removeServiceInstance(te,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(ve)}_addComponent(te){(0,P._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,P._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ye(){const Oe=function le(Oe){const te={},ve={__esModule:!0,initializeApp:function _e(Te,U={}){const ue=P.initializeApp(Te,U);if((0,p.r3)(te,ue.name))return te[ue.name];const Re=new Oe(ue,ve);return te[ue.name]=Re,Re},app:be,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Te){const U=Te.name,ue=U.replace("-compat","");if(P._registerComponent(Te)&&"PUBLIC"===Te.type){const Re=(Ve=be())=>{if("function"!=typeof Ve[ue])throw me.create("invalid-app-argument",{appName:U});return Ve[ue]()};void 0!==Te.serviceProps&&(0,p.ZB)(Re,Te.serviceProps),ve[ue]=Re,Oe.prototype[ue]=function(...Ve){return this._getService.bind(this,U).apply(this,Te.multipleInstances?Ve:[])}}return"PUBLIC"===Te.type?ve[ue]:null},removeApp:function de(Te){delete te[Te]},useAsService:function Pe(Te,U){return"serverAuth"===U?null:U},modularAPIs:P}};function be(Te){if(!(0,p.r3)(te,Te=Te||P._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Te});return te[Te]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function pe(){return Object.keys(te).map(Te=>te[Te])}}),be.App=Oe,ve}(ee);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function te(ve){(0,p.ZB)(Oe,ve)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Oe}(),H=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=j;!function Se(Oe){(0,P.registerVersion)("@firebase/app-compat","0.2.5",Oe)}()},9681:(it,Ce,x)=>{x.r(Ce),x.d(Ce,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>ur,_DEFAULT_ENTRY_NAME:()=>Me,_addComponent:()=>Ut,_addOrOverwriteComponent:()=>ot,_apps:()=>je,_clearComponents:()=>gn,_components:()=>Be,_getProvider:()=>We,_registerComponent:()=>Ft,_removeServiceInstance:()=>mt,deleteApp:()=>Si,getApp:()=>Dr,getApps:()=>er,initializeApp:()=>Ti,onLog:()=>Xe,registerVersion:()=>cr,setLogLevel:()=>Ai});var p=x(5861),Q=x(4859),P=x(1877),re=x(2090),ee=x(8766);class ie{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function me(ke){return"VERSION"===ke.getComponent()?.type}(Ze)){const ht=Ze.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Ze=>Ze).join(" ")}}const le="@firebase/app",j=new P.Yd("@firebase/app"),Me="[DEFAULT]",xe={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},je=new Map,Be=new Map;function Ut(ke,Ee){try{ke.container.addComponent(Ee)}catch(Ze){j.debug(`Component ${Ee.name} failed to register with FirebaseApp ${ke.name}`,Ze)}}function ot(ke,Ee){ke.container.addOrOverwriteComponent(Ee)}function Ft(ke){const Ee=ke.name;if(Be.has(Ee))return j.debug(`There were multiple attempts to register component ${Ee}.`),!1;Be.set(Ee,ke);for(const Ze of je.values())Ut(Ze,ke);return!0}function We(ke,Ee){const Ze=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),ke.container.getProvider(Ee)}function mt(ke,Ee,Ze=Me){We(ke,Ee).clearInstance(Ze)}function gn(){Be.clear()}const nn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rn{constructor(Ee,Ze,ht){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}const ur="9.18.0";function Ti(ke,Ee={}){let Ze=ke;"object"!=typeof Ee&&(Ee={name:Ee});const ht=Object.assign({name:Me,automaticDataCollectionEnabled:!1},Ee),yt=ht.name;if("string"!=typeof yt||!yt)throw nn.create("bad-app-name",{appName:String(yt)});if(Ze||(Ze=(0,re.aH)()),!Ze)throw nn.create("no-options");const Dt=je.get(yt);if(Dt){if((0,re.vZ)(Ze,Dt.options)&&(0,re.vZ)(ht,Dt.config))return Dt;throw nn.create("duplicate-app",{appName:yt})}const Gn=new Q.H0(yt);for(const F of Be.values())Gn.addComponent(F);const L=new rn(Ze,ht,Gn);return je.set(yt,L),L}function Dr(ke=Me){const Ee=je.get(ke);if(!Ee&&ke===Me)return Ti();if(!Ee)throw nn.create("no-app",{appName:ke});return Ee}function er(){return Array.from(je.values())}function Si(ke){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(ke){const Ee=ke.name;je.has(Ee)&&(je.delete(Ee),yield Promise.all(ke.container.getProviders().map(Ze=>Ze.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function cr(ke,Ee,Ze){var ht;let yt=null!==(ht=xe[ke])&&void 0!==ht?ht:ke;Ze&&(yt+=`-${Ze}`);const Dt=yt.match(/\s|\//),Gn=Ee.match(/\s|\//);if(Dt||Gn){const L=[`Unable to register library "${yt}" with version "${Ee}":`];return Dt&&L.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Dt&&Gn&&L.push("and"),Gn&&L.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void j.warn(L.join(" "))}Ft(new Q.wA(`${yt}-version`,()=>({library:yt,version:Ee}),"VERSION"))}function Xe(ke,Ee){if(null!==ke&&"function"!=typeof ke)throw nn.create("invalid-log-argument");(0,P.Am)(ke,Ee)}function Ai(ke){(0,P.Ub)(ke)}const Or="firebase-heartbeat-database",sn=1,Hn="firebase-heartbeat-store";let Mi=null;function Et(){return Mi||(Mi=(0,ee.X3)(Or,sn,{upgrade:(ke,Ee)=>{0===Ee&&ke.createObjectStore(Hn)}}).catch(ke=>{throw nn.create("idb-open",{originalErrorMessage:ke.message})})),Mi}function ft(){return(ft=(0,p.Z)(function*(ke){try{return(yield Et()).transaction(Hn).objectStore(Hn).get(mn(ke))}catch(Ee){if(Ee instanceof re.ZR)j.warn(Ee.message);else{const Ze=nn.create("idb-get",{originalErrorMessage:Ee?.message});j.warn(Ze.message)}}})).apply(this,arguments)}function Zi(ke,Ee){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(ke,Ee){try{const ht=(yield Et()).transaction(Hn,"readwrite");return yield ht.objectStore(Hn).put(Ee,mn(ke)),ht.done}catch(Ze){if(Ze instanceof re.ZR)j.warn(Ze.message);else{const ht=nn.create("idb-set",{originalErrorMessage:Ze?.message});j.warn(ht.message)}}})).apply(this,arguments)}function mn(ke){return`${ke.name}!${ke.options.appId}`}class ws{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new Pt(Ze),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Ee=this;return(0,p.Z)(function*(){const ht=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Bt();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==yt&&!Ee._heartbeatsCache.heartbeats.some(Dt=>Dt.date===yt))return Ee._heartbeatsCache.heartbeats.push({date:yt,agent:ht}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Dt=>{const Gn=new Date(Dt.date).valueOf();return Date.now()-Gn<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,p.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const Ze=Bt(),{heartbeatsToSend:ht,unsentEntries:yt}=function Kr(ke,Ee=1024){const Ze=[];let ht=ke.slice();for(const yt of ke){const Dt=Ze.find(Gn=>Gn.agent===yt.agent);if(Dt){if(Dt.dates.push(yt.date),tr(Ze)>Ee){Dt.dates.pop();break}}else if(Ze.push({agent:yt.agent,dates:[yt.date]}),tr(Ze)>Ee){Ze.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:ht}}(Ee._heartbeatsCache.heartbeats),Dt=(0,re.L)(JSON.stringify({version:2,heartbeats:ht}));return Ee._heartbeatsCache.lastSentHeartbeatDate=Ze,yt.length>0?(Ee._heartbeatsCache.heartbeats=yt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Dt})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class Pt{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,p.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function tt(ke){return ft.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var Ze=this;return(0,p.Z)(function*(){var ht;if(yield Ze._canUseIndexedDBPromise){const Dt=yield Ze.read();return Zi(Ze.app,{lastSentHeartbeatDate:null!==(ht=Ee.lastSentHeartbeatDate)&&void 0!==ht?ht:Dt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var Ze=this;return(0,p.Z)(function*(){var ht;if(yield Ze._canUseIndexedDBPromise){const Dt=yield Ze.read();return Zi(Ze.app,{lastSentHeartbeatDate:null!==(ht=Ee.lastSentHeartbeatDate)&&void 0!==ht?ht:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...Ee.heartbeats]})}})()}}function tr(ke){return(0,re.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function Yr(ke){Ft(new Q.wA("platform-logger",Ee=>new ie(Ee),"PRIVATE")),Ft(new Q.wA("heartbeat",Ee=>new ws(Ee),"PRIVATE")),cr(le,"0.9.5",ke),cr(le,"0.9.5","esm2017"),cr("fire-js","")}("")},4859:(it,Ce,x)=>{x.d(Ce,{H0:()=>le,wA:()=>P,zt:()=>ee});var p=x(5861),Q=x(2090);class P{constructor(j,H,K){this.name=j,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const re="[DEFAULT]";class ee{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const K=new Q.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:H});ze&&K.resolve(ze)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const K=this.normalizeInstanceIdentifier(j?.identifier),ze=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Se){if(ze)return null;throw Se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function me(ye){return"EAGER"===ye.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:ze});K.resolve(Se)}catch{}}}}clearInstance(j=re){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,p.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=re){return this.instances.has(j)}getOptions(j=re){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,K=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[Se,st]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Se)&&st.resolve(ze);return ze}onInit(j,H){var K;const ze=this.normalizeInstanceIdentifier(H),Se=null!==(K=this.onInitCallbacks.get(ze))&&void 0!==K?K:new Set;Se.add(j),this.onInitCallbacks.set(ze,Se);const st=this.instances.get(ze);return st&&j(st,ze),()=>{Se.delete(j)}}invokeOnInitCallbacks(j,H){const K=this.onInitCallbacks.get(H);if(K)for(const ze of K)try{ze(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let K=this.instances.get(j);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=j,ye===re?void 0:ye),options:H}),this.instances.set(j,K),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(K,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,K)}catch{}var ye;return K||null}normalizeInstanceIdentifier(j=re){return this.component?this.component.multipleInstances?j:re:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new ee(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ce,x)=>{x.d(Ce,{Am:()=>ye,Ub:()=>le,Yd:()=>me,in:()=>Q});const p=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},re=Q.INFO,ee={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ie=(j,H,...K)=>{if(H<j.logLevel)return;const ze=(new Date).toISOString(),Se=ee[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${ze}]  ${j.name}:`,...K)};class me{constructor(H){this.name=H,this._logLevel=re,this._logHandler=ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?P[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function le(j){p.forEach(H=>{H.setLogLevel(j)})}function ye(j,H){for(const K of p){let ze=null;H&&H.level&&(ze=P[H.level]),K.userLogHandler=null===j?null:(Se,st,...Oe)=>{const te=Oe.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");st>=(ze??Se.logLevel)&&j({level:Q[st].toLowerCase(),message:te,args:Oe,type:Se.name})}}}},259:(it,Ce,x)=>{x.d(Ce,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=x(9681);(0,p.registerVersion)("firebase","9.18.0","app")},9260:(it,Ce,x)=>{x.d(Ce,{Z:()=>p.Z});var p=x(3942);p.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(it,Ce,x)=>{x.r(Ce);var p=x(5861),Q=x(3942),P=x(2090),re=x(9681),ee=x(1877),ie=x(655),me=x(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const st=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Oe=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},te=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new ee.Yd("@firebase/auth");function be(g,...c){de.logLevel<=ee.in.ERROR&&de.error(`Auth (${re.SDK_VERSION}): ${g}`,...c)}function _e(g,...c){throw Te(g,...c)}function pe(g,...c){return Te(g,...c)}function Ie(g,c,h){const y=Object.assign(Object.assign({},Oe()),{[c]:h});return new P.LL("auth","Firebase",y).create(c,{appName:g.name})}function Pe(g,c,h){if(!(c instanceof h))throw h.name!==c.constructor.name&&_e(g,"argument-error"),Ie(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(g,...c){if("string"!=typeof g){const h=c[0],y=[...c.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(h,...y)}return te.create(g,...c)}function U(g,c,...h){if(!g)throw Te(c,...h)}function ue(g){const c="INTERNAL ASSERTION FAILED: "+g;throw be(c),new Error(c)}function Re(g,c){g||ue(c)}const Ve=new Map;function Ye(g){Re(g instanceof Function,"Expected a class definition");let c=Ve.get(g);return c?(Re(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Ve.set(g,c),c)}function se(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function he(){return"http:"===De()||"https:"===De()}function De(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class je{constructor(c,h){this.shortDelay=c,this.longDelay=h,Re(h>c,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Me(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(he()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Be(g,c){Re(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return c?`${h}${c.startsWith("/")?c.slice(1):c}`:h}class Ut{static initialize(c,h,y){this.fetchImpl=c,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ft=new je(3e4,6e4);function We(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function mt(g,c,h,y){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(g,c,h,y,w={}){return $t(g,w,(0,p.Z)(function*(){let M={},W={};y&&("GET"===c?W=y:M={body:JSON.stringify(y)});const ne=(0,P.xO)(Object.assign({key:g.config.apiKey},W)).slice(1),Le=yield g._getAdditionalHeaders();return Le["Content-Type"]="application/json",g.languageCode&&(Le["X-Firebase-Locale"]=g.languageCode),Ut.fetch()(Ti(g,g.config.apiHost,h,ne),Object.assign({method:c,headers:Le,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function $t(g,c,h){return nn.apply(this,arguments)}function nn(){return(nn=(0,p.Z)(function*(g,c,h){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},ot),c);try{const w=new Dr(g),M=yield Promise.race([h(),w.promise]);w.clearNetworkTimeout();const W=yield M.json();if("needConfirmation"in W)throw er(g,"account-exists-with-different-credential",W);if(M.ok&&!("errorMessage"in W))return W;{const ne=M.ok?W.errorMessage:W.error.message,[Le,Ke]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw er(g,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw er(g,"email-already-in-use",W);if("USER_DISABLED"===Le)throw er(g,"user-disabled",W);const pt=y[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(g,pt,Ke);_e(g,pt)}}catch(w){if(w instanceof P.ZR)throw w;_e(g,"internal-error",{message:String(w)})}})).apply(this,arguments)}function rn(g,c,h,y){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(g,c,h,y,w={}){const M=yield mt(g,c,h,y,w);return"mfaPendingCredential"in M&&_e(g,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ti(g,c,h,y){const w=`${c}${h}?${y}`;return g.config.emulator?Be(g.config,w):`${g.config.apiScheme}://${w}`}class Dr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(pe(this.auth,"network-request-failed")),Ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(g,c,h){const y={appName:g.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const w=pe(g,c,y);return w.customData._tokenResponse=h,w}function qt(){return(qt=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Xe(){return(Xe=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function sn(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Et(){return(Et=(0,p.Z)(function*(g,c=!1){const h=(0,P.m9)(g),y=yield h.getIdToken(c),w=ft(y);U(w&&w.exp&&w.auth_time&&w.iat,h.auth,"internal-error");const M="object"==typeof w.firebase?w.firebase:void 0,W=M?.sign_in_provider;return{claims:w,token:y,authTime:sn(tt(w.auth_time)),issuedAtTime:sn(tt(w.iat)),expirationTime:sn(tt(w.exp)),signInProvider:W||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function tt(g){return 1e3*Number(g)}function ft(g){const[c,h,y]=g.split(".");if(void 0===c||void 0===h||void 0===y)return be("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,P.tV)(h);return w?JSON.parse(w):(be("Failed to decode base64 JWT payload"),null)}catch(w){return be("Caught error parsing JWT payload as JSON",w?.toString()),null}}function Kt(g,c){return mn.apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(g,c,h=!1){if(h)return c;try{return yield c}catch(y){throw y instanceof P.ZR&&function jn({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}class $n{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var h;if(c){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const w=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(c=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield h.iteration()}),y)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&c.schedule(!0))}c.schedule()})()}}class ws{constructor(c,h){this.createdAt=c,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bt(g){return Kr.apply(this,arguments)}function Kr(){return Kr=(0,p.Z)(function*(g){var c;const h=g.auth,y=yield g.getIdToken(),w=yield Kt(g,function Ai(g,c){return Or.apply(this,arguments)}(h,{idToken:y}));U(w?.users.length,h,"internal-error");const M=w.users[0];g._notifyReloadListener(M);const W=null!==(c=M.providerUserInfo)&&void 0!==c&&c.length?function ke(g){return g.map(c=>{var{providerId:h}=c,y=(0,ie._T)(c,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}(M.providerUserInfo):[],ne=function Yr(g,c){return[...g.filter(y=>!c.some(w=>w.providerId===y.providerId)),...c]}(g.providerData,W),pt=!!g.isAnonymous&&!(g.email&&M.passwordHash||ne?.length),nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ne,metadata:new ws(M.createdAt,M.lastLoginAt),isAnonymous:pt};Object.assign(g,nt)}),Kr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(g){const c=(0,P.m9)(g);yield Bt(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(g,c){const h=yield $t(g,{},(0,p.Z)(function*(){const y=(0,P.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:w,apiKey:M}=g.config,W=Ti(g,w,"/v1/token",`key=${M}`),ne=yield g._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",Ut.fetch()(W,{method:"POST",headers:ne,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){U(c.idToken,"internal-error"),U(typeof c.idToken<"u","internal-error"),U(typeof c.refreshToken<"u","internal-error");const h="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Zi(g){const c=ft(g);return U(c,"internal-error"),U(typeof c.exp<"u","internal-error"),U(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,h)}getToken(c,h=!1){var y=this;return(0,p.Z)(function*(){return U(!y.accessToken||y.refreshToken,c,"user-token-expired"),h||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(c,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,h){var y=this;return(0,p.Z)(function*(){const{accessToken:w,refreshToken:M,expiresIn:W}=yield function Ee(g,c){return Ze.apply(this,arguments)}(c,h);y.updateTokensAndExpiration(w,M,Number(W))})()}updateTokensAndExpiration(c,h,y){this.refreshToken=h||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(c,h){const{refreshToken:y,accessToken:w,expirationTime:M}=h,W=new ht;return y&&(U("string"==typeof y,"internal-error",{appName:c}),W.refreshToken=y),w&&(U("string"==typeof w,"internal-error",{appName:c}),W.accessToken=w),M&&(U("number"==typeof M,"internal-error",{appName:c}),W.expirationTime=M),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ht,this.toJSON())}_performRefresh(){return ue("not implemented")}}function yt(g,c){U("string"==typeof g||typeof g>"u","internal-error",{appName:c})}class Dt{constructor(c){var{uid:h,auth:y,stsTokenManager:w}=c,M=(0,ie._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ws(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(c){var h=this;return(0,p.Z)(function*(){const y=yield Kt(h,h.stsTokenManager.getToken(h.auth,c));return U(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(c){return function Mi(g){return Et.apply(this,arguments)}(this,c)}reload(){return function Pt(g){return tr.apply(this,arguments)}(this)}_assign(c){this!==c&&(U(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(h=>Object.assign({},h)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const h=new Dt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(c){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,h=!1){var y=this;return(0,p.Z)(function*(){let w=!1;c.idToken&&c.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(c),w=!0),h&&(yield Bt(y)),yield y.auth._persistUserIfCurrent(y),w&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var c=this;return(0,p.Z)(function*(){const h=yield c.getIdToken();return yield Kt(c,function Si(g,c){return qt.apply(this,arguments)}(c.auth,{idToken:h})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,h){var y,w,M,W,ne,Le,Ke,pt;const nt=null!==(y=h.displayName)&&void 0!==y?y:void 0,On=null!==(w=h.email)&&void 0!==w?w:void 0,ii=null!==(M=h.phoneNumber)&&void 0!==M?M:void 0,Hi=null!==(W=h.photoURL)&&void 0!==W?W:void 0,Rt=null!==(ne=h.tenantId)&&void 0!==ne?ne:void 0,Js=null!==(Le=h._redirectEventId)&&void 0!==Le?Le:void 0,jr=null!==(Ke=h.createdAt)&&void 0!==Ke?Ke:void 0,jo=null!==(pt=h.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:$r,emailVerified:Ba,isAnonymous:Gr,providerData:Hh,stsTokenManager:Rr}=h;U($r&&Rr,c,"internal-error");const g_=ht.fromJSON(this.name,Rr);U("string"==typeof $r,c,"internal-error"),yt(nt,c.name),yt(On,c.name),U("boolean"==typeof Ba,c,"internal-error"),U("boolean"==typeof Gr,c,"internal-error"),yt(ii,c.name),yt(Hi,c.name),yt(Rt,c.name),yt(Js,c.name),yt(jr,c.name),yt(jo,c.name);const $o=new Dt({uid:$r,auth:c,email:On,emailVerified:Ba,displayName:nt,isAnonymous:Gr,photoURL:Hi,phoneNumber:ii,tenantId:Rt,stsTokenManager:g_,createdAt:jr,lastLoginAt:jo});return Hh&&Array.isArray(Hh)&&($o.providerData=Hh.map(Jl=>Object.assign({},Jl))),Js&&($o._redirectEventId=Js),$o}static _fromIdTokenResponse(c,h,y=!1){return(0,p.Z)(function*(){const w=new ht;w.updateFromServerResponse(h);const M=new Dt({uid:h.localId,auth:c,stsTokenManager:w,isAnonymous:y});return yield Bt(M),M})()}}const L=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(h,y){var w=this;return(0,p.Z)(function*(){w.storage[h]=y})()}_get(h){var y=this;return(0,p.Z)(function*(){const w=y.storage[h];return void 0===w?null:w})()}_remove(h){var y=this;return(0,p.Z)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return g.type="NONE",g})();function F(g,c,h){return`firebase:${g}:${c}:${h}`}class G{constructor(c,h,y){this.persistence=c,this.auth=h,this.userKey=y;const{config:w,name:M}=this.auth;this.fullUserKey=F(this.userKey,w.apiKey,M),this.fullPersistenceKey=F("persistence",w.apiKey,M),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const h=yield c.persistence._get(c.fullUserKey);return h?Dt._fromJSON(c.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var h=this;return(0,p.Z)(function*(){if(h.persistence===c)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=c,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,h,y="authUser"){return(0,p.Z)(function*(){if(!h.length)return new G(Ye(L),c,y);const w=(yield Promise.all(h.map(function(){var Ke=(0,p.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let M=w[0]||Ye(L);const W=F(y,c.config.apiKey,c.name);let ne=null;for(const Ke of h)try{const pt=yield Ke._get(W);if(pt){const nt=Dt._fromJSON(c,pt);Ke!==M&&(ne=nt),M=Ke;break}}catch{}const Le=w.filter(Ke=>Ke._shouldAllowMigration);return M._shouldAllowMigration&&Le.length?(M=Le[0],ne&&(yield M._set(W,ne.toJSON())),yield Promise.all(h.map(function(){var Ke=(0,p.Z)(function*(pt){if(pt!==M)try{yield pt._remove(W)}catch{}});return function(pt){return Ke.apply(this,arguments)}}())),new G(M,c,y)):new G(M,c,y)})()}}function ce(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Lt(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(X(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(on(c))return"Blackberry";if(vn(c))return"Webos";if(Qe(c))return"Safari";if((c.includes("chrome/")||at(c))&&!c.includes("edge/"))return"Chrome";if(ut(c))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function X(g=(0,P.z$)()){return/firefox\//i.test(g)}function Qe(g=(0,P.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function at(g=(0,P.z$)()){return/crios\//i.test(g)}function Lt(g=(0,P.z$)()){return/iemobile/i.test(g)}function ut(g=(0,P.z$)()){return/android/i.test(g)}function on(g=(0,P.z$)()){return/blackberry/i.test(g)}function vn(g=(0,P.z$)()){return/webos/i.test(g)}function Mt(g=(0,P.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Uc(g=(0,P.z$)()){return Mt(g)||ut(g)||vn(g)||on(g)||/windows phone/i.test(g)||Lt(g)}function na(g,c=[]){let h;switch(g){case"Browser":h=ce((0,P.z$)());break;case"Worker":h=`${ce((0,P.z$)())}-${g}`;break;default:h=g}const y=c.length?c.join(","):"FirebaseCore-web";return`${h}/JsCore/${re.SDK_VERSION}/${y}`}class sl{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,h){const y=M=>new Promise((W,ne)=>{try{W(c(M))}catch(Le){ne(Le)}});y.onAbort=h,this.queue.push(y);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(c){var h=this;return(0,p.Z)(function*(){if(h.auth.currentUser===c)return;const y=[];try{for(const w of h.queue)yield w(c),w.onAbort&&y.push(w.onAbort)}catch(w){y.reverse();for(const M of y)try{M()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}class bu{constructor(c,h,y){this.app=c,this.heartbeatServiceProvider=h,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tu(this),this.idTokenSubscription=new Tu(this),this.beforeStateQueue=new sl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,h){var y=this;return h&&(this._popupRedirectResolver=Ye(h)),this._initializationPromise=this.queue((0,p.Z)(function*(){var w,M;if(!y._deleted&&(y.persistenceManager=yield G.create(y,c),!y._deleted)){if(null!==(w=y._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(M=y.currentUser)||void 0===M?void 0:M.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const h=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||h){if(c.currentUser&&h&&c.currentUser.uid===h.uid)return c._currentUser._assign(h),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(h,!0)}})()}initializeCurrentUser(c){var h=this;return(0,p.Z)(function*(){var y;const w=yield h.assertedPersistence.getCurrentUser();let M=w,W=!1;if(c&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const ne=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,Le=M?._redirectEventId,Ke=yield h.tryRedirectSignIn(c);(!ne||ne===Le)&&Ke?.user&&(M=Ke.user,W=!0)}if(!M)return h.directlySetCurrentUser(null);if(!M._redirectEventId){if(W)try{yield h.beforeStateQueue.runMiddleware(M)}catch(ne){M=w,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(ne))}return M?h.reloadAndSetCurrentUserOrClear(M):h.directlySetCurrentUser(null)}return U(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===M._redirectEventId?h.directlySetCurrentUser(M):h.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(c){var h=this;return(0,p.Z)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,c,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(c){var h=this;return(0,p.Z)(function*(){try{yield Bt(c)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function xe(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var h=this;return(0,p.Z)(function*(){const y=c?(0,P.m9)(c):null;return y&&U(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(c,h=!1){var y=this;return(0,p.Z)(function*(){if(!y._deleted)return c&&U(y.tenantId===c.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(c)),y.queue((0,p.Z)(function*(){yield y.directlySetCurrentUser(c),y.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var h=this;return this.queue((0,p.Z)(function*(){yield h.assertedPersistence.setPersistence(Ye(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new P.LL("auth","Firebase",c())}onAuthStateChanged(c,h,y){return this.registerStateListener(this.authStateSubscription,c,h,y)}beforeAuthStateChanged(c,h){return this.beforeStateQueue.pushCallback(c,h)}onIdTokenChanged(c,h,y){return this.registerStateListener(this.idTokenSubscription,c,h,y)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,h){var y=this;return(0,p.Z)(function*(){const w=yield y.getOrInitRedirectPersistenceManager(h);return null===c?w.removeCurrentUser():w.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var h=this;return(0,p.Z)(function*(){if(!h.redirectPersistenceManager){const y=c&&Ye(c)||h._popupRedirectResolver;U(y,h,"argument-error"),h.redirectPersistenceManager=yield G.create(h,[Ye(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(c){var h=this;return(0,p.Z)(function*(){var y,w;return h._isInitialized&&(yield h.queue((0,p.Z)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===c?h._currentUser:(null===(w=h.redirectUser)||void 0===w?void 0:w._redirectEventId)===c?h.redirectUser:null})()}_persistUserIfCurrent(c){var h=this;return(0,p.Z)(function*(){if(c===h.currentUser)return h.queue((0,p.Z)(function*(){return h.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,h,y,w){if(this._deleted)return()=>{};const M="function"==typeof h?h:h.next.bind(h),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>M(this.currentUser)),"function"==typeof h?c.addObserver(h,y,w):c.addObserver(h)}directlySetCurrentUser(c){var h=this;return(0,p.Z)(function*(){h.currentUser&&h.currentUser!==c&&h._currentUser._stopProactiveRefresh(),c&&h.isProactiveRefreshEnabled&&c._startProactiveRefresh(),h.currentUser=c,c?yield h.assertedPersistence.setCurrentUser(c):yield h.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=na(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var h;const y={"X-Client-Version":c.clientVersion};c.app.options.appId&&(y["X-Firebase-gmpid"]=c.app.options.appId);const w=yield null===(h=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();return w&&(y["X-Firebase-Client"]=w),y})()}}function an(g){return(0,P.m9)(g)}class Tu{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,P.ne)(h=>this.observer=h)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ao(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function Ot(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class _n{constructor(c,h){this.providerId=c,this.signInMethod=h}toJSON(){return ue("not implemented")}_getIdTokenResponse(c){return ue("not implemented")}_linkToIdToken(c,h){return ue("not implemented")}_getReauthenticationResolver(c){return ue("not implemented")}}function Sn(g,c){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:resetPassword",We(g,c))})).apply(this,arguments)}function Cr(g,c){return $e.apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:update",We(g,c))})).apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithPassword",We(g,c))})).apply(this,arguments)}function En(g,c){return kr.apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:sendOobCode",We(g,c))})).apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(g,c){return En(g,c)})).apply(this,arguments)}function Ct(){return(Ct=(0,p.Z)(function*(g,c){return En(g,c)})).apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(g,c){return En(g,c)})).apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(g,c){return En(g,c)})).apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithEmailLink",We(g,c))})).apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithEmailLink",We(g,c))})).apply(this,arguments)}class Ni extends _n{constructor(c,h,y,w=null){super("password",y),this._email=c,this._password=h,this._tenantId=w}static _fromEmailAndPassword(c,h){return new Ni(c,h,"password")}static _fromEmailAndCode(c,h,y=null){return new Ni(c,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(c){var h=this;return(0,p.Z)(function*(){switch(h.signInMethod){case"password":return function nr(g,c){return ui.apply(this,arguments)}(c,{returnSecureToken:!0,email:h._email,password:h._password});case"emailLink":return function zn(g,c){return Ts.apply(this,arguments)}(c,{email:h._email,oobCode:h._password});default:_e(c,"internal-error")}})()}_linkToIdToken(c,h){var y=this;return(0,p.Z)(function*(){switch(y.signInMethod){case"password":return Cr(c,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Yi(g,c){return Lr.apply(this,arguments)}(c,{idToken:h,email:y._email,oobCode:y._password});default:_e(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ci(g,c){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithIdp",We(g,c))})).apply(this,arguments)}class wr extends _n{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const h=new wr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(h.idToken=c.idToken),c.accessToken&&(h.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(h.nonce=c.nonce),c.pendingToken&&(h.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(h.accessToken=c.oauthToken,h.secret=c.oauthTokenSecret):_e("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:w}=h,M=(0,ie._T)(h,["providerId","signInMethod"]);if(!y||!w)return null;const W=new wr(y,w);return W.idToken=M.idToken||void 0,W.accessToken=M.accessToken||void 0,W.secret=M.secret,W.nonce=M.nonce,W.pendingToken=M.pendingToken||null,W}_getIdTokenResponse(c){return ci(c,this.buildRequest())}_linkToIdToken(c,h){const y=this.buildRequest();return y.idToken=h,ci(c,y)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,ci(c,h)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),c.postBody=(0,P.xO)(h)}return c}}function Ss(){return(Ss=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:sendVerificationCode",We(g,c))})).apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithPhoneNumber",We(g,c))})).apply(this,arguments)}function Au(){return(Au=(0,p.Z)(function*(g,c){const h=yield rn(g,"POST","/v1/accounts:signInWithPhoneNumber",We(g,c));if(h.temporaryProof)throw er(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const dr={USER_NOT_FOUND:"user-not-found"};function uo(){return(uo=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithPhoneNumber",We(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),dr)})).apply(this,arguments)}class Ur extends _n{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,h){return new Ur({verificationId:c,verificationCode:h})}static _fromTokenResponse(c,h){return new Ur({phoneNumber:c,temporaryProof:h})}_getIdTokenResponse(c){return function Qi(g,c){return rr.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,h){return function Zn(g,c){return Au.apply(this,arguments)}(c,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Vr(g,c){return uo.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:h,verificationId:y,verificationCode:w}=this.params;return c&&h?{temporaryProof:c,phoneNumber:h}:{sessionInfo:y,code:w}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:h,verificationCode:y,phoneNumber:w,temporaryProof:M}=c;return y||h||w||M?new Ur({verificationId:h,verificationCode:y,phoneNumber:w,temporaryProof:M}):null}}class co{constructor(c){var h,y,w,M,W,ne;const Le=(0,P.zd)((0,P.pd)(c)),Ke=null!==(h=Le.apiKey)&&void 0!==h?h:null,pt=null!==(y=Le.oobCode)&&void 0!==y?y:null,nt=function ul(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=Le.mode)&&void 0!==w?w:null);U(Ke&&pt&&nt,"argument-error"),this.apiKey=Ke,this.operation=nt,this.code=pt,this.continueUrl=null!==(M=Le.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ne=Le.tenantId)&&void 0!==ne?ne:null}static parseLink(c){const h=function hr(g){const c=(0,P.zd)((0,P.pd)(g)).link,h=c?(0,P.zd)((0,P.pd)(c)).deep_link_id:null,y=(0,P.zd)((0,P.pd)(g)).deep_link_id;return(y?(0,P.zd)((0,P.pd)(y)).link:null)||y||h||c||g}(c);try{return new co(h)}catch{return null}}}let cl=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,y){return Ni._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const w=co.parseLink(y);return U(w,"argument-error"),Ni._fromEmailAndCode(h,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class di{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class As extends di{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ho extends As{static credentialFromJSON(c){const h="string"==typeof c?JSON.parse(c):c;return U("providerId"in h&&"signInMethod"in h,"argument-error"),wr._fromParams(h)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return U(c.idToken||c.accessToken,"argument-error"),wr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ho.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ho.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:w,pendingToken:M,nonce:W,providerId:ne}=c;if(!y&&!w&&!h&&!M||!ne)return null;try{return new ho(ne)._credential({idToken:h,accessToken:y,nonce:W,pendingToken:M})}catch{return null}}}let dl=(()=>{class g extends As{constructor(){super("facebook.com")}static credential(h){return wr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Hc=(()=>{class g extends As{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return wr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:w}=h;if(!y&&!w)return null;try{return g.credential(y,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),jc=(()=>{class g extends As{constructor(){super("github.com")}static credential(h){return wr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Ms extends _n{constructor(c,h){super(c,c),this.pendingToken=h}_getIdTokenResponse(c){return ci(c,this.buildRequest())}_linkToIdToken(c,h){const y=this.buildRequest();return y.idToken=h,ci(c,y)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,ci(c,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:w,pendingToken:M}=h;return y&&w&&M&&y===w?new Ms(y,M):null}static _create(c,h){return new Ms(c,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends di{constructor(c){U(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Jr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Jr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const h=Ms.fromJSON(c);return U(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:h,providerId:y}=c;if(!h||!y)return null;try{return Ms._create(y,h)}catch{return null}}}let fh=(()=>{class g extends As{constructor(){super("twitter.com")}static credential(h,y){return wr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:w}=h;if(!y||!w)return null;try{return g.credential(y,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function hl(g,c){return fl.apply(this,arguments)}function fl(){return(fl=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signUp",We(g,c))})).apply(this,arguments)}class ir{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,h,y,w=!1){return(0,p.Z)(function*(){const M=yield Dt._fromIdTokenResponse(c,y,w),W=pl(y);return new ir({user:M,providerId:W,_tokenResponse:y,operationType:h})})()}static _forOperation(c,h,y){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(y,!0);const w=pl(y);return new ir({user:c,providerId:w,_tokenResponse:y,operationType:h})})()}}function pl(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function $c(){return($c=(0,p.Z)(function*(g){var c;const h=an(g);if(yield h._initializationPromise,null!==(c=h.currentUser)&&void 0!==c&&c.isAnonymous)return new ir({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield hl(h,{returnSecureToken:!0}),w=yield ir._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(w.user),w})).apply(this,arguments)}class gl extends P.ZR{constructor(c,h,y,w){var M;super(h.code,h.message),this.operationType=y,this.user=w,Object.setPrototypeOf(this,gl.prototype),this.customData={appName:c.name,tenantId:null!==(M=c.tenantId)&&void 0!==M?M:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(c,h,y,w){return new gl(c,h,y,w)}}function Xi(g,c,h,y){return("reauthenticate"===c?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?gl._fromErrorAndOperation(g,M,c,y):M})}function es(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function fo(){return fo=(0,p.Z)(function*(g,c){const h=(0,P.m9)(g);yield ts(!0,h,c);const{providerUserInfo:y}=yield function cr(g,c){return Xe.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[c]}),w=es(y||[]);return h.providerData=h.providerData.filter(M=>w.has(M.providerId)),w.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),fo.apply(this,arguments)}function ml(g,c){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(g,c,h=!1){const y=yield Kt(g,c._linkToIdToken(g.auth,yield g.getIdToken()),h);return ir._forOperation(g,"link",y)})).apply(this,arguments)}function ts(g,c,h){return po.apply(this,arguments)}function po(){return(po=(0,p.Z)(function*(g,c,h){yield Bt(c);const w=!1===g?"provider-already-linked":"no-such-provider";U(es(c.providerData).has(h)===g,c.auth,w)})).apply(this,arguments)}function Ru(g,c){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(g,c,h=!1){const{auth:y}=g,w="reauthenticate";try{const M=yield Kt(g,Xi(y,w,c,g),h);U(M.idToken,y,"internal-error");const W=ft(M.idToken);U(W,y,"internal-error");const{sub:ne}=W;return U(g.uid===ne,y,"user-mismatch"),ir._forOperation(g,w,M)}catch(M){throw"auth/user-not-found"===M?.code&&_e(y,"user-mismatch"),M}})).apply(this,arguments)}function Ps(g,c){return fr.apply(this,arguments)}function fr(){return(fr=(0,p.Z)(function*(g,c,h=!1){const y="signIn",w=yield Xi(g,y,c),M=yield ir._fromIdTokenResponse(g,y,w);return h||(yield g._updateCurrentUser(M.user)),M})).apply(this,arguments)}function fn(g,c){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(g,c){return Ps(an(g),c)})).apply(this,arguments)}function yn(g,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(g,c){const h=(0,P.m9)(g);return yield ts(!1,h,c.providerId),ml(h,c)})).apply(this,arguments)}function ns(g,c){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(g,c){return Ru((0,P.m9)(g),c)})).apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(g,c){return rn(g,"POST","/v1/accounts:signInWithCustomToken",We(g,c))})).apply(this,arguments)}function Nn(){return Nn=(0,p.Z)(function*(g,c){const h=an(g),y=yield function _l(g,c){return xs.apply(this,arguments)}(h,{token:c,returnSecureToken:!0}),w=yield ir._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(w.user),w}),Nn.apply(this,arguments)}class go{constructor(c,h){this.factorId=c,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(c,h){return"phoneInfo"in h?ks._fromServerResponse(c,h):_e(c,"internal-error")}}class ks extends go{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,h){return new ks(h)}}function sa(g,c,h){var y;U((null===(y=h.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),U(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=h.url,c.dynamicLinkDomain=h.dynamicLinkDomain,c.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(U(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=h.iOS.bundleId),h.android&&(U(h.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=h.android.installApp,c.androidMinimumVersionCode=h.android.minimumVersion,c.androidPackageName=h.android.packageName)}function mo(){return mo=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g),w={requestType:"PASSWORD_RESET",email:c};h&&sa(y,w,h),yield function Ki(g,c){return Ct.apply(this,arguments)}(y,w)}),mo.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(g,c,h){yield Sn((0,P.m9)(g),{oobCode:c,newPassword:h})})).apply(this,arguments)}function Nu(){return Nu=(0,p.Z)(function*(g,c){yield function It(g,c){return Yt.apply(this,arguments)}((0,P.m9)(g),{oobCode:c})}),Nu.apply(this,arguments)}function aa(g,c){return yl.apply(this,arguments)}function yl(){return(yl=(0,p.Z)(function*(g,c){const h=(0,P.m9)(g),y=yield Sn(h,{oobCode:c}),w=y.requestType;switch(U(w,h,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(y.mfaInfo,h,"internal-error");default:U(y.email,h,"internal-error")}let M=null;return y.mfaInfo&&(M=go._fromServerResponse(an(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:M},operation:w}})).apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(g,c){const{data:h}=yield aa((0,P.m9)(g),c);return h.email})).apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(g,c,h){const y=an(g),w=yield hl(y,{returnSecureToken:!0,email:c,password:h}),M=yield ir._fromIdTokenResponse(y,"signIn",w);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}function Il(){return Il=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g),w={requestType:"EMAIL_SIGNIN",email:c};U(h.handleCodeInApp,y,"argument-error"),h&&sa(y,w,h),yield function al(g,c){return Ri.apply(this,arguments)}(y,w)}),Il.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g),w=cl.credentialWithLink(c,h||se());return U(w._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),fn(y,w)})).apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:createAuthUri",We(g,c))})).apply(this,arguments)}function da(){return da=(0,p.Z)(function*(g,c){const y={identifier:c,continueUri:he()?se():"http://localhost"},{signinMethods:w}=yield function ua(g,c){return pr.apply(this,arguments)}((0,P.m9)(g),y);return w||[]}),da.apply(this,arguments)}function Dl(){return Dl=(0,p.Z)(function*(g,c){const h=(0,P.m9)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&sa(h.auth,w,c);const{email:M}=yield function ln(g,c){return bs.apply(this,arguments)}(h.auth,w);M!==g.email&&(yield g.reload())}),Dl.apply(this,arguments)}function An(){return An=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};h&&sa(y.auth,M,h);const{email:W}=yield function ll(g,c){return Fr.apply(this,arguments)}(y.auth,M);W!==g.email&&(yield g.reload())}),An.apply(this,arguments)}function Pi(){return(Pi=(0,p.Z)(function*(g,c){return mt(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xr(){return Xr=(0,p.Z)(function*(g,{displayName:c,photoURL:h}){if(void 0===c&&void 0===h)return;const y=(0,P.m9)(g),M={idToken:yield y.getIdToken(),displayName:c,photoUrl:h,returnSecureToken:!0},W=yield Kt(y,function gr(g,c){return Pi.apply(this,arguments)}(y.auth,M));y.displayName=W.displayName||null,y.photoURL=W.photoUrl||null;const ne=y.providerData.find(({providerId:Le})=>"password"===Le);ne&&(ne.displayName=y.displayName,ne.photoURL=y.photoURL),yield y._updateTokensIfNecessary(W)}),Xr.apply(this,arguments)}function ku(g,c,h){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,p.Z)(function*(g,c,h){const{auth:y}=g,M={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(M.email=c),h&&(M.password=h);const W=yield Kt(g,Cr(y,M));yield g._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class fi{constructor(c,h,y={}){this.isNewUser=c,this.providerId=h,this.profile=y}}class Fu extends fi{constructor(c,h,y,w){super(c,h,y),this.username=w}}class bl extends fi{constructor(c,h){super(c,"facebook.com",h)}}class Lu extends Fu{constructor(c,h){super(c,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Wc extends fi{constructor(c,h){super(c,"google.com",h)}}class fa extends Fu{constructor(c,h,y){super(c,"twitter.com",h,y)}}function zc(g){const{user:c,_tokenResponse:h}=g;return c.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function wl(g){var c,h;if(!g)return null;const{providerId:y}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},M=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&g?.idToken){const W=null===(h=null===(c=ft(g.idToken))||void 0===c?void 0:c.firebase)||void 0===h?void 0:h.sign_in_provider;if(W)return new fi(M,"anonymous"!==W&&"custom"!==W?W:null)}if(!y)return null;switch(y){case"facebook.com":return new bl(M,w);case"github.com":return new Lu(M,w);case"google.com":return new Wc(M,w);case"twitter.com":return new fa(M,w,g.screenName||null);case"custom":case"anonymous":return new fi(M,null);default:return new fi(M,y,w)}}(h)}class Ls{constructor(c,h,y){this.type=c,this.credential=h,this.auth=y}static _fromIdtoken(c,h){return new Ls("enroll",c,h)}static _fromMfaPendingCredential(c){return new Ls("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var h,y;if(c?.multiFactorSession){if(null!==(h=c.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Ls._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(y=c.multiFactorSession)&&void 0!==y&&y.idToken)return Ls._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Sl{constructor(c,h,y){this.session=c,this.hints=h,this.signInResolver=y}static _fromError(c,h){const y=an(c),w=h.customData._serverResponse,M=(w.mfaInfo||[]).map(ne=>go._fromServerResponse(y,ne));U(w.mfaPendingCredential,y,"internal-error");const W=Ls._fromMfaPendingCredential(w.mfaPendingCredential);return new Sl(W,M,function(){var ne=(0,p.Z)(function*(Le){const Ke=yield Le._process(y,W);delete w.mfaInfo,delete w.mfaPendingCredential;const pt=Object.assign(Object.assign({},w),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(h.operationType){case"signIn":const nt=yield ir._fromIdTokenResponse(y,h.operationType,pt);return yield y._updateCurrentUser(nt.user),nt;case"reauthenticate":return U(h.user,y,"internal-error"),ir._forOperation(h.user,h.operationType,pt);default:_e(y,"internal-error")}});return function(Le){return ne.apply(this,arguments)}}())}resolveSignIn(c){var h=this;return(0,p.Z)(function*(){return h.signInResolver(c)})()}}class Eo{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>go._fromServerResponse(c.auth,y)))})}static _fromUser(c){return new Eo(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Ls._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,h){var y=this;return(0,p.Z)(function*(){const w=c,M=yield y.getSession(),W=yield Kt(y.user,w._process(y.user.auth,M,h));return yield y.user._updateTokensIfNecessary(W),y.user.reload()})()}unenroll(c){var h=this;return(0,p.Z)(function*(){const y="string"==typeof c?c:c.uid,w=yield h.user.getIdToken();try{const M=yield Kt(h.user,function _h(g,c){return mt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",We(g,c))}(h.user.auth,{idToken:w,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:W})=>W!==y),yield h.user._updateTokensIfNecessary(M),yield h.user.reload()}catch(M){throw M}})()}}const ss=new WeakMap,Oi="__sak";class Io{constructor(c,h){this.storageRetriever=c,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Oi,"1"),this.storage.removeItem(Oi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,h){return this.storage.setItem(c,JSON.stringify(h)),Promise.resolve()}_get(c){const h=this.storage.getItem(c);return Promise.resolve(h?JSON.parse(h):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const pa=(()=>{class g extends Io{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Do(){const g=(0,P.z$)();return Qe(g)||Mt(g)}()&&function oo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Uc(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const w=this.storage.getItem(y),M=this.localCache[y];w!==M&&h(y,M,w)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((ne,Le,Ke)=>{this.notifyListeners(ne,Ke)});const w=h.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(w);if(h.newValue!==ne)null!==h.newValue?this.storage.setItem(w,h.newValue):this.storage.removeItem(w);else if(this.localCache[w]===h.newValue&&!y)return}const M=()=>{const ne=this.storage.getItem(w);!y&&this.localCache[w]===ne||this.notifyListeners(w,ne)},W=this.storage.getItem(w);!function qi(){return(0,P.w1)()&&10===document.documentMode}()||W===h.newValue||h.newValue===h.oldValue?M():setTimeout(M,10)}notifyListeners(h,y){this.localCache[h]=y;const w=this.listeners[h];if(w)for(const M of Array.from(w))M(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var w=()=>super._set,M=this;return(0,p.Z)(function*(){yield w().call(M,h,y),M.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,w=this;return(0,p.Z)(function*(){const M=yield y().call(w,h);return w.localCache[h]=JSON.stringify(M),M})()}_remove(h){var y=()=>super._remove,w=this;return(0,p.Z)(function*(){yield y().call(w,h),delete w.localCache[h]})()}}return g.type="LOCAL",g})(),os=(()=>{class g extends Io{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return g.type="SESSION",g})();let qc=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(M=>M.isListeningto(h));if(y)return y;const w=new g(h);return this.receivers.push(w),w}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,p.Z)(function*(){const w=h,{eventId:M,eventType:W,data:ne}=w.data,Le=y.handlersMap[W];if(!Le?.size)return;w.ports[0].postMessage({status:"ack",eventId:M,eventType:W});const Ke=Array.from(Le).map(function(){var nt=(0,p.Z)(function*(On){return On(w.origin,ne)});return function(On){return nt.apply(this,arguments)}}()),pt=yield function Bu(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return c.apply(this,arguments)}}()))}(Ke);w.ports[0].postMessage({status:"done",eventId:M,eventType:W,response:pt})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function as(g="",c=10){let h="";for(let y=0;y<c;y++)h+=Math.floor(10*Math.random());return g+h}class Co{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,h,y=50){var w=this;return(0,p.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let W,ne;return new Promise((Le,Ke)=>{const pt=as("",20);M.port1.start();const nt=setTimeout(()=>{Ke(new Error("unsupported_event"))},y);ne={messageChannel:M,onMessage(On){const ii=On;if(ii.data.eventId===pt)switch(ii.data.status){case"ack":clearTimeout(nt),W=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(ii.data.response);break;default:clearTimeout(nt),clearTimeout(W),Ke(new Error("invalid_response"))}}},w.handlers.add(ne),M.port1.addEventListener("message",ne.onMessage),w.target.postMessage({eventType:c,eventId:pt,data:h},[M.port2])}).finally(()=>{ne&&w.removeMessageHandler(ne)})})()}}function un(){return window}function pi(){return typeof un().WorkerGlobalScope<"u"&&"function"==typeof un().importScripts}function Us(){return(Us=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ga="firebaseLocalStorageDb",ma=1,ki="firebaseLocalStorage",Bs="fbase_key";class Hs{constructor(c){this.request=c}toPromise(){return new Promise((c,h)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function To(g,c){return g.transaction([ki],c?"readwrite":"readonly").objectStore(ki)}function _a(){const g=indexedDB.open(ga,ma);return new Promise((c,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore(ki,{keyPath:Bs})}catch(w){h(w)}}),g.addEventListener("success",(0,p.Z)(function*(){const y=g.result;y.objectStoreNames.contains(ki)?c(y):(y.close(),yield function So(){const g=indexedDB.deleteDatabase(ga);return new Hs(g).toPromise()}(),c(yield _a()))}))})}function qn(g,c,h){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(g,c,h){const y=To(g,!0).put({[Bs]:c,value:h});return new Hs(y).toPromise()})).apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(g,c){const h=To(g,!1).get(c),y=yield new Hs(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Mo(g,c){const h=To(g,!0).delete(c);return new Hs(h).toPromise()}const ls=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,p.Z)(function*(){return h.db||(h.db=yield _a()),h.db})()}_withRetries(h){var y=this;return(0,p.Z)(function*(){let w=0;for(;;)try{const M=yield y._openDb();return yield h(M)}catch(M){if(w++>3)throw M;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,p.Z)(function*(){return pi()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,p.Z)(function*(){h.receiver=qc._getInstance(function bo(){return pi()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,p.Z)(function*(w,M){return{keyProcessed:(yield h._poll()).includes(M.key)}});return function(w,M){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,p.Z)(function*(w,M){return["keyChanged"]});return function(w,M){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,p.Z)(function*(){var y,w;if(h.activeServiceWorker=yield function gi(){return Us.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Co(h.activeServiceWorker);const M=yield h.sender._send("ping",{},800);M&&null!==(y=M[0])&&void 0!==y&&y.fulfilled&&null!==(w=M[0])&&void 0!==w&&w.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,p.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function Ml(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const h=yield _a();return yield qn(h,Oi,"1"),yield Mo(h,Oi),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,p.Z)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(M=>qn(M,h,y)),w.localCache[h]=y,w.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,p.Z)(function*(){const w=yield y._withRetries(M=>function js(g,c){return Fi.apply(this,arguments)}(M,h));return y.localCache[h]=w,w})()}_remove(h){var y=this;return(0,p.Z)(function*(){return y._withPendingWrite((0,p.Z)(function*(){return yield y._withRetries(w=>Mo(w,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,p.Z)(function*(){const y=yield h._withRetries(W=>{const ne=To(W,!1).getAll();return new Hs(ne).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const w=[],M=new Set;for(const{fbase_key:W,value:ne}of y)M.add(W),JSON.stringify(h.localCache[W])!==JSON.stringify(ne)&&(h.notifyListeners(W,ne),w.push(W));for(const W of Object.keys(h.localCache))h.localCache[W]&&!M.has(W)&&(h.notifyListeners(W,null),w.push(W));return w})()}notifyListeners(h,y){this.localCache[h]=y;const w=this.listeners[h];if(w)for(const M of Array.from(w))M(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function va(){return(va=(0,p.Z)(function*(g){return(yield mt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ti(g){return new Promise((c,h)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=c,y.onerror=w=>{const M=pe("internal-error");M.customData=w,h(M)},y.type="text/javascript",y.charset="UTF-8",function us(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(y)})}function ju(g){return`__${g}${Math.floor(1e6*Math.random())}`}const Br=1e12;class yh{constructor(c){this.auth=c,this.counter=Br,this._widgets=new Map}render(c,h){const y=this.counter;return this._widgets.set(y,new $u(c,this.auth.name,h||{})),this.counter++,y}reset(c){var h;const y=c||Br;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(c){var h;return(null===(h=this._widgets.get(c||Br))||void 0===h?void 0:h.getResponse())||""}execute(c){var h=this;return(0,p.Z)(function*(){var y;return null===(y=h._widgets.get(c||Br))||void 0===y||y.execute(),""})()}}class $u{constructor(c,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof c?document.getElementById(c):c;U(w,"argument-error",{appName:h}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ia(g){const c=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)c.push(h.charAt(Math.floor(Math.random()*h.length)));return c.join("")}(50);const{callback:c,"expired-callback":h}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gu=ju("rcb"),Nl=new je(3e4,6e4);class _i{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=un().grecaptcha)||void 0===c||!c.render)}load(c,h=""){return U(function Po(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),c,"argument-error"),this.shouldResolveImmediately(h)?Promise.resolve(un().grecaptcha):new Promise((y,w)=>{const M=un().setTimeout(()=>{w(pe(c,"network-request-failed"))},Nl.get());un()[Gu]=()=>{un().clearTimeout(M),delete un()[Gu];const ne=un().grecaptcha;if(!ne)return void w(pe(c,"internal-error"));const Le=ne.render;ne.render=(Ke,pt)=>{const nt=Le(Ke,pt);return this.counter++,nt},this.hostLanguage=h,y(ne)},ti(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Gu,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(M),w(pe(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var h;return!(null===(h=un().grecaptcha)||void 0===h||!h.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ca{load(c){return(0,p.Z)(function*(){return new yh(c)})()}clearedOneInstance(){}}const Wu="recaptcha",Kc={theme:"light",type:"image"};class wa{constructor(c,h=Object.assign({},Kc),y){this.parameters=h,this.type=Wu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(y),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof c?document.getElementById(c):c;U(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ca:new _i,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const h=yield c.render(),y=c.getAssertedRecaptcha();return y.getResponse(h)||new Promise(M=>{const W=ne=>{ne&&(c.tokenChangeListeners.delete(W),M(ne))};c.tokenChangeListeners.add(W),c.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof c)c(h);else if("string"==typeof c){const y=un()[c];"function"==typeof y&&y(h)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let h=c.container;if(!c.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}c.widgetId=c.getAssertedRecaptcha().render(h,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){U(he()&&!pi(),c.auth,"internal-error"),yield function vh(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const h=yield function ei(g){return va.apply(this,arguments)}(c.auth);U(h,c.auth,"internal-error"),c.parameters.sitekey=h})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zu{constructor(c,h){this.verificationId=c,this.onConfirmation=h}confirm(c){const h=Ur._fromVerification(this.verificationId,c);return this.onConfirmation(h)}}function Zu(){return(Zu=(0,p.Z)(function*(g,c,h){const y=an(g),w=yield Ol(y,c,(0,P.m9)(h));return new zu(w,M=>fn(y,M))})).apply(this,arguments)}function Pl(){return(Pl=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g);yield ts(!1,y,"phone");const w=yield Ol(y.auth,c,(0,P.m9)(h));return new zu(w,M=>yn(y,M))})).apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g),w=yield Ol(y.auth,c,(0,P.m9)(h));return new zu(w,M=>ns(y,M))})).apply(this,arguments)}function Ol(g,c,h){return ba.apply(this,arguments)}function ba(){return ba=(0,p.Z)(function*(g,c,h){var y;const w=yield h.verify();try{let M;if(U("string"==typeof w,g,"argument-error"),U(h.type===Wu,g,"argument-error"),M="string"==typeof c?{phoneNumber:c}:c,"session"in M){const W=M.session;if("phoneNumber"in M)return U("enroll"===W.type,g,"internal-error"),(yield function Zc(g,c){return mt(g,"POST","/v2/accounts/mfaEnrollment:start",We(g,c))}(g,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,g,"internal-error");const ne=(null===(y=M.multiFactorHint)||void 0===y?void 0:y.uid)||M.multiFactorUid;return U(ne,g,"missing-multi-factor-info"),(yield function No(g,c){return mt(g,"POST","/v2/accounts/mfaSignIn:start",We(g,c))}(g,{mfaPendingCredential:W.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield function Su(g,c){return Ss.apply(this,arguments)}(g,{phoneNumber:M.phoneNumber,recaptchaToken:w});return W}}finally{h._reset()}}),ba.apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(g,c){yield ml((0,P.m9)(g),c)})).apply(this,arguments)}let xl=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=an(h)}verifyPhoneNumber(h,y){return Ol(this.auth,h,(0,P.m9)(y))}static credential(h,y){return Ur._fromVerification(h,y)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:w}=h;return y&&w?Ur._fromTokenResponse(y,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Jt(g,c){return c?Ye(c):(U(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class xo extends _n{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ci(c,this._buildIdpRequest())}_linkToIdToken(c,h){return ci(c,this._buildIdpRequest(h))}_getReauthenticationResolver(c){return ci(c,this._buildIdpRequest())}_buildIdpRequest(c){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(h.idToken=c),h}}function Ta(g){return Ps(g.auth,new xo(g),g.bypassAuthState)}function Eh(g){const{auth:c,user:h}=g;return U(h,c,"internal-error"),Ru(h,new xo(g),g.bypassAuthState)}function Tr(g){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(g){const{auth:c,user:h}=g;return U(h,c,"internal-error"),ml(h,new xo(g),g.bypassAuthState)})).apply(this,arguments)}class Ku{constructor(c,h,y,w,M=!1){this.auth=c,this.resolver=y,this.user=w,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var c=this;return new Promise(function(){var h=(0,p.Z)(function*(y,w){c.pendingPromise={resolve:y,reject:w};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(M){c.reject(M)}});return function(y,w){return h.apply(this,arguments)}}())}onAuthEvent(c){var h=this;return(0,p.Z)(function*(){const{urlResponse:y,sessionId:w,postBody:M,tenantId:W,error:ne,type:Le}=c;if(ne)return void h.reject(ne);const Ke={auth:h.auth,requestUri:y,sessionId:w,tenantId:W||void 0,postBody:M||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Le)(Ke))}catch(pt){h.reject(pt)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Ta;case"linkViaPopup":case"linkViaRedirect":return Tr;case"reauthViaPopup":case"reauthViaRedirect":return Eh;default:_e(this.auth,"internal-error")}}resolve(c){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $s=new je(2e3,1e4);function Sa(){return(Sa=(0,p.Z)(function*(g,c,h){const y=an(g);Pe(g,c,di);const w=Jt(y,h);return new kl(y,"signInViaPopup",c,w).executeNotNull()})).apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g);Pe(y.auth,c,di);const w=Jt(y.auth,h);return new kl(y.auth,"reauthViaPopup",c,w,y).executeNotNull()})).apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g);Pe(y.auth,c,di);const w=Jt(y.auth,h);return new kl(y.auth,"linkViaPopup",c,w,y).executeNotNull()})).apply(this,arguments)}let kl=(()=>{class g extends Ku{constructor(h,y,w,M,W){super(h,y,M,W),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,p.Z)(function*(){const y=yield h.execute();return U(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,p.Z)(function*(){Re(1===h.filter.length,"Popup operations only handle one event");const y=as();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(w=>{h.reject(w)}),h.resolver._isIframeWebStorageSupported(h.auth,w=>{w||h.reject(pe(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,w;this.pollId=null!==(w=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(h,$s.get())};h()}}return g.currentPopupAction=null,g})();const Ma="pendingRedirect",Fl=new Map;class Xc extends Ku{constructor(c,h,y=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var c=()=>super.execute,h=this;return(0,p.Z)(function*(){let y=Fl.get(h.auth._key());if(!y){try{const M=(yield function Yu(g,c){return Sr.apply(this,arguments)}(h.resolver,h.auth))?yield c().call(h):null;y=()=>Promise.resolve(M)}catch(w){y=()=>Promise.reject(w)}Fl.set(h.auth._key(),y)}return h.bypassAuthState||Fl.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(c){var h=()=>super.onAuthEvent,y=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return h().call(y,c);if("unknown"!==c.type){if(c.eventId){const w=yield y.auth._redirectUserForId(c.eventId);if(w)return y.user=w,h().call(y,c);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Sr(){return(Sr=(0,p.Z)(function*(g,c){const h=Ar(c),y=Kn(g);if(!(yield y._isAvailable()))return!1;const w="true"===(yield y._get(h));return yield y._remove(h),w})).apply(this,arguments)}function Ws(g,c){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(g,c){return Kn(g)._set(Ar(c),"true")})).apply(this,arguments)}function Hr(g,c){Fl.set(g._key(),c)}function Kn(g){return Ye(g._redirectPersistence)}function Ar(g){return F(Ma,g.config.apiKey,g.name)}function ko(g,c,h){return function mr(g,c,h){return Pn.apply(this,arguments)}(g,c,h)}function Pn(){return(Pn=(0,p.Z)(function*(g,c,h){const y=an(g);Pe(g,c,di),yield y._initializationPromise;const w=Jt(y,h);return yield Ws(w,y),w._openRedirect(y,c,"signInViaRedirect")})).apply(this,arguments)}function or(g,c,h){return function ed(g,c,h){return Ra.apply(this,arguments)}(g,c,h)}function Ra(){return(Ra=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g);Pe(y.auth,c,di),yield y.auth._initializationPromise;const w=Jt(y.auth,h);yield Ws(w,y.auth);const M=yield Fe(y);return w._openRedirect(y.auth,c,"reauthViaRedirect",M)})).apply(this,arguments)}function I(g,c,h){return function C(g,c,h){return S.apply(this,arguments)}(g,c,h)}function S(){return(S=(0,p.Z)(function*(g,c,h){const y=(0,P.m9)(g);Pe(y.auth,c,di),yield y.auth._initializationPromise;const w=Jt(y.auth,h);yield ts(!1,y,c.providerId),yield Ws(w,y.auth);const M=yield Fe(y);return w._openRedirect(y.auth,c,"linkViaRedirect",M)})).apply(this,arguments)}function z(){return(z=(0,p.Z)(function*(g,c){return yield an(g)._initializationPromise,Z(g,c,!1)})).apply(this,arguments)}function Z(g,c){return oe.apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(g,c,h=!1){const y=an(g),w=Jt(y,c),W=yield new Xc(y,w,h).execute();return W&&!h&&(delete W.user._redirectEventId,yield y._persistUserIfCurrent(W.user),yield y._setRedirectUser(null,c)),W})).apply(this,arguments)}function Fe(g){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,p.Z)(function*(g){const c=as(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class vt{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(c,y)&&(h=!0,this.sendToConsumer(c,y),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function N(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tn(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=c,h=!0)),h}sendToConsumer(c,h){var y;if(c.error&&!tn(c)){const w=(null===(y=c.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(pe(this.auth,w))}else h.onAuthEvent(c)}isEventForConsumer(c,h){const y=null===h.eventId||!!c.eventId&&c.eventId===h.eventId;return h.filter.includes(c.type)&&y}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(et(c))}saveEventToCache(c){this.cachedEventUids.add(et(c)),this.lastProcessedEventTime=Date.now()}}function et(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function tn({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===c?.code}function Vi(g){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(g,c={}){return mt(g,"GET","/v1/projects",c)})).apply(this,arguments)}const hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^https?/;function Ll(){return(Ll=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield Vi(g);for(const h of c)try{if(Ih(h))return}catch{}_e(g,"unauthorized-domain")})).apply(this,arguments)}function Ih(g){const c=se(),{protocol:h,hostname:y}=new URL(c);if(g.startsWith("chrome-extension://")){const W=new URL(g);return""===W.hostname&&""===y?"chrome-extension:"===h&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===h&&W.hostname===y}if(!_r.test(h))return!1;if(hs.test(g))return y===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(y)}const yp=new je(3e4,6e4);function zs(){const g=un().___jsl;if(g?.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let vi=null;const Ep=new je(5e3,15e3),Fo="__/auth/iframe",Na="emulator/auth/iframe",Ip={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yn(g){const c=g.config;U(c.authDomain,g,"auth-domain-config-required");const h=c.emulator?Be(c,Na):`https://${g.config.authDomain}/${Fo}`,y={apiKey:c.apiKey,appName:g.name,v:re.SDK_VERSION},w=Dp.get(g.config.apiHost);w&&(y.eid=w);const M=g._getFrameworks();return M.length&&(y.fw=M.join(",")),`${h}?${(0,P.xO)(y).slice(1)}`}function Vl(){return Vl=(0,p.Z)(function*(g){const c=yield function vp(g){return vi=vi||function td(g){return new Promise((c,h)=>{var y,w,M;function W(){zs(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{zs(),h(pe(g,"network-request-failed"))},timeout:yp.get()})}if(null!==(w=null===(y=un().gapi)||void 0===y?void 0:y.iframes)&&void 0!==w&&w.Iframe)c(gapi.iframes.getContext());else{if(null===(M=un().gapi)||void 0===M||!M.load){const ne=ju("iframefcb");return un()[ne]=()=>{gapi.load?W():h(pe(g,"network-request-failed"))},ti(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Le=>h(Le))}W()}}).catch(c=>{throw vi=null,c})}(g),vi}(g),h=un().gapi;return U(h,g,"internal-error"),c.open({where:document.body,url:Yn(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ip,dontclear:!0},y=>new Promise(function(){var w=(0,p.Z)(function*(M,W){yield y.restyle({setHideOnLeave:!1});const ne=pe(g,"network-request-failed"),Le=un().setTimeout(()=>{W(ne)},Ep.get());function Ke(){un().clearTimeout(Le),M(y)}y.ping(Ke).then(Ke,()=>{W(ne)})});return function(M,W){return w.apply(this,arguments)}}()))}),Vl.apply(this,arguments)}const Ei={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vn=500,Dh=600,Ul="_blank",Ch="http://localhost";class Un{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Cp="__/auth/handler",Pa="emulator/auth/handler";function Vo(g,c,h,y,w,M){U(g.config.authDomain,g,"auth-domain-config-required"),U(g.config.apiKey,g,"invalid-api-key");const W={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:y,v:re.SDK_VERSION,eventId:w};if(c instanceof di){c.setDefaultLanguage(g.languageCode),W.providerId=c.providerId||"",(0,P.xb)(c.getCustomParameters())||(W.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Le,Ke]of Object.entries(M||{}))W[Le]=Ke}if(c instanceof As){const Le=c.getScopes().filter(Ke=>""!==Ke);Le.length>0&&(W.scopes=Le.join(","))}g.tenantId&&(W.tid=g.tenantId);const ne=W;for(const Le of Object.keys(ne))void 0===ne[Le]&&delete ne[Le];return`${function wh({config:g}){return g.emulator?Be(g,Pa):`https://${g.authDomain}/${Cp}`}(g)}?${(0,P.xO)(ne).slice(1)}`}const Mn="webStorageSupport",nd=class bh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=os,this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_openPopup(c,h,y,w){var M=this;return(0,p.Z)(function*(){var W;Re(null===(W=M.eventManagers[c._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ne=Vo(c,h,y,se(),w);return function fs(g,c,h,y=Vn,w=Dh){const M=Math.max((window.screen.availHeight-w)/2,0).toString(),W=Math.max((window.screen.availWidth-y)/2,0).toString();let ne="";const Le=Object.assign(Object.assign({},Ei),{width:y.toString(),height:w.toString(),top:M,left:W}),Ke=(0,P.z$)().toLowerCase();h&&(ne=at(Ke)?Ul:h),X(Ke)&&(c=c||Ch,Le.scrollbars="yes");const pt=Object.entries(Le).reduce((On,[ii,Hi])=>`${On}${ii}=${Hi},`,"");if(function bn(g=(0,P.z$)()){var c;return Mt(g)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ke)&&"_self"!==ne)return function Lo(g,c){const h=document.createElement("a");h.href=g,h.target=c;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(c||"",ne),new Un(null);const nt=window.open(c||"",ne,pt);U(nt,g,"popup-blocked");try{nt.focus()}catch{}return new Un(nt)}(c,ne,as())})()}_openRedirect(c,h,y,w){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(c),function wo(g){un().location.href=g}(Vo(c,h,y,se(),w)),new Promise(()=>{})})()}_initialize(c){const h=c._key();if(this.eventManagers[h]){const{manager:w,promise:M}=this.eventManagers[h];return w?Promise.resolve(w):(Re(M,"If manager is not set, promise should be"),M)}const y=this.initAndGetManager(c);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(c){var h=this;return(0,p.Z)(function*(){const y=yield function Qu(g){return Vl.apply(this,arguments)}(c),w=new vt(c);return y.register("authEvent",M=>(U(M?.authEvent,c,"invalid-auth-event"),{status:w.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[c._key()]={manager:w},h.iframes[c._key()]=y,w})()}_isIframeWebStorageSupported(c,h){this.iframes[c._key()].send(Mn,{type:Mn},w=>{var M;const W=null===(M=w?.[0])||void 0===M?void 0:M[Mn];void 0!==W&&h(!!W),_e(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const h=c._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function ri(g){return Ll.apply(this,arguments)}(c)),this.originValidationPromises[h]}get _shouldInitProactively(){return Uc()||Qe()||Mt()}};class wp{constructor(c){this.factorId=c}_process(c,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(c,h.credential,y);case"signin":return this._finalizeSignIn(c,h.credential);default:return ue("unexpected MultiFactorSessionType")}}}class rd extends wp{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new rd(c)}_finalizeEnroll(c,h,y){return function mh(g,c){return mt(g,"POST","/v2/accounts/mfaEnrollment:finalize",We(g,c))}(c,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,h){return function Hu(g,c){return mt(g,"POST","/v2/accounts/mfaSignIn:finalize",We(g,c))}(c,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mr=(()=>{class g{constructor(){}static assertion(h){return rd._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var Ju="@firebase/auth";class Xu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var h=this;return(0,p.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const h=this.auth.onIdTokenChanged(y=>{c(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,h),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const h=this.internalListeners.get(c);h&&(this.internalListeners.delete(c),h(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ps(){return window}(0,P.Pz)("authIdTokenMaxAge"),function Bl(g){(0,re._registerComponent)(new me.wA("auth",(c,{options:h})=>{const y=c.getProvider("app").getImmediate(),w=c.getProvider("heartbeat"),{apiKey:M,authDomain:W}=y.options;return((ne,Le)=>{U(M&&!M.includes(":"),"invalid-api-key",{appName:ne.name}),U(!W?.includes(":"),"argument-error",{appName:ne.name});const Ke={apiKey:M,authDomain:W,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:na(g)},pt=new bu(ne,Le,Ke);return function J(g,c){const h=c?.persistence||[],y=(Array.isArray(h)?h:[h]).map(Ye);c?.errorMap&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(y,c?.popupRedirectResolver)}(pt,h),pt})(y,w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,h,y)=>{c.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new me.wA("auth-internal",c=>{const h=an(c.getProvider("auth").getImmediate());return new Xu(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Ju,"0.21.5",function Dn(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,re.registerVersion)(Ju,"0.21.5","esm2017")}("Browser");const Ah=2e3;function ec(){return ec=(0,p.Z)(function*(g,c,h){var y;const{BuildInfo:w}=ps();Re(c.sessionId,"AuthEvent did not contain a session ID");const M=yield function ld(g){return Hl.apply(this,arguments)}(c.sessionId),W={};return Mt()?W.ibi=w.packageName:ut()?W.apn=w.packageName:_e(g,"operation-not-supported-in-this-environment"),w.displayName&&(W.appDisplayName=w.displayName),W.sessionId=M,Vo(g,h,c.type,void 0,null!==(y=c.eventId)&&void 0!==y?y:void 0,W)}),ec.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(g){const{BuildInfo:c}=ps(),h={};Mt()?h.iosBundleId=c.packageName:ut()?h.androidPackageName=c.packageName:_e(g,"operation-not-supported-in-this-environment"),yield Vi(g,h)})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(g,c,h){const{cordova:y}=ps();let w=()=>{};try{yield new Promise((M,W)=>{let ne=null;function Le(){var nt;M();const On=null===(nt=y.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof On&&On(),"function"==typeof h?.close&&h.close()}function Ke(){ne||(ne=window.setTimeout(()=>{W(pe(g,"redirect-cancelled-by-user"))},Ah))}function pt(){"visible"===document?.visibilityState&&Ke()}c.addPassiveListener(Le),document.addEventListener("resume",Ke,!1),ut()&&document.addEventListener("visibilitychange",pt,!1),w=()=>{c.removePassiveListener(Le),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",pt,!1),ne&&window.clearTimeout(ne)}})}finally{w()}})).apply(this,arguments)}function Hl(){return(Hl=(0,p.Z)(function*(g){const c=function nc(g){if(Re(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),h=new Uint8Array(c);for(let y=0;y<g.length;y++)h[y]=g.charCodeAt(y);return h}(g),h=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(h)).map(w=>w.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Nh=20;class qs extends vt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function Ph(g){return $l.apply(this,arguments)}function $l(){return($l=(0,p.Z)(function*(g){const c=yield ud()._get(cd(g));return c&&(yield ud()._remove(cd(g))),c})).apply(this,arguments)}function bp(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<Nh;h++){const y=Math.floor(Math.random()*c.length);g.push(c.charAt(y))}return g.join("")}function ud(){return Ye(pa)}function cd(g){return F("authEvent",g.config.apiKey,g.name)}function Fa(g){if(!g?.includes("?"))return{};const[c,...h]=g.split("?");return(0,P.zd)(h.join("?"))}const hd=class Fh{constructor(){this._redirectPersistence=os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_initialize(c){var h=this;return(0,p.Z)(function*(){const y=c._key();let w=h.eventManagers.get(y);return w||(w=new qs(c),h.eventManagers.set(y,w),h.attachCallbackListeners(c,w)),w})()}_openPopup(c){_e(c,"operation-not-supported-in-this-environment")}_openRedirect(c,h,y,w){var M=this;return(0,p.Z)(function*(){!function Rh(g){var c,h,y,w,M,W,ne,Le,Ke,pt;const nt=ps();U("function"==typeof(null===(c=nt?.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(h=nt?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(M=null===(w=null===(y=nt?.cordova)||void 0===y?void 0:y.plugins)||void 0===w?void 0:w.browsertab)||void 0===M?void 0:M.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Le=null===(ne=null===(W=nt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Le?void 0:Le.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(pt=null===(Ke=nt?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===pt?void 0:pt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const W=yield M._initialize(c);yield W.initialized(),W.resetRedirect(),function ds(){Fl.clear()}(),yield M._originValidation(c);const ne=function jl(g,c,h=null){return{type:c,eventId:h,urlResponse:null,sessionId:bp(),postBody:null,tenantId:g.tenantId,error:pe(g,"no-auth-event")}}(c,y,w);yield function rc(g,c){return ud()._set(cd(g),c)}(c,ne);const Le=yield function od(g,c,h){return ec.apply(this,arguments)}(c,ne,h),Ke=yield function tc(g){const{cordova:c}=ps();return new Promise(h=>{c.plugins.browsertab.isAvailable(y=>{let w=null;y?c.plugins.browsertab.openUrl(g):w=c.InAppBrowser.open(g,function xr(g=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(w)})})}(Le);return function ad(g,c,h){return Zs.apply(this,arguments)}(c,W,Ke)})()}_isIframeWebStorageSupported(c,h){throw new Error("Method not implemented.")}_originValidation(c){const h=c._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Mh(g){return ka.apply(this,arguments)}(c)),this.originValidationPromises[h]}attachCallbackListeners(c,h){const{universalLinks:y,handleOpenURL:w,BuildInfo:M}=ps(),W=setTimeout((0,p.Z)(function*(){yield Ph(c),h.onEvent(Lh())}),500),ne=function(){var pt=(0,p.Z)(function*(nt){clearTimeout(W);const On=yield Ph(c);let ii=null;On&&nt?.url&&(ii=function Oh(g,c){var h,y;const w=function kh(g){const c=Fa(g),h=c.link?decodeURIComponent(c.link):void 0,y=Fa(h).link,w=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Fa(w).link||w||y||h||g}(c);if(w.includes("/__/auth/callback")){const M=Fa(w),W=M.firebaseError?function xh(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,ne=null===(y=null===(h=W?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],Le=ne?pe(ne):null;return Le?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:w,postBody:null}}return null}(On,nt.url)),h.onEvent(ii||Lh())});return function(On){return pt.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,ne);const Le=w,Ke=`${M.packageName.toLowerCase()}://`;ps().handleOpenURL=function(){var pt=(0,p.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ke)&&ne({url:nt}),"function"==typeof Le)try{Le(nt)}catch(On){console.error(On)}});return function(nt){return pt.apply(this,arguments)}}()}};function Lh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}const Uo=1e3;function La(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function gs(g=(0,P.z$)()){return!("file:"!==La()&&"ionic:"!==La()&&"capacitor:"!==La()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ks(){try{const g=self.localStorage,c=as();if(g)return g.setItem(c,"1"),g.removeItem(c),!function Gl(g=(0,P.z$)()){return function ic(){return(0,P.w1)()&&11===document?.documentMode}()||function Sp(g=(0,P.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,P.hl)()}catch{return Wl()&&(0,P.hl)()}return!1}function Wl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zl(){return(function Vh(){return"http:"===La()||"https:"===La()}()||(0,P.ru)()||gs())&&!function Uh(){return(0,P.b$)()||(0,P.UG)()}()&&Ks()&&!Wl()}function gd(){return gs()&&typeof document<"u"}function Va(){return(Va=(0,p.Z)(function*(){return!!gd()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},Uo);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const ar={LOCAL:"local",NONE:"none",SESSION:"session"},Bo=U,Zl="persistence";function ac(g){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,p.Z)(function*(g){yield g._initializationPromise;const c=md(),h=F(Zl,g.config.apiKey,g.name);c&&c.setItem(h,g._getPersistence())})).apply(this,arguments)}function md(){var g;try{return(null===(g=function oc(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const Ap=U;class Ui{constructor(){this.browserResolver=Ye(nd),this.cordovaResolver=Ye(hd),this.underlyingResolver=null,this._redirectPersistence=os,this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_initialize(c){var h=this;return(0,p.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,h,y,w){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(c,h,y,w)})()}_openRedirect(c,h,y,w){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(c,h,y,w)})()}_isIframeWebStorageSupported(c,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,h)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return gd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ap(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const h=yield function sc(){return Va.apply(this,arguments)}();c.underlyingResolver=h?c.cordovaResolver:c.browserResolver})()}}function lc(g){return g.unwrap()}function Ua(g){return _d(g)}function _d(g){const{_tokenResponse:c}=g instanceof P.ZR?g.customData:g;if(!c)return null;if(!(g instanceof P.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return xl.credentialFromResult(g);const h=c.providerId;if(!h||h===ye.PASSWORD)return null;let y;switch(h){case ye.GOOGLE:y=Hc;break;case ye.FACEBOOK:y=dl;break;case ye.GITHUB:y=jc;break;case ye.TWITTER:y=fh;break;default:const{oauthIdToken:w,oauthAccessToken:M,oauthTokenSecret:W,pendingToken:ne,nonce:Le}=c;return M||W||w||ne?ne?h.startsWith("saml.")?Ms._create(h,ne):wr._fromParams({providerId:h,signInMethod:h,pendingToken:ne,idToken:w,accessToken:M}):new ho(h).credential({idToken:w,accessToken:M,rawNonce:Le}):null}return g instanceof P.ZR?y.credentialFromError(g):y.credentialFromResult(g)}function wt(g,c){return c.catch(h=>{throw h instanceof P.ZR&&function Ho(g,c){var h;const y=null===(h=c.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Bi(g,function Fn(g,c){var h;const y=(0,P.m9)(g),w=c;return U(c.customData.operationType,y,"argument-error"),U(null===(h=w.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),Sl._fromError(y,w)}(g,c));else if(y){const w=_d(c),M=c;w&&(M.credential=w,M.tenantId=y.tenantId||void 0,M.email=y.email||void 0,M.phoneNumber=y.phoneNumber||void 0)}}(g,h),h}).then(h=>{const w=h.user;return{operationType:h.operationType,credential:Ua(h),additionalUserInfo:zc(h),user:kt.getOrCreate(w)}})}function Vt(g,c){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(g,c){const h=yield c;return{verificationId:h.verificationId,confirm:y=>wt(g,h.confirm(y))}})).apply(this,arguments)}class Bi{constructor(c,h){this.resolver=h,this.auth=function Yl(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return wt(lc(this.auth),this.resolver.resolveSignIn(c))}}class kt{constructor(c){this._delegate=c,this.multiFactor=function Al(g){const c=(0,P.m9)(g);return ss.has(c)||ss.set(c,Eo._fromUser(c)),ss.get(c)}(c)}static getOrCreate(c){return kt.USER_MAP.has(c)||kt.USER_MAP.set(c,new kt(c)),kt.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var h=this;return(0,p.Z)(function*(){return wt(h.auth,yn(h._delegate,c))})()}linkWithPhoneNumber(c,h){var y=this;return(0,p.Z)(function*(){return Vt(y.auth,function _p(g,c,h){return Pl.apply(this,arguments)}(y._delegate,c,h))})()}linkWithPopup(c){var h=this;return(0,p.Z)(function*(){return wt(h.auth,function Jc(g,c,h){return Ln.apply(this,arguments)}(h._delegate,c,Ui))})()}linkWithRedirect(c){var h=this;return(0,p.Z)(function*(){return yield ac(an(h.auth)),I(h._delegate,c,Ui)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var h=this;return(0,p.Z)(function*(){return wt(h.auth,ns(h._delegate,c))})()}reauthenticateWithPhoneNumber(c,h){return Vt(this.auth,function cs(g,c,h){return qu.apply(this,arguments)}(this._delegate,c,h))}reauthenticateWithPopup(c){return wt(this.auth,function Qc(g,c,h){return Aa.apply(this,arguments)}(this._delegate,c,Ui))}reauthenticateWithRedirect(c){var h=this;return(0,p.Z)(function*(){return yield ac(an(h.auth)),or(h._delegate,c,Ui)})()}sendEmailVerification(c){return function Ou(g,c){return Dl.apply(this,arguments)}(this._delegate,c)}unlink(c){var h=this;return(0,p.Z)(function*(){return yield function ra(g,c){return fo.apply(this,arguments)}(h._delegate,c),h})()}updateEmail(c){return function xu(g,c){return ku((0,P.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function vo(g,c){return ku((0,P.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Oo(g,c){return Yc.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function is(g,c){return Xr.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,h){return function ha(g,c,h){return An.apply(this,arguments)}(this._delegate,c,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kt.USER_MAP=new WeakMap;const Ys=U;let Ql=(()=>{class g{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:w}=h.options;Ys(w,"invalid-api-key",{appName:h.name}),Ys(w,"invalid-api-key",{appName:h.name});const M=typeof window<"u"?Ui:void 0;this._delegate=y.initialize({options:{persistence:yd(w,h.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(st),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function ol(g,c,h){const y=an(g);U(y._canInitEmulator,y,"emulator-config-failed"),U(/^https?:\/\//.test(c),y,"invalid-emulator-scheme");const w=!!h?.disableWarnings,M=ao(c),{host:W,port:ne}=function lo(g){const c=ao(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(y);if(w){const M=w[1];return{host:M,port:Ot(y.substr(M.length+1))}}{const[M,W]=y.split(":");return{host:M,port:Ot(W)}}}(c);y.config.emulator={url:`${M}//${W}${null===ne?"":`:${ne}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:W,port:ne,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function Tn(){function g(){const c=document.createElement("p"),h=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,y)}applyActionCode(h){return function oa(g,c){return Nu.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return aa(this._delegate,h)}confirmPasswordReset(h,y){return function _o(g,c,h){return _t.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var w=this;return(0,p.Z)(function*(){return wt(w._delegate,function Gc(g,c,h){return El.apply(this,arguments)}(w._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function ca(g,c){return da.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Pu(g,c){return"EMAIL_SIGNIN"===co.parseLink(c)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,p.Z)(function*(){Ys(zl(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function k(g,c){return z.apply(this,arguments)}(h._delegate,Ui);return y?wt(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Tp(g,c){an(g)._logFramework(c)}(this._delegate,h)}onAuthStateChanged(h,y,w){const{next:M,error:W,complete:ne}=Qs(h,y,w);return this._delegate.onAuthStateChanged(M,W,ne)}onIdTokenChanged(h,y,w){const{next:M,error:W,complete:ne}=Qs(h,y,w);return this._delegate.onIdTokenChanged(M,W,ne)}sendSignInLinkToEmail(h,y){return function xt(g,c,h){return Il.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function hi(g,c,h){return mo.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,p.Z)(function*(){let w;switch(function ql(g,c){Bo(Object.values(ar).includes(c),g,"invalid-persistence-type"),(0,P.b$)()?Bo(c!==ar.SESSION,g,"unsupported-persistence-type"):(0,P.UG)()?Bo(c===ar.NONE,g,"unsupported-persistence-type"):Wl()?Bo(c===ar.NONE||c===ar.LOCAL&&(0,P.hl)(),g,"unsupported-persistence-type"):Bo(c===ar.NONE||Ks(),g,"unsupported-persistence-type")}(y._delegate,h),h){case ar.SESSION:w=os;break;case ar.LOCAL:w=(yield Ye(ls)._isAvailable())?ls:pa;break;case ar.NONE:w=L;break;default:return _e("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(w)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return wt(this._delegate,function Mu(g){return $c.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return wt(this._delegate,fn(this._delegate,h))}signInWithCustomToken(h){return wt(this._delegate,function rs(g,c){return Nn.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return wt(this._delegate,function ae(g,c,h){return fn((0,P.m9)(g),cl.credential(c,h))}(this._delegate,h,y))}signInWithEmailLink(h,y){return wt(this._delegate,function kn(g,c,h){return yo.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return Vt(this._delegate,function Ht(g,c,h){return Zu.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,p.Z)(function*(){return Ys(zl(),y._delegate,"operation-not-supported-in-this-environment"),wt(y._delegate,function Gs(g,c,h){return Sa.apply(this,arguments)}(y._delegate,h,Ui))})()}signInWithRedirect(h){var y=this;return(0,p.Z)(function*(){return Ys(zl(),y._delegate,"operation-not-supported-in-this-environment"),yield ac(y._delegate),ko(y._delegate,h,Ui)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function vl(g,c){return la.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ar,g})();function Qs(g,c,h){let y=g;"function"!=typeof g&&({next:y,error:c,complete:h}=g);const w=y;return{next:W=>w(W&&kt.getOrCreate(W)),error:c,complete:h}}function yd(g,c){const h=function Bh(g,c){const h=md();if(!h)return[];const y=F(Zl,g,c);switch(h.getItem(y)){case ar.NONE:return[L];case ar.LOCAL:return[ls,os];case ar.SESSION:return[os];default:return[]}}(g,c);if(typeof self<"u"&&!h.includes(ls)&&h.push(ls),typeof window<"u")for(const y of[pa,os])h.includes(y)||h.push(y);return h.includes(L)||h.push(L),h}class Zt{constructor(){this.providerId="phone",this._delegate=new xl(lc(Q.Z.auth()))}static credential(c,h){return xl.credential(c,h)}verifyPhoneNumber(c,h){return this._delegate.verifyPhoneNumber(c,h)}unwrap(){return this._delegate}}Zt.PHONE_SIGN_IN_METHOD=xl.PHONE_SIGN_IN_METHOD,Zt.PROVIDER_ID=xl.PROVIDER_ID;const At=U;class lr{constructor(c,h,y=Q.Z.app()){var w;At(null===(w=y.options)||void 0===w?void 0:w.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new wa(c,h,y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vd(g){g.INTERNAL.registerComponent(new me.wA("auth-compat",c=>{const h=c.getProvider("app-compat").getImmediate(),y=c.getProvider("auth");return new Ql(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:cl,FacebookAuthProvider:dl,GithubAuthProvider:jc,GoogleAuthProvider:Hc,OAuthProvider:ho,SAMLAuthProvider:Jr,PhoneAuthProvider:Zt,PhoneMultiFactorGenerator:Mr,RecaptchaVerifier:lr,TwitterAuthProvider:fh,Auth:Ql,AuthCredential:_n,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.3.5")}(Q.Z)},8766:(it,Ce,x)=>{x.d(Ce,{Lj:()=>_e,X3:()=>be});var p=x(5861);const Q=(U,ue)=>ue.some(Re=>U instanceof Re);let P,re;const me=new WeakMap,le=new WeakMap,ye=new WeakMap,j=new WeakMap,H=new WeakMap;let Se={get(U,ue,Re){if(U instanceof IDBTransaction){if("done"===ue)return le.get(U);if("objectStoreNames"===ue)return U.objectStoreNames||ye.get(U);if("store"===ue)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return ve(U[ue])},set:(U,ue,Re)=>(U[ue]=Re,!0),has:(U,ue)=>U instanceof IDBTransaction&&("done"===ue||"store"===ue)||ue in U};function te(U){return"function"==typeof U?function Oe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ue){return U.apply(de(this),ue),ve(me.get(this))}:function(...ue){return ve(U.apply(de(this),ue))}:function(ue,...Re){const Ve=U.call(de(this),ue,...Re);return ye.set(Ve,ue.sort?ue.sort():[ue]),ve(Ve)}}(U):(U instanceof IDBTransaction&&function ze(U){if(le.has(U))return;const ue=new Promise((Re,Ve)=>{const Ye=()=>{U.removeEventListener("complete",He),U.removeEventListener("error",J),U.removeEventListener("abort",J)},He=()=>{Re(),Ye()},J=()=>{Ve(U.error||new DOMException("AbortError","AbortError")),Ye()};U.addEventListener("complete",He),U.addEventListener("error",J),U.addEventListener("abort",J)});le.set(U,ue)}(U),Q(U,function ee(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Se):U)}function ve(U){if(U instanceof IDBRequest)return function K(U){const ue=new Promise((Re,Ve)=>{const Ye=()=>{U.removeEventListener("success",He),U.removeEventListener("error",J)},He=()=>{Re(ve(U.result)),Ye()},J=()=>{Ve(U.error),Ye()};U.addEventListener("success",He),U.addEventListener("error",J)});return ue.then(Re=>{Re instanceof IDBCursor&&me.set(Re,U)}).catch(()=>{}),H.set(ue,U),ue}(U);if(j.has(U))return j.get(U);const ue=te(U);return ue!==U&&(j.set(U,ue),H.set(ue,U)),ue}const de=U=>H.get(U);function be(U,ue,{blocked:Re,upgrade:Ve,blocking:Ye,terminated:He}={}){const J=indexedDB.open(U,ue),se=ve(J);return Ve&&J.addEventListener("upgradeneeded",he=>{Ve(ve(J.result),he.oldVersion,he.newVersion,ve(J.transaction))}),Re&&J.addEventListener("blocked",()=>Re()),se.then(he=>{He&&he.addEventListener("close",()=>He()),Ye&&he.addEventListener("versionchange",()=>Ye())}).catch(()=>{}),se}function _e(U,{blocked:ue}={}){const Re=indexedDB.deleteDatabase(U);return ue&&Re.addEventListener("blocked",()=>ue()),ve(Re).then(()=>{})}const pe=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Pe=new Map;function Te(U,ue){if(!(U instanceof IDBDatabase)||ue in U||"string"!=typeof ue)return;if(Pe.get(ue))return Pe.get(ue);const Re=ue.replace(/FromIndex$/,""),Ve=ue!==Re,Ye=Ie.includes(Re);if(!(Re in(Ve?IDBIndex:IDBObjectStore).prototype)||!Ye&&!pe.includes(Re))return;const He=function(){var J=(0,p.Z)(function*(se,...he){const De=this.transaction(se,Ye?"readwrite":"readonly");let Me=De.store;return Ve&&(Me=Me.index(he.shift())),(yield Promise.all([Me[Re](...he),Ye&&De.done]))[0]});return function(he){return J.apply(this,arguments)}}();return Pe.set(ue,He),He}!function st(U){Se=U(Se)}(U=>({...U,get:(ue,Re,Ve)=>Te(ue,Re)||U.get(ue,Re,Ve),has:(ue,Re)=>!!Te(ue,Re)||U.has(ue,Re)}))},5861:(it,Ce,x)=>{function p(P,re,ee,ie,me,le,ye){try{var j=P[le](ye),H=j.value}catch(K){return void ee(K)}j.done?re(H):Promise.resolve(H).then(ie,me)}function Q(P){return function(){var re=this,ee=arguments;return new Promise(function(ie,me){var le=P.apply(re,ee);function ye(H){p(le,ie,me,ye,j,"next",H)}function j(H){p(le,ie,me,ye,j,"throw",H)}ye(void 0)})}}x.d(Ce,{Z:()=>Q})}},it=>{it(it.s=9061)}]);